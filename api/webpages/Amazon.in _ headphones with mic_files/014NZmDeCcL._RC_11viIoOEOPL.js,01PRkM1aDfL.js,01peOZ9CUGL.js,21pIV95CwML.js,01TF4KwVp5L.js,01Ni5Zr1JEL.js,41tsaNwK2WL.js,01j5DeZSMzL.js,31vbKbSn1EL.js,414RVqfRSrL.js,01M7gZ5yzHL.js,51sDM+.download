(function(e){var f=window.AmazonUIPageJS||window.P,g=f._namespace||f.attributeErrors,c=g?g("GuidedNavigationWidgetAssets",""):f;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,f,g){"use strict";e.when("A","s-url-parameters").register("inscx-guided-navigation-controller",function(c,h){function e(){var a=[],b;for(b in d)d.hasOwnProperty(b)&&d[b]&&a.push(d[b]);return a}function g(){var a=document.getElementById("guided-apply");0<e().length?c.show(a):c.hide(a)}function p(a,
b,c){var e,d="",d=c.map(function(a){return a.key}).join("|");return a.split(",").map(function(a){return(e=a.split(":")[0])&&e===b?e+":"+d:a}).join(",")}function k(a){var b=l(document.getElementById(a.key));d[a.key]=a;b.addClass("inscx-guided-search-recommendation-pill-clicked")}function m(a){var b=l(document.getElementById(a.key));d[a.key]=null;b.removeClass("inscx-guided-search-recommendation-pill-clicked")}function q(a){d[a.key]?m(a):k(a)}function n(){var a;var b,c=e(),d=c[c.length-1];d?(b=h.parseQueryString(d.searchUrl),
!0===d.isMultiSelect&&(a=h.getParamValue(b,"rh"),a=p(a,d.shortId,c),h.setParamValue(b,"rh",a))):b=h.parseQueryString(f.location.search);a=h.paramsToString(b,!0);document.getElementById("guided-apply").setAttribute("t_href",encodeURI(a));f.location.search=a}var l=c.$,d={};c.declarative("guided-recommendation-apply","click",n);c.declarative("guided-recommendation-click","click",function(a){a=a.data;var b;a&&(!1===a.isMultiSelect?(b=e(),b.forEach(function(a){m(a)}),k(a),n()):(q(a),g()))})})});
/* ******** */
(function(e){var d=window.AmazonUIPageJS||window.P,f=d._namespace||d.attributeErrors,c=f?f("SearchFollowButtonAssets",""):d;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,d,f){e.when("jQuery","rush-framework","af").register("rdx-follow-button",function(c,e){function k(a){d.ue&&d.ue.tag&&d.ue.count&&(d.ue.tag(a,"searchEntityFollow"),d.ue.count(a+"Count",1))}function l(a){a.removeClass("aok-hidden")}e.registerComponent("rdx-follow-button","rdx-follow-button",
function(a){function e(a){b.removeClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(g);b.find(".rdx-follow-button-button").attr("aria-label",t);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-following-icon").addClass("rdx-follow-button-follow-icon");b.unbind().click(function(){p(a)});l(b)}function m(a){b.addClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(n);b.find(".rdx-follow-button-button").attr("aria-label",
u);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-follow-icon").addClass("rdx-follow-button-following-icon");b.unbind().click(function(){v(a)});l(b)}function w(){b.removeClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(g);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-following-icon").addClass("rdx-follow-button-follow-icon");b.unbind().click(function(){"undefined"!==typeof sessionStorage&&(sessionStorage.followKey=
h);d.location.href=x});l(b)}function p(a){c.ajax({type:"POST",contentType:"application/json; charset\x3dutf-8",url:y,data:JSON.stringify({authenticity_token:a,entity_id:h,category:q,ref:z}),success:function(){m(a)},error:function(){e();r.removeClass("aok-hidden");k("EntityFollowError")}})}function v(a){c.ajax({type:"DELETE",url:A+"\x26"+c.param({authenticity_token:a}),data:{},success:function(){e(a)},error:function(){m(a);r.removeClass("aok-hidden");k("EntityUnfollowError")}})}function B(){c.ajax({type:"GET",
url:C,data:{},success:function(a){if(a.isFollowable)if(a.signedIn)if(a.isFollowing)m(a.csrf);else{var b;b=h;var c;c=/rdx-entity-follow=([^#&]+)/.exec(d.location.search);(c&&2===c.length?c[1]:f)!==b||"undefined"===typeof sessionStorage?b=!1:(c=sessionStorage.followKey,sessionStorage.removeItem("followKey"),b=c===b);b?p(a.csrf):e(a.csrf)}else w()},error:function(){k("EntityFollowStatusError")}})}var b=c(a.elem()).find(".rdx-follow-button"),r=c(a.elem()).find(".rdx-follow-button-alert"),h=a.prop("entityID"),
q=a.prop("entityType"),C=a.prop("followStatusUrl"),y=a.prop("followUrl"),A=a.prop("unfollowUrl"),x=a.prop("flexSignInUrl"),g=a.prop("followText"),n=a.prop("followingText"),t=a.prop("followARIALabel"),u=a.prop("followingARIALabel"),z=a.prop("followReftag");"undefined"!==typeof h&&"undefined"!==typeof q&&("undefined"===typeof g&&(g="Follow"),"undefined"===typeof n&&(n="Following"),B())})})});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,c=e?e("SearchEntityWidgetAssets",""):d;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,d,e){b.when("jQuery","a-truncate").register("rdx-entity-paragraph-common",function(c,b){return{rdxEntityLineHeightOverride:function(a){c(a.elem()).find(".rdx-entity-paragraph").each(function(a,b){a=c(b);b=a.attr("data-a-max-rows");a.css({"line-height":"1.5em","max-height":1.5*b+"em"})})},rdxEntityParagraphARIATruncate:function(a){a=
c(a.elem());a.find(".a-truncate-full").attr("aria-hidden","true");a.find(".a-truncate-cut").attr("aria-hidden","false")},rdxEntityUpdateParagraphTruncate:function(a){a=c(a.elem()).find(".a-truncate");b.get(a).update()}}});"use strict";b.when("rush-framework","rdx-entity-paragraph-common").register("rdx-entity-paragraph-truncate",function(c,b){c.registerComponent("rdx-entity-paragraph-truncate","rdx-entity-paragraph-truncate",function(a){b.rdxEntityLineHeightOverride(a);b.rdxEntityParagraphARIATruncate(a);
b.rdxEntityUpdateParagraphTruncate(a)})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("SearchWebAskAndAssistWidgetAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(e){var n=window.AmazonUIPageJS||window.P,r=n._namespace||n.attributeErrors,c=r?r("SearchWebKnowledgeWidgetAssets",""):n;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,n,r){e.when("A","s-web-application-controller","rush-util","tab-nav-util").register("tab-nav-ajax",function(c,d,e,h){return{ajaxTabClick:function(c){var b=c.selectedTab.$tab;c=b.attr("id");var a=b.attr("data-ajaxUrl"),l=b.closest("[data-widgetId]").attr("data-widgetId"),b=b.closest("[data-uuid]").attr("data-uuid"),
m="",g=!1;e.isNullOrUndefined(l)||2!==l.split(":").length||(m=l.split(":")[0]);l={uuid:b,ajaxUrl:a};(g=h.checkCriticalDataMissing(l))?h.logMissingCriticalData(l,m):(h.logMetric("tab_navigation:"+m),d.requestPartialContent(a,{suffix:":"+b+":"+c})["catch"](function(){h.logMetric("tab_navigation:"+m+":ajax_call_failure")}))}}});e.when("A","jQuery","rush-framework","s-actions","rush-util","tab-nav-util","tab-nav-ajax","a-carousel-framework").register("know-tab-nav",function(c,d,e,h,k,b,a,l){e.registerComponent("s-tab-navigation-component",
"s-tab-navigation-component",function(m){var g=m.elem(),e=d(g),g=e.closest("[data-uuid]").attr("data-uuid"),t=e.closest("[data-widgetId]").attr("data-widgetId"),f=b.getMatchingElement(e,".a-carousel-container"),p=e.closest(".a-tab-content"),n=b.getActiveTabHeight(e),u=b.getMatchingElement(e,"[id*\x3dtab-navigation-tab-spinner]"),r="",x=!1,v=p.attr("id"),w=p.closest(".a-tab-container").find(".know-tab-nav-tabs-set").find("li.know-tab-nav-tab-header#"+b.escapeSpecialHashCharacter(v)),q=b.getMatchingElement(f,
"[id*\x3dtab-navigation-asin-header]");k.isNullOrUndefined(t)||2!==t.split(":").length||(r=t.split(":")[0]);t={uuid:g,carousel:f,tabContent:p,initialActiveTabHeight:n};(x=b.checkCriticalComponentDataInvalid(t))?b.logMissingCriticalData(t,r):(m.on(h.LOAD_SEARCH_PAGE+":"+g+":"+v,function(){u=b.getMatchingElement(e,"[id*\x3dtab-navigation-tab-spinner]");!p.is(".a-hidden")&&0<u.length&&(f.addClass("aok-hidden"),u.height(n),u.html('\x3cdiv class\x3d"a-spinner-wrapper know-tab-nav-spinner"\x3e\x3cspan class\x3d"a-spinner a-spinner-medium"\x3e\x3c/span\x3e\x3c/div\x3e'))}),
m.on(h.RESULT_ITEM_READY+":"+g+":"+v,function(a){var c=p.attr("id"),d=document.createElement("div");k.isNullOrUndefined(a)||k.isBlank(c)?b.logMetric("tab_navigation:"+r+":ajax_asin_invalid"):(a=a.item.html,d.innerHTML=a,d=d.firstElementChild.getAttribute("data-asin"),k.isNotBlank(d)&&!p.is(".a-hidden")&&(d="#tab-navigation-replace-"+b.escapeSpecialHashCharacter(c)+"-"+d,d=e.find(d)[0],k.isNullOrUndefined(d)||(a=b.getAsinContent(a),0<a.length&&(m.replace(d,a[0].innerHTML),k.isNullOrUndefined(u)||0!==
p.find("[id*\x3dtab-navigation-replace]").length||(u.remove(),f.removeClass("aok-hidden"),0<q.length&&b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-top-space-"+b.escapeSpecialHashCharacter(c)),q.outerHeight(!0)),b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-"+b.escapeSpecialHashCharacter(c)),0<q.length?f.height()-q.outerHeight(!0):f.height()),l.createAll(),l.initializeAll())))))}),0<q.length&&b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-top-space-"+
b.escapeSpecialHashCharacter(v)),q.outerHeight(!0)),b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-"+b.escapeSpecialHashCharacter(v)),0<q.length?f.height()-q.outerHeight(!0):f.height()),b.setLineClampClass(b.getMatchingElement(f,"#tab-navigation-tab-link-line-clamp-"+b.escapeSpecialHashCharacter(v))),c.on("a:tabs:"+g+":"+p.data("a-name")+":select",a.ajaxTabClick),w.removeClass("know-tab-nav-disable-tab"),w.addClass("know-tab-nav-enable-tab"))})});e.when("jQuery","rush-util").register("tab-nav-util",
function(c,d){function e(a,b){var d=c(a),g;b.forEach(function(a){g=d.find(a);0<g.length&&(d=g)});return d.children()}function h(a){return(a.match(/(\s|^)s-line-clamp-\d+(?!\S)\b/g)||[]).map(c.trim)}function k(a){c(a).removeClass(function(a,b){return h(b).join(" ")}).addClass("s-line-clamp-2")}function b(a){var b=n.ue;b&&b.tag&&b.tag(a)}return{getAsinContent:function(a){a=e(a,[".template\\\x3dSEARCH_RESULTS",".s-latency-cf-section",".s-card-container"]);a.find(".a-spacing-medium").removeClass("a-spacing-medium");
a.find('[class*\x3d"status-badge"]').remove();k(a.find("[class*\x3ds-line-clamp]"));return a},findLineClampClass:h,getActiveTabHeight:function(a){a=c(a).closest(".a-tab-container").find(".a-tab-content").not(".a-hidden").height();return d.isNullOrUndefined(a)?400:a},escapeSpecialHashCharacter:function(a){return a.replace(/#/g,"\\#")},logMetric:b,checkCriticalDataMissing:function(a){for(var b in a)if(d.isNullOrUndefined(a[b])||d.isBlank(a[b]))return!0;return!1},checkCriticalComponentDataInvalid:function(a){return d.isNullOrUndefined(a.uuid)||
d.isBlank(a.uuid)||0>=c(a.carousel).length||0>=c(a.tabContent).length||!d.isNumber(a.initialActiveTabHeight)?!0:!1},logMissingCriticalData:function(a,c){for(var e in a)(d.isNullOrUndefined(a[e])||d.isBlank(a[e]))&&b("tab-navigation:"+c+":"+e)},getMatchingElement:function(a,b){return c(a).find(b)},setElementHeight:function(a,b){c(a).height(b)},setLineClampClass:k,setCSSPropertyForObject:function(a,b,c){d.isNullOrUndefined(c)||a.css(b,c)}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("SearchWebSpecBasedShoppingWidgetAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,c=e?e("LoomSponsoredProductsAssets",""):d;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,d,e){b.when("A","rush-framework").register("sp-sponsored-result",function(c,b){function e(a){a=a.elem();a=c.$(a).find(".s-image");if(0<a.length){a=(a=a.is(":visible"))?0:1;var b=f("sp_hidden")||0;f("sp_hidden",b+a);a=f("sp_delivered")||0;f("sp_delivered",a+1)}}var f=d.ue&&d.ue.count;f&&
b.registerComponent("sp-sponsored-result","sp-sponsored-result",e)})});
/* ******** */
(function(g){var r=window.AmazonUIPageJS||window.P,v=r._namespace||r.attributeErrors,c=v?v("QuantitySelectorAssets",""):r;c.guardFatal?c.guardFatal(g)(c,window):c.execute(function(){g(c,window)})})(function(g,r,v){g.when("A","QuantitySelectorConstants","a-util").execute("qsAUIDeps-main",function(c,a,b){function f(){d&&d.enableCheckoutCompatibility&&e()}function e(){c.$('span[id^\x3d"'+a.getQsWidgetSummaryPriceId("")+'"][data-a-color\x3d"price"]').each(function(){c.$(this)[0].style.color="#B12704"});
c.$('span[id^\x3d"'+a.getQsWidgetButtonId("")+'"]').each(function(){var a=c.$(this);a.hasClass("a-button-dropdown")&&a.hasClass("a-button-small")&&(a=a.attr("id"),c.$('button[id^\x3d"'+a+'-announce"]').each(function(){c.$(this)[0].style.paddingRight="17px"}))})}function u(a){function d(a){return c.$(a+"-announce")}return function(a){return new d(a)}}function B(d){var f=function(a,f){var b=a+"-extradata",e=d.state(b);if(null==f)return b=d.state(a),f=c.$.extend({},b,e);e=c.$.extend({},e,f);d.state(b,
e)};f.parse=function(){for(var f=c.$(a.getQsWidgetGenericStateSelectorQuery()),h=a.getQsWidgetConfigurationId(""),m=0;m<f.length;m++){var e=f[m].getAttribute("data-a-state");if((e=b.parseJSON(e).key)&&e.substring(0,h.length)==h){var q=d.state(e);q&&q.id||(q=b.parseJSON(f[m].innerHTML),d.state(e,q))}}};f.replace=function(a,f){a+="-extradata";"function"===typeof d.state.replace?d.state.replace(a,f):d.state(a,f)};return{state:f}}var d;g.when("QuantitySelectorAUIDeps_AState","QuantitySelectorAUIDeps_AButton").execute("qsAUIDeps-register",
function(a,d){g.register("QuantitySelectorAUIDeps",function(){return{aUtil:b,aState:a.object,aButton:d.object,initialize:f}})});(function(){for(var f=c.$(a.getQsWidgetGenericStateSelectorQuery()),e=a.getQsWidgetGlobalConfigurationId(),k=0;k<f.length;k++){var h=f[k].getAttribute("data-a-state");if((h=b.parseJSON(h).key)&&h.substring(0,e.length)==e){d=b.parseJSON(f[k].innerHTML);break}}})();(function(){d&&d.enableCheckoutCompatibility?(g.when("a-state").execute("qsAUIDeps-checkout-compat-a-state-register",
function(a){g.register("QuantitySelectorAUIDeps_AState",function(){return{object:B(a)}})}),g.when("a-buttons").execute("qsAUIDeps-checkout-compat-a-button-register",function(a){g.register("QuantitySelectorAUIDeps_AButton",function(){return{object:u(a)}})}),c.on("checkout:afterReload",function(){c.trigger(a.getQsWidgetEventInitialize(),!1)})):(g.when("a-state").execute("qsAUIDeps-a-state-register",function(a){g.register("QuantitySelectorAUIDeps_AState",function(){return{object:a}})}),g.when("a-button").execute("qsAUIDeps-a-button-register",
function(a){g.register("QuantitySelectorAUIDeps_AButton",function(){return{object:a}})}));c.on("a:pageUpdate ready",function(){c.trigger(a.getQsWidgetEventInitialize(),!1)})})();f()});"use strict";g.when("A").register("QuantitySelectorConstants",function(c){var a={height:303,heightWithAtc:355,disclaimerTextAdjustment:41,disclaimerTextAdjustmentWithAtc:40},b={scrollEventStop:200,constant:19,increment:45,adjustment:20};return{getQsWidgetEventInitialize:function(){return"quantity-selector-widget:initialize"},
getQsWidgetEventLoadStatesAndInitialize:function(){return"quantity-selector-widget:loadStatesAndInitialize"},getQsWidgetEventTriggerAction:function(){return"quantity-selector-widget:triggerAction"},getQsWidgetEventConfigureList:function(){return"quantity-selector-widget:configure:list"},getQsWidgetEventConfigureEnable:function(){return"quantity-selector-widget:configure:enable"},getQsWidgetEventConfigureDisable:function(){return"quantity-selector-widget:configure:disable"},getQsWidgetEventConfigureReset:function(){return"quantity-selector-widget:configure:reset"},
getQsWidgetEventConfigureGet:function(){return"quantity-selector-widget:configure:get"},getQsWidgetEventConfigureSet:function(){return"quantity-selector-widget:configure:set"},getQsWidgetEventSelectId:function(){return"quantity-selector-widget:selectId"},getQsWidgetEventSelectQuantity:function(){return"quantity-selector-widget:selectQuantity"},getQsWidgetEventAction:function(a){return"quantity-selector-widget:action:"+a},getQsWidgetAuiInputTextWrapperClass:function(){return"a-input-text-wrapper"},
getQsWidgetActivateDebounce:function(){return 100},getQsWidgetInitialViewDropdown:function(){return"dropdown"},getQsWidgetActionTriggerOnConfirmation:function(){return"on_confirmation"},getQsWidgetActionTriggerOnSelect:function(){return"on_select"},getQsWidgetGlobalConfigurationId:function(){return"qs-widget-global-configuration"},getQsWidgetConfigurationId:function(a){return"qs-widget-configuration-"+a},getQsWidgetStateScriptSelectorQuery:function(a){return"script[data-a-state*\x3d'qs-widget-configuration-"+
a+"'], "+("div[data-a-state*\x3d'qs-widget-configuration-"+a+"']")},getQsWidgetGenericStateSelectorQuery:function(){return"script[type\x3d'a-state'], div[data-a-state]"},getQsWidgetContainerId:function(a){return"qs-widget-container-"+a},getQsWidgetDivSelectorQueryForWidgetContainers:function(){return"div[id^\x3dqs-widget-container-]"},getQsWidgetSpinnerId:function(a){return"qs-widget-spinner-"+a},getQsWidgetDivSelectorQueryForSpinners:function(){return"div[id^\x3dqs-widget-spinner-]"},getQsWidgetCheckboxId:function(a){return"qs-widget-checkbox-"+
a},getQsWidgetInputSelectorQueryForCheckboxes:function(){return"input[id^\x3dqs-widget-checkbox-]"},getQsWidgetButtonContainerId:function(a){return"qs-widget-button-container-"+a},getQsWidgetButtonId:function(a){return"qs-widget-button-"+a},getQsWidgetDropdownContainerId:function(a){return"qs-widget-dropdown-container-"+a},getQsWidgetDropdownId:function(a){return"qs-widget-dropdown-"+a},getQsWidgetDropdownViewId:function(a){return"qs-widget-dropdown-view-"+a},getQsWidgetDropdownItemId:function(a,
b){return"qs-widget-dropdown-item-"+b+"-"+a},getQsWidgetDropdownItemAriaId:function(a,b){return"qs-widget-dropdown-item-aria-"+b+"-"+a},getQsWidgetDropdownItemQuantitySuffixId:function(a,b){return"qs-widget-dropdown-item-quantitySuffix-"+b+"-"+a},getQsWidgetDropdownUnorderedListId:function(a){return"qs-widget-dropdown-unorderedlist-"+a},getQsWidgetTextInputId:function(a){return"qs-widget-text-input-"+a},getQsWidgetTextInputContainerId:function(a){return"qs-widget-text-input-container-"+a},getQsWidgetTextInputUpdateButtonId:function(a){return"qs-widget-text-input-updatelink-"+
a},getQsWidgetTextInputUpdateButtonContainerId:function(a){return"qs-widget-text-input-updatelink-container-"+a},getQsWidgetTextInputUpdateButtonDecl:function(){return"qs-widget-text-input-updatelink-decl"},getQsWidgetTextInputDecl:function(){return"qs-widget-text-input-decl"},getQsWidgetQuantityContainerId:function(a){return"qs-widget-quantity-container-"+a},getQsWidgetQuantityId:function(a){return"qs-widget-quantity-"+a},getQsWidgetQuantitySuffixId:function(a){return"qs-widget-quantity-suffix-"+
a},getQsWidgetInitialViewSuffixId:function(a){return"qs-widget-initialView-suffix-"+a},getQsWidgetSummaryId:function(){return"qs-widget-summary-"},getQsWidgetSummaryPriceId:function(a){return"qs-widget-summary-price-"+a},getQsWidgetSummaryPriceSymbolId:function(a){return"qs-widget-summary-price-symbol-"+a},getQsWidgetSummaryPriceWholeId:function(a){return"qs-widget-summary-price-whole-"+a},getQsWidgetSummaryPriceFractionId:function(a){return"qs-widget-summary-price-fraction-"+a},getQsWidgetSummaryPriceDecimalId:function(a){return"qs-widget-summary-price-decimal-"+
a},getQsWidgetSummaryAtcId:function(a){return"qs-widget-summary-atc-"+a},getQsWidgetFooterPriceContainerId:function(a){return"qs-widget-footer-price-container-"+a},getQsWidgetFooterPriceSymbolId:function(a){return"qs-widget-footer-price-symbol-"+a},getQsWidgetFooterPriceWholeId:function(a){return"qs-widget-footer-price-whole-"+a},getQsWidgetFooterPriceFractionId:function(a){return"qs-widget-footer-price-fraction-"+a},getQsWidgetFooterPriceDecimalId:function(a){return"qs-widget-footer-price-decimal-"+
a},getQsWidgetFooterQuantitySuffixContainerId:function(a){return"qs-widget-footer-quantitySuffix-container-"+a},getQsWidgetFooterQuantitySuffixId:function(a){return"qs-widget-footer-quantitySuffix-"+a},getQsWidgetButtonDecl:function(){return"qs-widget-button-decl"},getQsWidgetSummaryAtcDecl:function(){return"qs-widget-summary-atc-decl"},getQsWidgetQuantityChangelinkId:function(a){return"qs-widget-quantity-changelink-"+a},getQsWidgetQuantityChangelinkDecl:function(){return"qs-widget-quantity-changelink-decl"},
getQsWidgetDropdownItemDecl:function(){return"qs-widget-dropdown-item-decl"},getQsWidgetDropdownDecl:function(){return"qs-widget-dropdown-decl"},getQsWidgetDropdownScrollMetricThreshold:function(){return 20},getQsWidgetBottomSheetId:function(a){return"qs-widget-bottom-sheet-"+a},getQsWidgetBottomSheetContainerId:function(a){return"qs-widget-bottom-sheet-container-"+a},getQsWidgetBottomSheetQuantitySuffixId:function(a){return"qs-widget-bottom-sheet-quantitySuffix-"+a},getQsWidgetBottomSheetHeightConfig:function(){return a},
getQsWidgetBottomSheetDropDownScrollFactor:function(){return b}}});"use strict";g.when("A","QuantitySelectorState","QuantitySelectorAUIDeps").register("QuantitySelectorMetadata",function(c,a,b){function f(c){return(c=a.getQsWidgetConfiguration(c).metadata)?b.aUtil.parseJSON(c):null}return{isWeblabEnabled:function(a,b,c){a:{if((a=f(a))&&a.weblabs)for(var d=0;d<a.weblabs.length;d++){var p=a.weblabs[d];if(p.weblabName==b){b=p.treatment;break a}}b=null}return null==b?c:"T1"==b?!0:!1},getMetaConfiguration:function(a,
b){return(a=f(a))?a[b]:null}}});"use strict";g.when("A").register("QuantitySelectorMetrics",function(c){function a(a){r.ue&&r.ue.count&&a&&ue.count(a,(ue.count(a)||0)+1)}return{incrementInitializeCount:function(b,c){var e="QuantitySelector-Initialize",e=b?e+"-Success-Count":e+"-Failed-Count";a(c?e+":mobile":e+":desktop")},incrementInvalidIdCount:function(){a("QuantitySelector-InvalidID")},incrementTriggerActionCount:function(b,c,e){b="QuantitySelector-TriggerAction-"+b;b=c?b+"-Success-Count":b+"-Failed-Count";
a(e?b+":mobile":b+":desktop")},incrementChangeLinkCount:function(){a("QuantitySelector-ChangeLink-Count")},incrementShowPopup:function(b){var c="QuantitySelector-ShowPopup-Count";a(b?c+":mobile":c+":desktop")},logLatencyMetric:function(a,c){},logCsm:function(a,c){}}});"use strict";g.when("A","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps").register("QuantitySelectorState",function(c,a,b,f){function e(d){var b=f.aState.state(a.getQsWidgetConfigurationId(d));b&&b.id||
(u(d),b=f.aState.state(a.getQsWidgetConfigurationId(d)));return b}function u(d){var b=a.getQsWidgetConfigurationId(d);d=a.getQsWidgetStateScriptSelectorQuery(d);d=c.$(d).first();d=f.aUtil.parseJSON(d.html());f.aState.state(b,d)}function g(){for(var d=[],b=c.$(a.getQsWidgetGenericStateSelectorQuery()),e=a.getQsWidgetConfigurationId(""),k=0;k<b.length;k++){var h=b[k].getAttribute("data-a-state");(h=f.aUtil.parseJSON(h).key)&&h.substring(0,e.length)==e&&(h=h.substring(e.length),d.push(h))}return d}c.on(a.getQsWidgetEventTriggerAction(),
function(d,p,q){var k=e(d),h=k.selectedId,m=k.selectedQuantity;p||(p=k.actionId);var t="mobile"==k.viewType.toLowerCase(),n=!1;if(h)for(var u=0;u<k.qsItems.length;u++)if(k.qsItems[u].id==h){var n=f.aUtil.parseJSON(k.staticData),g=f.aUtil.parseJSON(k.qsItems[u].data),n=c.$.extend({qsUID:d,tunneledData:q},n,g);c.trigger(a.getQsWidgetEventAction(p),n);b.incrementTriggerActionCount(p,!0,t);n=!0}m&&(n=f.aUtil.parseJSON(k.staticData),n=c.$.extend({qsUID:d,tunneledData:q},n,{quantity:m}),c.trigger(a.getQsWidgetEventAction(p),
n),b.incrementTriggerActionCount(p,!0,t),n=!0);n||b.incrementTriggerActionCount(p,!1,t)});c.on(a.getQsWidgetEventConfigureList(),function(a){"function"===typeof a&&a(g())});c.on(a.getQsWidgetEventConfigureGet(),function(a,b){a=e(a);"function"===typeof b&&b(a)});c.on(a.getQsWidgetEventConfigureSet(),function(d,b){f.aState.state.replace(a.getQsWidgetConfigurationId(d),b);c.trigger(a.getQsWidgetEventInitialize(),!0,d)});return{getQsWidgetConfiguration:e,loadQsWidgetStateConfiguration:u,saveOriginalSettings:function(d){var b=
a.getQsWidgetConfigurationId(d)+"-original",c=f.aState.state(b);c&&c.id||(d=e(d),f.aState.state(b,d))},loadOriginalSettings:function(d){var b=a.getQsWidgetConfigurationId(d)+"-original";(b=f.aState.state(b))&&b.id&&f.aState.state.replace(a.getQsWidgetConfigurationId(d),b)},setEnable:function(d,b){b={enable:b};f.aState.state(a.getQsWidgetConfigurationId(d),b)},setInitialized:function(b){f.aState.state(a.getQsWidgetConfigurationId(b),{initialized:!0})},setSelectedId:function(b,c){c={selectedId:c,selectedQuantity:null};
f.aState.state(a.getQsWidgetConfigurationId(b),c)},setSelectedQuantity:function(b,c){c={selectedId:null,selectedQuantity:c};f.aState.state(a.getQsWidgetConfigurationId(b),c)},setData:function(b,c){f.aState.state(a.getQsWidgetConfigurationId(b),c)},getQsUIDs:g}});"use strict";g.when("A","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorAUIDeps").register("QuantitySelectorUtils",function(c,a,b,f){function e(a){return"true"==a||1==a?!0:!1}function u(l){return"mobile"==a.getQsWidgetConfiguration(l).viewType.toLowerCase()?
!0:!1}function g(l){l=a.getQsWidgetConfiguration(l);return e(l.showConfirmationView)?!0:!1}function d(l){l=a.getQsWidgetConfiguration(l);return e(l.allowZeroQuantity)?!0:!1}function p(a){var d=c.$("#"+b.getQsWidgetQuantityChangelinkId(a));a=c.$("#"+b.getQsWidgetTextInputUpdateButtonId(a));d.attr("draggable","false");a.attr("draggable","false")}function q(a){return c.$("#"+b.getQsWidgetContainerId(a))}function k(a){return f.aButton("#"+b.getQsWidgetButtonId(a))}function h(a){return c.$("#"+b.getQsWidgetDropdownContainerId(a))}
function m(a){return c.$("#"+b.getQsWidgetDropdownViewId(a))}function t(a){return c.$("#"+b.getQsWidgetDropdownUnorderedListId(a))}function n(a){return c.$("#"+b.getQsWidgetTextInputId(a))}function w(l,b){l=a.getQsWidgetConfiguration(l);for(var d=0;d<l.qsItems.length;d++)if(l.qsItems[d].id==b)return l.qsItems[d]}function y(l){var b=a.getQsWidgetConfiguration(l).selectedId;return b?b:r(l)}function r(l){l=a.getQsWidgetConfiguration(l);if(l.qsItems)for(var b=0;b<l.qsItems.length;b++)if(e(l.qsItems[b].isSelected))return l.qsItems[b].id}
function z(l){return a.getQsWidgetConfiguration(l).selectedQuantity}function v(a,b){return(d(a)?/^(([0-9]\d{0,2}))$/:/^(([1-9]\d{0,2})|(0[1-9]\d?)|(00[1-9]))$/).test(b)}function A(a){if(a){var d=c.$("#"+b.getQsWidgetCheckboxId(a)),h=q(a);a=c.$("#"+b.getQsWidgetSpinnerId(a))}else d=c.$(b.getQsWidgetInputSelectorQueryForCheckboxes()),a=c.$(b.getQsWidgetDivSelectorQueryForSpinners()),h=c.$(b.getQsWidgetDivSelectorQueryForWidgetContainers());d.remove();a.removeClass("qs-widget-visible");a.addClass("qs-widget-hidden");
h.removeClass("qs-widget-hidden")}var x=[];return{isInitialized:function(l){return(l=a.getQsWidgetConfiguration(l))?l.initialized:!1},isMobile:u,isQsWidgetEnabled:function(l){l=a.getQsWidgetConfiguration(l);return l.hasOwnProperty("enable")?e(l.enable):!0},isConfirmationViewEnabled:g,isAllowZeroQuantityEnabled:d,isInitialViewDropdown:function(l){return a.getQsWidgetConfiguration(l).initialView.toLowerCase()==b.getQsWidgetInitialViewDropdown()?!0:!1},getQsWidgetBottomSheetConfig:function(l){var d=
a.getQsWidgetConfiguration(l),c=b.getQsWidgetBottomSheetHeightConfig(),h=0;d.summaryDisclaimerText||(h=g(l)?c.disclaimerTextAdjustmentWithAtc:c.disclaimerTextAdjustment);return g(l)?{closeMessage:d.bottomSheetCancelText,height:c.heightWithAtc-h}:{closeMessage:d.bottomSheetDoneText,height:c.height-h}},isActionTriggerOnConfirmation:function(l){return a.getQsWidgetConfiguration(l).actionTrigger.toLowerCase()==b.getQsWidgetActionTriggerOnConfirmation()?!0:!1},isActionTriggerOnSelect:function(l){return a.getQsWidgetConfiguration(l).actionTrigger.toLowerCase()==
b.getQsWidgetActionTriggerOnSelect()?!0:!1},isTextInputRequired:function(a,b){a=w(a,b).quantityText;return"+"==a.substr(a.length-1)?{result:!0,initialQuantityText:a.substr(0,a.length-1)}:{result:!1}},initializeWidget:function(a){var d=y(a);d?c.trigger(b.getQsWidgetEventSelectId(),a,d,!1,function(){p(a)}):(d=z(a))&&c.trigger(b.getQsWidgetEventSelectQuantity(),a,d,!1,function(){p(a)});A(a)},activateWidget:function(a){var d=x.indexOf(a);-1<d&&x.splice(d,1);setTimeout(function(){x.push(a)},b.getQsWidgetActivateDebounce())},
deactivateWidget:function(a){a=x.indexOf(a);-1<a&&x.splice(a,1)},getActivatedQsWidgets:function(){return x},hideComponent:function(a,b){a.addClass("aok-hidden")},showComponent:function(a){a.removeClass("aok-hidden")},isComponentVisible:function(a){return!a.hasClass("aok-hidden")},setComponentVisibility:function(a,b){b?a.css("visibility","visible"):a.css("visibility","hidden")},setHtml:function(a,b){a.html(b)},setQsWidgetContainerMinWidthAndHeight:function(a){a=q(a);a.css("min-width",a.width()+"px");
a.css("min-height",a.height()+"px")},resetQsWidgetContainerMinWidthAndHeight:function(a){a=q(a);a.css("min-width","0px");a.css("min-height","0px")},enableQsWidget:function(b){var d=k(b),c=n(b);d.enable();c.removeClass("a-form-disabled");c.addClass("a-form-normal");c.removeAttr("disabled");a.setEnable(b,!0)},disableQsWidget:function(b){var d=k(b),c=n(b);d.disable();c.removeClass("a-form-normal");c.addClass("a-form-disabled");c.attr("disabled","disabled");a.setEnable(b,!1)},popOutDropDownContainer:function(a){var b=
q(a).offset();a=h(a);a.appendTo(document.body);a.css({left:b.left,top:b.top})},getQsWidgetButtonContainer:function(a){return c.$("#"+b.getQsWidgetButtonContainerId(a))},getQsWidgetButtonAsComponent:k,getQsWidgetButton:function(a){return c.$("#"+b.getQsWidgetButtonId(a)+"-announce")},getQsWidgetDropdownContainer:h,getQsWidgetDropdownElement:function(a){return c.$("#"+b.getQsWidgetDropdownId(a))},getQsWidgetDropdownViewSelector:m,getQsWidgetDropdownUnorderedListElement:t,getQsWidgetDropdownItemElement:function(a,
d){return c.$("#"+b.getQsWidgetDropdownItemAriaId(a,d))},getQsWidgetTextInputContainer:function(a){return c.$("#"+b.getQsWidgetTextInputContainerId(a))},getQsWidgetTextInputElement:n,getQsWidgetTextInputUpdateButtonContainer:function(a){return c.$("#"+b.getQsWidgetTextInputUpdateButtonContainerId(a))},getQsWidgetQuantityContainer:function(a){return c.$("#"+b.getQsWidgetQuantityContainerId(a))},getQsWidgetQuantityElement:function(a){return c.$("#"+b.getQsWidgetQuantityId(a))},getQsWidgetQuantitySuffixElement:function(a){return c.$("#"+
b.getQsWidgetQuantitySuffixId(a))},getQsWidgetInitialViewSuffixElement:function(a){return c.$("#"+b.getQsWidgetInitialViewSuffixId(a))},getQsWidgetSummaryAtcButton:function(a){return c.$("#"+b.getQsWidgetSummaryAtcId(a))},getQsWidgetSummaryContainer:function(a){return c.$("#"+b.getQsWidgetSummaryPriceId(a))},getQsWidgetSummaryPriceSymbolElement:function(a){return c.$("#"+b.getQsWidgetSummaryPriceSymbolId(a))},getQsWidgetSummaryPriceWholeElement:function(a){return c.$("#"+b.getQsWidgetSummaryPriceWholeId(a))},
getQsWidgetSummaryPriceFractionElement:function(a){return c.$("#"+b.getQsWidgetSummaryPriceFractionId(a))},getQsWidgetSummaryPriceDecimalElement:function(a){return c.$("#"+b.getQsWidgetSummaryPriceDecimalId(a))},getQsWidgetFooterPriceContainer:function(a){return c.$("#"+b.getQsWidgetFooterPriceContainerId(a))},getQsWidgetFooterPriceSymbolElement:function(a){return c.$("#"+b.getQsWidgetFooterPriceSymbolId(a))},getQsWidgetFooterPriceWholeElement:function(a){return c.$("#"+b.getQsWidgetFooterPriceWholeId(a))},
getQsWidgetFooterPriceFractionElement:function(a){return c.$("#"+b.getQsWidgetFooterPriceFractionId(a))},getQsWidgetFooterPriceDecimalElement:function(a){return c.$("#"+b.getQsWidgetFooterPriceDecimalId(a))},getQsWidgetFooterQuantitySuffixContainer:function(a){return c.$("#"+b.getQsWidgetFooterQuantitySuffixContainerId(a))},getQsWidgetFooterQuantitySuffixElement:function(a){return c.$("#"+b.getQsWidgetFooterQuantitySuffixId(a))},getQsWidgetBottomSheetQuantitySuffixElement:function(a){return c.$("#"+
b.getQsWidgetBottomSheetQuantitySuffixId(a))},getQsItem:w,getSelectedQsItemId:y,getInitialSelectedQsItemId:r,getSelectedQuantity:z,getQsItemFromQuantityText:function(b,d){b=a.getQsWidgetConfiguration(b).qsItems;if(!b)return null;for(var c=0;c<b.length;c++)if(d.toLowerCase()==b[c].quantityText.toLowerCase()||parseFloat(d)==parseFloat(b[c].quantityText))return b[c]},getFocusedQsItemIdInBottomSheet:function(d){var c=m(d).scrollTop(),h=b.getQsWidgetBottomSheetDropDownScrollFactor();c=parseInt((c-h.constant+
h.adjustment)/h.increment);d=a.getQsWidgetConfiguration(d).qsItems;d=0>c?d[0].id:c>=d.length?d[d.length-1].id:d[c].id;return d},getIndexFromIdInBottomSheet:function(b,d){b=a.getQsWidgetConfiguration(b).qsItems;if(!b)return 0;for(var c=0;c<b.length;c++)if(d==b[c].id)return c},saveQsWidgetDropdownTopPosition:function(b){var d=t(b);d&&(d=d.position().top,a.setData(b,{scrollTop:d}));return!1},setQsWidgetDropdownScrolled:function(b){a.setData(b,{scrollTop:-65536})},clearQsWidgetDropdownScrolled:function(d){a.setData(d,
{scrollTop:b.getQsWidgetDropdownScrollMetricThreshold()})},isQsWidgetDropdownScrolled:function(d){var c=t(d);return c?(c=c.position().top,(d=a.getQsWidgetConfiguration(d).scrollTop)?Math.abs(c-d)>b.getQsWidgetDropdownScrollMetricThreshold():!1):!1},generateQsDropdownDOM:function(d){var c="",h=a.getQsWidgetConfiguration(d),m=h.qsItems,h=h.selectedId,k=u(d);if(!m)return"";for(var f=0;f<m.length;f++){var e,p=m[f].id,t=m[f].quantityText;if(k){e=d;var q=b.getQsWidgetDropdownItemId(e,p),n=b.getQsWidgetDropdownItemAriaId(e,
p),g=b.getQsWidgetDropdownItemDecl();e='\x3cspan class\x3d"a-declarative" data-action\x3d"'+g+'" data-'+g+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+e+"\x26quot;,\x26quot;id\x26quot;:"+p+'}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+q+'" aria-labelledby\x3d"'+n+'" class\x3d"qs-widget-dropdown-li"\x3e'+t+"\x3c/li\x3e\x3c/span\x3e"}else{e=d;var w=m[f].quantityTextAbbreviatedSuffix,q=m[f].id==h,n=b.getQsWidgetDropdownItemId(e,p),g=b.getQsWidgetDropdownItemAriaId(e,p),r=b.getQsWidgetDropdownItemQuantitySuffixId(e,
p),y=b.getQsWidgetDropdownDecl(e),v="";w&&(v='\x3cspan id\x3d"'+r+'" class\x3d"a-size-mini a-color-tertiary"\x3e'+w+"\x3c/span\x3e");w="false";r="qs-widget-dropdown-link";q&&(w="true",r+=" qs-widget-dropdown-link-active aok-block aok-nowrap");e='\x3cspan class\x3d"a-declarative" data-action\x3d"'+y+'" data-'+y+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+e+"\x26quot;,\x26quot;id\x26quot;:"+p+'}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+n+'" aria-labelledby\x3d"'+g+'" aria-checked\x3d"'+w+
'" class\x3d"qs-widget-dropdown-item"\x3e\x3ca tabindex\x3d"0" href\x3d"javascript:void(0)" draggable\x3d"false" id\x3d"'+g+'" class\x3d"'+r+'"\x3e'+t+"\x26nbsp;\x26nbsp;"+v+"\x3c/a\x3e\x3c/li\x3e\x3c/span\x3e"}c+=e}return c},isQsWidgetTextInputValid:v,validateQsWidgetTextInput:function(a){var d=n(a),c=d.val();a=v(a,c);var h=d.parent().hasClass(b.getQsWidgetAuiInputTextWrapperClass())?d.parent():d;if(a)return d.val(c.replace(/^0{2,}$/,"0").replace(/^0+(\d+)/g,"$1")),h.removeClass("a-form-error"),
h.addClass("a-form-normal"),!0;h.removeClass("a-form-normal");h.addClass("a-form-error");return!1},isUserClickInSummary:function(a){var d=b.getQsWidgetSummaryId();for(a=null==a?null:a.target;null!=a;){if(a.id.substring(0,d.length)==d)return!0;a=a.parentElement}return!1},hideSpinner:A}});"use strict";g.when("A","QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants").register("QuantitySelectorWidget",function(c,a,b,f){function e(d){a.deactivateWidget(d);var b=a.getQsWidgetButtonContainer(d),
c=a.getQsWidgetDropdownContainer(d),e=a.getQsWidgetDropdownElement(d),h=a.getQsWidgetQuantityContainer(d),m=a.getQsWidgetSummaryAtcButton(d),f=a.getQsWidgetFooterPriceContainer(d),n=a.getQsWidgetFooterQuantitySuffixContainer(d);a.setComponentVisibility(f,!0);a.setComponentVisibility(n,!0);f=a.getQsWidgetTextInputContainer(d);a.isComponentVisible(f)||a.showComponent(b);a.hideComponent(c);a.hideComponent(e);a.hideComponent(h);a.hideComponent(m);a.resetQsWidgetContainerMinWidthAndHeight(d)}function g(d,
e,q){var k=a.getQsItem(d,e),h=k.quantityText,m=k.quantityTextAbbreviatedSuffix,t=k.quantityTextFullSuffix,n=k.selectedText,k=k.price,u=a.getQsWidgetSummaryPriceSymbolElement(d),r=a.getQsWidgetSummaryPriceWholeElement(d),v=a.getQsWidgetSummaryPriceFractionElement(d),z=a.getQsWidgetSummaryPriceDecimalElement(d);a.setHtml(u,k.currencySymbol);a.setHtml(r,k.wholeValue);a.setHtml(v,k.fractionValue);a.setHtml(z,k.decimalSeparator);u=a.getQsWidgetQuantityElement(d);a.setHtml(u,h);h=a.getQsWidgetQuantitySuffixElement(d);
m&&t?(a.setHtml(h,m),m=a.getQsWidgetInitialViewSuffixElement(d),a.setHtml(m,t)):a.setHtml(h,"");m=a.getQsWidgetFooterPriceSymbolElement(d);h=a.getQsWidgetFooterPriceWholeElement(d);u=a.getQsWidgetFooterPriceFractionElement(d);r=a.getQsWidgetFooterPriceDecimalElement(d);a.setHtml(m,k.currencySymbol);a.setHtml(h,k.wholeValue);a.setHtml(u,k.fractionValue);a.setHtml(r,k.decimalSeparator);t&&(k=a.getQsWidgetFooterQuantitySuffixElement(d),a.setHtml(k,t));a.isInitialViewDropdown(d)&&(a.getQsWidgetButtonAsComponent(d).text(n),
t="Current quantity "+n+". Click to change quantity",a.getQsWidgetButton(d).attr("aria-label",t));b.setSelectedId(d,e);q&&c.trigger(f.getQsWidgetEventTriggerAction(),d)}function r(d,e){var q=a.getQsWidgetTextInputElement(d),k=q.val(),h=a.getQsWidgetButtonContainer(d),m=a.getQsWidgetTextInputContainer(d),t=a.getQsWidgetTextInputUpdateButtonContainer(d),n=a.getQsItemFromQuantityText(d,k);a.hideComponent(t);n?(a.hideComponent(m),a.showComponent(h),g(d,n.id,e)):(a.hideComponent(h),a.showComponent(m),
q.blur(),b.setSelectedQuantity(d,k),e&&c.trigger(f.getQsWidgetEventTriggerAction(),d))}c.on(f.getQsWidgetEventSelectId(),function(d,b,c,e){g(d,b,c);b=a.getQsWidgetButtonContainer(d);c=a.getQsWidgetTextInputContainer(d);d=a.getQsWidgetTextInputUpdateButtonContainer(d);a.hideComponent(d);a.hideComponent(c);a.showComponent(b);e&&e()});c.on(f.getQsWidgetEventSelectQuantity(),function(b,c,e,f){a.getQsWidgetTextInputElement(b).val(c);r(b,e);f&&f()});return{hideAllPopover:function(){for(var b=a.getActivatedQsWidgets(),
c=0;c<b.length;c++)e(b[c])},showPopover:function(d){a.activateWidget(d);a.setQsWidgetContainerMinWidthAndHeight(d);var c=a.getQsWidgetDropdownUnorderedListElement(d),e=a.getQsWidgetButtonContainer(d),f=a.getQsWidgetDropdownContainer(d),h=a.getQsWidgetDropdownElement(d),m=a.getQsWidgetQuantityContainer(d),t=a.getQsWidgetSummaryAtcButton(d);a.setHtml(c,a.generateQsDropdownDOM(d));var c=a.getQsWidgetFooterPriceContainer(d),n=a.getQsWidgetFooterQuantitySuffixContainer(d);a.setComponentVisibility(c,!1);
a.setComponentVisibility(n,!1);a.showComponent(h);a.hideComponent(m);a.hideComponent(t);a.showComponent(f);a.hideComponent(e);a.popOutDropDownContainer(d);f=b.getQsWidgetConfiguration(d);if(e=f.qsItems)f=f.selectedId,null===f&&(f=e[0].id),a.getQsWidgetDropdownItemElement(d,f).focus()},showConfirmation:function(b){a.activateWidget(b);var c=a.getQsWidgetButtonContainer(b),e=a.getQsWidgetDropdownContainer(b),f=a.getQsWidgetDropdownElement(b),h=a.getQsWidgetQuantityContainer(b);b=a.getQsWidgetSummaryAtcButton(b);
a.hideComponent(f);a.showComponent(h);a.showComponent(b);a.showComponent(e);a.hideComponent(c)},showPrice:function(b,c){c=a.getQsItem(b,c).price;var e=a.getQsWidgetSummaryPriceSymbolElement(b),f=a.getQsWidgetSummaryPriceWholeElement(b),h=a.getQsWidgetSummaryPriceFractionElement(b);b=a.getQsWidgetSummaryPriceDecimalElement(b);a.setHtml(e,c.currencySymbol);a.setHtml(f,c.wholeValue);a.setHtml(h,c.fractionValue);a.setHtml(b,c.decimalSeparator)},selectOption:g,showTextInput:function(b,c){var e=a.getQsWidgetTextInputContainer(b),
f=a.getQsWidgetTextInputUpdateButtonContainer(b),h=a.getQsWidgetButtonContainer(b);a.hideComponent(h);a.showComponent(e);var m=a.getQsWidgetTextInputElement(b);c&&m.val(c);c=m.val();a.isQsWidgetTextInputValid(b,c)&&a.getSelectedQuantity(b)!==c?a.showComponent(f):a.hideComponent(f);setTimeout(function(){m.focus()},200)},validateAndSelectQuantity:r,selectConfirmation:function(b){a.isActionTriggerOnConfirmation(b)&&c.trigger(f.getQsWidgetEventTriggerAction(),b);e(b)}}});"use strict";g.when("A","QuantitySelectorWidget",
"QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps","QuantitySelectorMetadata").register("QuantitySelector",function(c,a,b,f,e,g,v,d){function p(a,c){try{var e=b.isMobile(c)}catch(k){k instanceof TypeError&&g.incrementInvalidIdCount();return}try{if(!b.isInitialized(c)||a)eval(d.getMetaConfiguration(c,"script")),f.setInitialized(c),f.saveOriginalSettings(c),b.initializeWidget(c),b.isQsWidgetEnabled(c)?b.enableQsWidget(c):b.disableQsWidget(c),
g.incrementInitializeCount(!0,e)}catch(k){g.incrementInitializeCount(!1,e)}}function q(a){f.loadQsWidgetStateConfiguration(a);p(!0,a)}c.declarative(e.getQsWidgetButtonDecl(),"click",function(c){var d=c.data.qsUID;(c=b.isMobile(d))?a.showBottomSheet(d):a.showPopover(d);g.incrementShowPopup(c);b.isInitialViewDropdown(d)?g.logCsm(d,"cqd"):g.logCsm(d,"ccq");setTimeout(function(){b.saveQsWidgetDropdownTopPosition(d)},250)});c.declarative(e.getQsWidgetDropdownDecl(),"click",function(c){var d=c.data.qsUID;
c=c.data.id;var e=b.isActionTriggerOnSelect(d),f=b.isTextInputRequired(d,c),k=b.isConfirmationViewEnabled(d),p=b.isQsWidgetDropdownScrolled(d);k?p?(b.setQsWidgetDropdownScrolled(d),g.logCsm(d,"dcq_scl")):(b.clearQsWidgetDropdownScrolled(d),g.logCsm(d,"dcq")):p?g.logCsm(d,"dsq_scl"):g.logCsm(d,"dsq");a.selectOption(d,c,e&&!f.result);f.result?a.showTextInput(d,f.initialQuantityText):k&&a.showConfirmation(d)});c.declarative(e.getQsWidgetDropdownItemDecl(),"click",function(b){a.alignQsItem(b.data.qsUID,
b.data.id)});c.declarative(e.getQsWidgetDropdownDecl(),"focusin",function(b){a.showPrice(b.data.qsUID,b.data.id)});c.declarative(e.getQsWidgetDropdownDecl(),"mouseenter",function(b){a.showPrice(b.data.qsUID,b.data.id)});c.declarative(e.getQsWidgetDropdownDecl(),"mouseleave",function(b){b=b.data.qsUID;var c=f.getQsWidgetConfiguration(b).selectedId;a.showPrice(b,c)});c.declarative(e.getQsWidgetQuantityChangelinkDecl(),"click",function(c){c=c.data.qsUID;a.showPopover(c);g.incrementChangeLinkCount();
b.saveQsWidgetDropdownTopPosition(c);g.logCsm(c,"ccl")});c.declarative(e.getQsWidgetSummaryAtcDecl(),"click",function(c){c=c.data.qsUID;a.selectConfirmation(c);b.isQsWidgetDropdownScrolled(c)?g.logCsm(c,"atc_scl"):g.logCsm(c,"atc")});c.declarative(e.getQsWidgetTextInputDecl(),"keydown",function(a){var c=a.data.qsUID,d=a.$event.which;8==d||9==d||13==d||37<=d&&40>=d||46==d||(!(48<=d&&57>=d||96<=d&&105>=d)||a.$event.shiftKey||a.$event.altKey||a.$event.ctrlKey||a.$event.metaKey?a.$event.preventDefault():
3<=b.getQsWidgetTextInputElement(c).val().length&&a.$event.preventDefault())});c.declarative(e.getQsWidgetTextInputDecl(),"keyup",function(c){var d=c.data.qsUID;b.validateQsWidgetTextInput(d)&&13==c.$event.keyCode?(c=b.isActionTriggerOnSelect(d),a.validateAndSelectQuantity(d,c)):a.showTextInput(d)});c.declarative(e.getQsWidgetTextInputDecl(),"focusout",function(c){c=c.data.qsUID;if(""===b.getQsWidgetTextInputElement(c).val()){var d;d=(d=f.getQsWidgetConfiguration(c).selectedId)?b.getQsItem(c,d).selectedText:
b.getSelectedQuantity(c);a.showTextInput(c,d);b.validateQsWidgetTextInput(c)}});c.declarative(e.getQsWidgetTextInputDecl(),"change",function(b){a.showTextInput(b.data.qsUID)});c.declarative(e.getQsWidgetTextInputUpdateButtonDecl(),"click",function(c){var d=c.data.qsUID;b.validateQsWidgetTextInput(d)&&(d=c.data.qsUID,c=b.isActionTriggerOnSelect(d),a.validateAndSelectQuantity(d,c))});c.$(document).click(function(c){0!=b.getActivatedQsWidgets().length&&(b.isUserClickInSummary(c)||a.hideAllPopover())});
c.$(r).resize(function(){a.hideAllPopover()});c.on(e.getQsWidgetEventInitialize(),function(a,b){v.initialize();if("string"==typeof b)p(a,b);else{b=f.getQsUIDs();for(var c=0;c<b.length;c++)p(a,b[c])}});c.on(e.getQsWidgetEventLoadStatesAndInitialize(),function(){for(var a=f.getQsUIDs(),c=0;c<a.length;c++){var d=a[c];b.isInitialized(d)||q(d)}});c.on(e.getQsWidgetEventConfigureEnable(),function(a){b.enableQsWidget(a)});c.on(e.getQsWidgetEventConfigureDisable(),function(a){b.disableQsWidget(a)});c.on(e.getQsWidgetEventConfigureReset(),
function(a){for(var b=f.getQsUIDs(),d=0;d<b.length;d++){var g=b[d];if("string"!==typeof a||a==g)f.loadOriginalSettings(g),c.trigger(e.getQsWidgetEventInitialize(),!0,g)}});var k=c.now();g.logLatencyMetric("JSReady",k);return{loadStateAndInitializeWidget:q}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("ConsumablesATCActionAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(l){var p=window.AmazonUIPageJS||window.P,u=p._namespace||p.attributeErrors,a=u?u("QuantitySliderAssets",""):p;a.guardFatal?a.guardFatal(l)(a,window):a.execute(function(){l(a,window)})})(function(l,p,u){l.when("A").register("qs-cart-count-handler",function(a){var d=a.$,f={DEFAULT:function(g,e,b,h,f){a.post("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:g,clientName:e},success:function(a){a&&a.isOK&&a.total?d.isFunction(h)&&h(a.total.numActiveItem):l.log("Malformed get-cart-count response for sessionId\x3d"+
g,"ERROR",b)},error:function(){l.log("Failed to retrieve get-cart-count response for sessionId\x3d"+g,"ERROR",b);d.isFunction(f)&&f()}})},UFG:function(d,a,b,h,f){}};return{getTotalCartCount:function(a,e){return(d.isFunction(f[e])?f[e]:f.DEFAULT)(a.request.sessionId,a.clientName,a.attribution,a.onSuccess,a.onError)}}});"use strict";l.when("A","quantity-slider-utils","qs-cart-update-utils").register("qs-cart-update-handler",function(a,d,f){function g(a){n||(n="quantity-slider-widget-"+a);return n}function e(a,
h){if(!h.atcFormSubmitDisabled){if((a=a.$target&&a.$target.closest(".qs-atc-form"))&&0!==a.length)return a;l.log("Missing $form object","ERROR",g(h.clientName))}}function b(b,r,f){a.trigger(d.ACTIONS.ADD_TO_CART_SUBMIT_START,{asin:b,cartType:r.cartType,clientName:r.clientName,isQSAction:f,request:r});h(b,r,!0,f)}function h(h,b,e,c){var q=b.cartType,n=JSON.stringify(c?f.getQSRequestObject(b,e,q):f.getATCRequestObject(b,q)),m=f.getAjaxUrl(b,e,q);m&&k.ajax({url:m,type:f.getHttpMethodType(e,q),data:n,
headers:f.getHeadersForRequest(b,e,q),xhrFields:{withCredentials:!0},success:function(m,q,k){m.jqXHR=k;delete t[h];(m=f.adaptResponseObject(m,b,e,b.cartType))?(d.setUpdatedQSParamsForAsin(h,{quantityInCart:m.quantity,cartItemId:m.itemId}),a.trigger(e?d.ACTIONS.ADD_TO_CART_SUBMIT_SUCCESS:d.ACTIONS.REMOVE_FROM_CART_SUBMIT_SUCCESS,{asin:h,cartType:b.cartType,request:b,response:m,clientName:b.clientName,attribution:g(b.clientName),isQSAction:c,isDecreaseQuantityAction:!e}),d.logUrl(b.loggingUrl)):l.log("Invalid Response from the server",
"ERROR",g(b.clientName))},error:function(m){delete t[h];m=m||{};l.log("Ajax request failed with type: "+(e?"addItems":"modifyItems")+", status code: "+m.status+", error: "+m.responseText,"ERROR",g(b.clientName));a.trigger(d.ACTIONS.QS_CART_SUBMIT_ERROR,{asin:h,cartType:q,clientName:b.clientName,isQSAction:c,isDecreaseQuantityAction:!e,isMaxOrderQuantityReached:b.quantityInCart>=b.maxOrderQuantity,response:m,request:b});e&&b.$form&&b.$form.submit()}})}var k=a.$,n="",t={};a.declarative("qs-add-to-cart-trigger",
"click",function(a){var h=a.data&&a.data.asin,f=d.getQSParamsForAsin(h);a.$event&&a.$event.preventDefault();t[h]||(t[h]=!0,f.isMultipleAsinsSubmitting=1<Object.keys(t).length,f.$form=e(a,f),f.triggeringEvent=a,b(h,f,!1))});a.declarative("qs-slider-widget-trigger","click",function(f){var g=f.data&&f.data.asin,k=d.getQSParamsForAsin(g),c=f.$target[0]&&f.$target[0].className||"",q=a.contains(c,"qs-increase-quantity")||a.contains(c,"qs-decrease-quantity"),c=a.contains(c,"qs-decrease-quantity");f.$event&&
f.$event.preventDefault();q&&!t[g]&&(t[g]=!0,k.isMultipleAsinsSubmitting=1<Object.keys(t).length,k.triggeringEvent=f,c?(a.trigger(d.ACTIONS.REMOVE_FROM_CART_SUBMIT_START,{asin:g,cartType:k.cartType,clientName:k.clientName,isQSAction:!0,isDecreaseQuantityAction:!0,request:k}),h(g,k,!1,!0)):(k.$form=e(f,k),b(g,k,!0)))});return{setAttribution:function(b){n=b}}});"use strict";l.when("A","qs-fresh-cart-update-utils").register("qs-cart-update-utils",function(a,d){function f(c){var b=c.quantityInCart||0;
return{items:[{asin:c.asinId,offerListingId:c.offerListingId,quantity:b<c.minOrderQuantity?c.minOrderQuantity-b:1}]}}function g(c,b,a){return(e.isFunction(b[a])?b[a]:b.DEFAULT)(c)}var e=a.$,b={DEFAULT:f,UFG:d.getUfgCartRequestObject},h={DEFAULT:f,UFG:d.getUfgCartRequestObject},k={DEFAULT:function(c){var b=c.quantityInCart||0,a;a=c.cartItemId;a=!a||"C"!==a[0]&&"S"!==a[0]?a:a.substring(1);return{items:[{id:a,quantity:b<=c.minOrderQuantity?0:b-1}]}},UFG:d.getUfgCartRequestObject},n={DEFAULT:function(c){return c.ajaxCartUrl},
UFG:function(c){return c.addToCartUrl}},l={DEFAULT:function(c){return c.ajaxCartUrl}},p={DEFAULT:function(c){return(c=c.entity&&c.entity.items&&c.entity.items[0])?{itemId:c.id,quantity:c.quantity,isTotal:!0}:null},UFG:d.ufgCartResponseAdapter},r={DEFAULT:function(c,b){c=(b.quantityInCart||0)-1;return 0>c?null:{itemId:c?b.cartItemId:"",quantity:c,isTotal:!0}},UFG:d.ufgCartResponseAdapter},u={DEFAULT:"POST",UFG:"POST"},c={DEFAULT:"PUT",UFG:"POST"},q={DEFAULT:function(c){return{"x-api-csrf-token":c.csrfToken,
Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"'}},UFG:function(c){return{"Content-Type":"application/json"}}},w={DEFAULT:function(c){return{"x-api-csrf-token":c.csrfToken,Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.modify-items/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.modify-items.request/v1"'}},UFG:function(c){return{"Content-Type":"application/json"}}};
return{getATCRequestObject:function(c,a){return g(c,b,a)},getQSRequestObject:function(c,b,a){return g(c,b?h:k,a)},adaptResponseObject:function(c,b,a,h){a=a?p:r;return(e.isFunction(a[h])?a[h]:a.DEFAULT)(c,b)},getHttpMethodType:function(b,a){b=b?u:c;return b[a]?b[a]:b.DEFAULT},getHeadersForRequest:function(c,b,a){b=b?q:w;return(e.isFunction(b[a])?b[a]:b.DEFAULT)(c)},getAjaxUrl:function(c,b,a){return g(c,b?n:l,a)}}});"use strict";l.when("A").register("qs-fresh-cart-update-utils",function(a){function d(a,
d){return d&&d.items?d.items.find(function(d){return d.ASIN===a}):null}return{getUfgCartRequestObject:function(a){return a.additionalInput},ufgCartResponseAdapter:function(a,g){return(g=d(g.asinId,a.clientResponseModel))?{itemId:g.itemId,quantity:g.quantity,isTotal:!0,rawResponse:a}:{itemId:"invalidItemId",quantity:0,isTotal:!0,rawResponse:a}}}});"use strict";l.when("A","quantity-slider-utils").register("quantity-slider-metrics-handler",function(a,d){function f(a,b){return"QuantitySliderWidget::"+
a+"::"+(b?b+"::":"")}function g(b){var a=p.ue;"undefined"!==typeof a&&a.count(b,1)}function e(a,e){d.assert(a&&e.clientName,"Missing required properties while logging metrics");var n=e.isQSAction?e.isDecreaseQuantityAction?b.QS_DECREASE:b.QS_INCREASE:b.ATC;a=f(e.clientName,e.cartType)+a+"::"+n;g(a)}var b={ATC:"ATC",QS_INCREASE:"QSIncrease",QS_DECREASE:"QSDecrease"};return{logRequestStartMetrics:function(a){e("CountStart",a)},logRequestSuccessMetrics:function(a){e("CountSuccess",a)},logRequestErrorMetrics:function(a){e("CountError",
a)},logMaxQuantityReachedMetric:function(a){a=f(a.clientName,a.cartType)+"MaxQuantityReached";g(a)},logMultipleAsinsSubmittingMetric:function(a){a=f(a.clientName,a.cartType)+"MultipleAsinsSubmitting";g(a)}}});"use strict";l.when("A","quantity-slider-utils","qs-cart-update-handler","quantity-slider-metrics-handler").register("quantity-slider-widget",function(a,d,f,g){function e(c){return"."+c+"-qs-slider-button"}function b(c,a){c=e(c)+" .qs-decrease-quantity";a?d.disableButton(c):d.enableButton(c)}
function h(c,a){c=e(c)+" .qs-increase-quantity";a?d.disableButton(c):d.enableButton(c)}function k(c,a){c="."+c+"-qs-add-to-cart-button .qs-slider-atc-button";a?d.disableButton(c):d.enableButton(c)}function n(c){c.isQSAction&&(c.isDecreaseQuantityAction?d.deselectButton(e(c.asin)+" .qs-decrease-quantity"):d.deselectButton(e(c.asin)+" .qs-increase-quantity"))}function l(c){d.toggleDomNodeVisibility("."+c.asin+"-qs-slider-spinner",!1);var a=c.asin;c.isQSAction?(b(a,!1),h(a,!1)):k(a,!1);n(c);d.assert(c.asin&&
c.request&&c.response&&c.response.quantity!==u,"Required properties missing in payload object for UpdateQSWidget");r(c.asin,c.response.quantity,c.request.maxOrderQuantity);c.request.enableQuantityLimitMessage&&d.toggleDomNodeVisibility("."+c.asin+"-qs-quantity-limit-message",c.response.quantity>=c.request.maxOrderQuantity);d.updateTotalCartCountOnUI(c,c.cartType);g.logRequestSuccessMetrics(c)}function p(a){d.toggleDomNodeVisibility("."+a.asin+"-qs-slider-spinner",!0);var e=a.asin;a.isQSAction?(b(e,
!0),h(e,!0)):k(e,!0);g.logRequestStartMetrics(a);a.request&&a.request.isMultipleAsinsSubmitting&&g.logMultipleAsinsSubmittingMetric(a)}function r(a,b,f){var g="."+a+"-qs-add-to-cart-button",k=e(a);0<b?(d.changeATCtoQS(g,k),g=v("."+a+"-qs-qty-present-in-cart"),Number.isInteger(b)&&g.html(b),h(a,b>=f)):(d.changeQStoATC(g,k),h(a,!1))}var v=a.$;Number.isInteger||(Number.isInteger=function(a){return"number"===typeof a&&isFinite(a)&&-9007199254740992<a&&9007199254740992>a&&Math.floor(a)===a});a.on(d.ACTIONS.ADD_TO_CART_SUBMIT_START,
function(a){p(a)});a.on(d.ACTIONS.ADD_TO_CART_SUBMIT_SUCCESS,function(a){setTimeout(function(){l(a)},1500);a.response.quantity===a.request.maxOrderQuantity&&g.logMaxQuantityReachedMetric(a)});a.on(d.ACTIONS.REMOVE_FROM_CART_SUBMIT_START,function(a){p(a)});a.on(d.ACTIONS.REMOVE_FROM_CART_SUBMIT_SUCCESS,function(a){setTimeout(function(){l(a)},1500)});a.on(d.ACTIONS.QS_CART_SUBMIT_ERROR,function(a){d.toggleDomNodeVisibility("."+a.asin+"-qs-slider-spinner",!1);if(a.isQSAction&&a.isMaxOrderQuantityReached)b(a.asin,
!1);else{var e=a.asin;a.isQSAction?(b(e,!1),h(e,!1)):k(e,!1)}n(a);g.logRequestErrorMetrics(a)});return{ACTIONS:d.ACTIONS,CART_IDEMPOTENT_REQUEST_DELAY:1500,setAttribution:f.setAttribution,updateQuantitySliderWidget:r}});"use strict";l.when("A","qs-cart-count-handler","a-button").register("quantity-slider-utils",function(a,d,f){function g(a){return e("."+a+"-qs-slider-data").first().data("qs-model")}var e=a.$;return{ACTIONS:{ADD_TO_CART_SUBMIT_START:"quantity-slider:add-to-cart-start",ADD_TO_CART_SUBMIT_SUCCESS:"quantity-slider:add-to-cart-success",
REMOVE_FROM_CART_SUBMIT_START:"quantity-slider:remove-from-cart-start",REMOVE_FROM_CART_SUBMIT_SUCCESS:"quantity-slider:remove-from-cart-success",QS_CART_SUBMIT_ERROR:"quantity-slider:cart-submit-error"},assert:function(a,d){if(!a)throw Error(d);},changeATCtoQS:function(b,d){e(b).hasClass("aok-hidden")||(a.hide(b),a.show(d))},changeQStoATC:function(b,d){e(d).hasClass("aok-hidden")||(a.hide(d),a.show(b))},disableButton:function(a){f(e(a)).disable()},deselectButton:function(a){a=f(e(a));a.isEnabled()&&
a.setStatus("normal")},enableButton:function(a){f(e(a)).enable()},getQSParamsForAsin:g,setUpdatedQSParamsForAsin:function(b,d){var f=g(b);e("."+b+"-qs-slider-data").data(a.extend(f,d))},toggleDomNodeVisibility:function(b,d){d?a.show(b):a.hide(b)},updateTotalCartCountOnUI:function(b,f){b=a.extend({},b);b.onSuccess=function(a){p.$Nav&&p.$Nav.when("api.setCartCount").run(function(b){b(a)});l.when("mash").execute("quantity-slider-mash-update",function(b){b.cart&&e.isFunction(b.cart.didUpdate)&&b.cart.didUpdate({newCartQuantity:a})})};
d.getTotalCartCount(b,f)},logUrl:function(b){b&&a.post(b)}}})});
/* ******** */
(function(d){var f=window.AmazonUIPageJS||window.P,r=f._namespace||f.attributeErrors,b=r?r("ALMCartActionAssets",""):f;b.guardFatal?b.guardFatal(d)(b,window):b.execute(function(){d(b,window)})})(function(d,f,r){d.when("A").register("alm-cart-action-query-string-utils",function(b){function c(c,m){var h=e(c),g=a(c);h?m["discoveredAsins.0"]=c.asin:g&&(c=b.filter(c.items,function(a){return e(a)}),c=b.map(c,function(a){return a.asin}),b.each(c,function(a,e){m["discoveredAsins."+e.toString()]=a}));return m}
function a(a){return a&&a.items&&b.$.isArray(a.items)&&0<a.items.length}function e(a){return a&&a.asin&&"string"===typeof a.asin&&""!==a.asin}return{addQueryStringParamsToUrl:function(a,e){var h={};if(e&&e.reftag){var g=e.reftag;"string"===typeof g&&""!==g&&(h.ref_=g)}if(e&&e.queryLogInfoParams){var g=e.queryLogInfoParams,k;for(k in g)g.hasOwnProperty(k)&&"string"===typeof k&&""!==k&&"string"===typeof g[k]&&""!==g[k]&&(h[k]=g[k])}c(e,h);(e=b.$.param(h))&&"string"===typeof e&&""!==e&&(a+="?"+e);return a}}});
"use strict";d.when("A","jQuery").register("afx-add-all-helper",function(b,c){return{updateQuantityForAsin:function(a,e,b){a&&e&&!isNaN(b)&&c("#"+a).closest("form").find("#afx-add-all-"+e+"-quantity").attr("value",b)}}});"use strict";d.when("A","jQuery","a-button").register("fx-atfc-button-utils",function(b,c,a){function e(a){return"atfc-spinner-"+(a.asin?a.asin:a.clientId?a.clientId:"noAsin")}var q=!1;return{hideButtonAndRenderSpinner:function(a){var b=a.$currentTarget.find(".a-button");b&&b.length&&
(q=!0,a=e(a.data),b.wrap('\x3cdiv id\x3d"'+a+'" class\x3d"atfc-spinner"\x3e\x3c/div\x3e'),c("#"+a).css({width:b.outerWidth()+"px"}),c("#"+a).css({height:b.outerHeight()+"px"}),b.css("visibility","hidden"))},showButtonAndRemoveSpinner:function(a){var b=a.$currentTarget.find(".a-button");a=e(a.data);a=c("#"+a);b&&b.length&&a&&a.length&&(q=!1,b.css("visibility","visible"),b.unwrap())},shouldDisableButtonClicks:function(){return q}}});"use strict";d.when("fresh-shared-add-to-cart-v2","qs-fresh-shared-add-to-cart").register("fresh-add-to-cart",
function(b,c){function a(a){b.attachCallbacks(a)}b.initialize("desktop");c.initialize("desktop");return{addToFreshCart:function(b){a(b)},attachCallbacks:a,updateAddAllQuantityForAsin:b.updateAddAllQuantityForAsin,updateQuantity:b.updateQuantity}});"use strict";d.when("shared-alm-multi-add-to-cart").register("alm-multi-add-to-cart",function(b){function c(a){b.attachCallbacks(a)}b.initialize("desktop");return{multiAddToCart:function(a){c(a)},attachCallbacks:c,attachPreHandler:function(a){b.attachPreHandler(a)}}});
"use strict";d.when("A","alm-cart-action-query-string-utils").register("afx-atfc-v2-proxy",function(b,c){return{addToFreshCart:function(a){var e=c.addQueryStringParamsToUrl("/alm/addtofreshcart",a.data);b.$.ajax(e,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)},showGenericErrorModal:function(a){b.post("/alm/atfcGenericErrorModal/",{timeout:5E3,success:a.success,error:a.error})}}});"use strict";d.when("A").register("fx-atfo-proxy",function(b){return{addToFreshOrder:function(c){var a=
"/fom/add-to-fresh-order";c.reftag!==r&&(a+="/ref\x3d"+c.reftag);c.data!==r&&c.data.csrfToken&&(a+="?csrf\x3d"+encodeURIComponent(c.data.csrfToken));b.post(a,{success:c.success,error:c.error,params:JSON.stringify(c.data),paramsFormat:"json",contentType:"application/json"})},getFallbackErrorModalHtml:function(){return{header:"Item was not added to the order",errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your order.\x3c/b\x3e Please try again.",footer:"\x3cspan class\x3d'a-declarative' data-action\x3d'a-popover-close'data-a-popover-close\x3d'{}'\x3e\n\x3cspan class\x3d'a-button primary-fresh-btn'\x3e\x3cspan class\x3d'a-button-inner'\x3e\x3cinput class\x3d'a-button-input'type\x3d'submit'\x3e\x3cspan class\x3d'a-button-text' aria-hidden\x3d'true'\x3eOK\n\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e"}}}});
"use strict";d.when("A").register("afx-atfc-cart-conflicts-proxy",function(b){function c(a){a.ref=a.reftag;a.client="atfc";return a}return{getConflictSummary:function(a){var e=c(a.data);b.post("/afx/cartconflicts/getconflictsummary",{timeout:5E3,success:a.success,error:a.error,params:e})},resolve:function(a){var e=c(a.data);b.post("/afx/cartconflicts/resolve",{timeout:5E3,success:a.success,error:a.error,params:e})},substitute:function(a){a=c(a.data);a.sourceUrl=f.location.pathname+f.location.search;
a=b.$.param(a);f.location.href="/afx/cartconflicts/resolve/substitute?"+a}}});"use strict";d.when("A").register("afx-get-cart-count",function(b){return function(c){b.post("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:c.sessionID,clientName:"SharedFreshHandler"},success:c.success,error:c.error})}});"use strict";d.when("A","alm-cart-action-query-string-utils").register("alm-multi-add-to-cart-proxy",function(b,c){return{multiAddToCart:function(a){var e=c.addQueryStringParamsToUrl("/alm/addtocart/multiple",
a.data);b.$.ajax(e,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)}}});"use strict";d.register("afx-callbacks-helper",function(b){function c(b){var c=b in a;!c&&d.log("Unable to retrieve callback for "+b,"Error");return c}var a={};return{addCallbacks:function(b){a[b.clientID||"default"]=b},success:function(b,d,m){b=b in a?b:"default";c(b)&&a[b].success&&a[b].success(d,m)},error:function(b,d,m,h){b=b in a?b:"default";c(b)&&a[b].error&&a[b].error(d,
m,h)}}});"use strict";d.register("afx-preHandler-helper",function(b){var c={};return{addPreHandler:function(a){c[a.clientID||"default"]=a},getPreHandler:function(a){return c[a]}}});"use strict";d.register("afx-csm-metrics-utils",function(){var b={},c=function(a,b){f.ue&&f.ue.count&&a&&b&&f.ue.count(a,b)};return{startWidgetTimer:function(a){b[a]=Date.now()},endWidgetTimer:function(a,e){a=Date.now()-b[a];c(e,a)},setWidgetClickTimestamp:function(a){f.ue&&f.uet&&a&&f.uet("tc",a,{wb:1})},setWidgetTimestamp:function(a,
b){f.ue&&f.uet&&a&&b&&f.uet(a,b,{wb:1})},increment:function(a){f.ue&&f.ue.count&&a&&f.ue.count(a,(f.ue.count(a)||0)+1)},setCount:c,sendWidgetMetrics:function(a){f.ue&&f.uex&&a&&f.uex("ld",a,{wb:1})}}});"use strict";d.register("add-to-cart-common-utils",function(){return{vibrate:function(){return f.amazon&&f.amazon.cordova&&f.amazon.cordova.notification&&f.amazon.cordova.notification.vibrate&&f.amazon.cordova.notification.vibrate(50)}}});"use strict";d.when("A","a-modal").register("fresh-atfc-modal-utils",
function(b,c){return{removeModal:function(){var a=c.get("fresh-add-to-cart-modal");a&&c.remove(a)},showModal:function(a,e,d){e&&(e={name:"fresh-add-to-cart-modal",header:e.header,inlineContent:e.body,footer:e.footer},"desktop"===d&&(e.width=325),c.create(a.$currentTarget,e).show(),b.on("a:popover:afterHide:".concat("fresh-add-to-cart-modal"),function(a){c.remove(a.popover)}))}}});"use strict";d.when("A","jQuery","afx-atfc-v2-proxy","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper",
"fresh-atfc-ewc-helper").register("fresh-atfc-error-modal-utils",function(b,c,a,e,q,f,h){function g(a,c,e,g){d.when("a-modal").execute("showModal",function(d){c||k(a);a.data.quantity&&(f.updateQuantity("fresh-clear-slot-button",a.data.quantity),f.updateQuantity("alcohol-warning-fresh-add-to-cart-button",a.data.quantity));var n={name:"fresh-add-to-cart-error-modal",header:c.header,inlineContent:c.errorMessage,footer:c.footer,data:{event:a,response:g}};"desktop"===e&&(n.width=325);d.create(a.$currentTarget,
n).show();b.on("a:popover:afterHide:".concat("fresh-add-to-cart-error-modal"),function(b){h.refreshCart(a.data.sessionID);d.remove(b.popover)})})}function k(b,e){a.showGenericErrorModal({success:function(a,k,d){a&&(a=c.parseJSON(d.http.response),n(b,a,e))},error:function(){d.log("Failed to get the generic error modal","Error");g(b,{header:"Item was not added to the cart",errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your cart.\x3c/b\x3e Please try again.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
e)}})}function n(a,b,c){var k=b.errorModalHtml,d=q.getMetricsForDevice(c);b.clientResponseModel&&b.clientResponseModel.uberCartStatus&&b.clientResponseModel.uberCartStatus.errorStatusCode in d&&e.increment(d[b.clientResponseModel.uberCartStatus.errorStatusCode]);g(a,k,c,b)}return{removeModal:function(){d.when("a-modal").execute("removeModal",function(a){var b=a.get("fresh-add-to-cart-error-modal");b&&a.remove(b)})},showModal:g,showGenericErrorModal:k,parseResponseAndShowErrorModal:n}});"use strict";
d.when("A","jQuery","afx-atfc-v2-proxy","afx-get-cart-count").register("fresh-atfc-ewc-helper",function(b,c,a,e){function q(a){e({sessionID:a,success:function(a){a&&a.isOK&&a.total&&f(a.total.numActiveItem)},error:function(){d.log("Failed to get cart count","Error",a)}})}function f(a){d.when("nav.setCartCount").execute(function(b){b(a)});d.when("mash").execute(function(b){b.cart&&"function"===typeof b.cart.didUpdate&&b.cart.didUpdate({newCartQuantity:a})})}var h;d.when("EWC").execute("add-to-cart-refresh",
function(a){h=a});d.when("nav.getFlyout").execute(function(a){a("ewc")});return{refreshCart:function(a){h!==r&&"function"===typeof h.refresh?h.refresh():q(a)}}});"use strict";d.when("A","afx-storeIntroductionSheet-helper","afx-cpi-helper").register("f3-consumables-atc-helper",function(b,c,a){return{handleAddToCart:function(e,d,f){d.storeIntroductionSheetHtml&&d.storeIntroductionSheetHtml.content?c.render(e,d,f):d.renderUFGCartProgressIndicator?a.render(e):b.trigger("fresh-atfc:success","false",{almBrandId:e.brandId})}}});
"use strict";d.register("afx-metrics-helper",function(){var b={ATFC_COUNT:"afxAddToFreshCartCount",ALM_MULTI_ATC_COUNT:"almMultiAddToCartCount",ATFC_SUCCESSFUL_ADD_COUNT:"afxAddToFreshCartSuccessfulAddCount",ALM_MULTI_ATC_COUNT_SUCCESS:"almMultiAddToCartCountSuccess",ATFC_ERROR_MODAL_COUNT:"afxAddToFreshCartErrorModalCount",ALM_MULTI_ATC_COUNT_ERROR_MODAL:"almMultiAddToCartCountErrorModal",ATFC_UNEXPECTED_ERROR_COUNT:"afxAddToFreshCartUnexpectedErrorCount",ALM_MULTI_ATC_COUNT_ERROR_UNEXPECTED:"almMultiAddToCartCountErrorUnexpected",
ATFC_LATENCY_SCOPE:"afxAddToFreshCartLatencyScope",ATFC_ERROR_MODAL_LATENCY_SCOPE:"afxAddToFreshCartErrorModalLatencyScope",ATFC_CTCF:"afxAddToFreshCartCTCF",ATFC_STORE_INTRODUCTION_SHEET:"afxStoreIntroductionSheet",ATFC_OCX_STORE_INTRODUCTION_SHEET:"afxOfferComparisonStoreIntroductionSheet",CLEAR_SLOT_ATFC_CTCF:"afxClearSlotAndAddToFreshCartCTFC",CART_SERVICE_RESPONSE_FALSE:"afxCartServiceResponseIsNotOKErrorCount",ITEM_NOT_AVAILABLE:"afxItemNotAvailableErrorModalCount",ITEM_PARTIALLY_AVAILABLE:"afxItemPartiallyAvailableErrorModalCount",
ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION:"afxItemPartiallyAvailableErrorModalCount",ADDRESS_NOT_SELECTED:"afxAddressNotSelectedErrorCount",INPUT_INVALID:"afxGeneralErrorModalCount",ITEM_NOT_AVAILABLE_FOR_RESERVATION:"afxItemNotAvailableForReservationErrorModalCount",INTERNAL_SERVER_ERROR:"afxGeneralErrorModalCount",PRICE_UNAVAILABLE:"afxItemNotAvailableErrorModalCount",QUANTITY_OVERFLOW:"afxUniqueItemQuantityOverflowErrorModalCount"};return{getMetricsForDevice:function(c){var a={};Object.keys(b).forEach(function(e){a[e]=
b[e]+":"+c});return a}}});"use strict";d.when("A").register("afx-quantity-helper",function(b){var c={};return{updateQuantity:function(a,b){"undefined"!==typeof a&&null!==a&&!isNaN(b)&&0<b&&(c[a]=b||1)},getQuantity:function(a){a=a.closest(".a-button");return 0<a.length?c[a.attr("id")]||1:1}}});"use strict";d.when("A","afx-csm-metrics-utils","afx-metrics-helper").register("afx-storeIntroductionSheet-helper",function(b,c,a){function e(a,b){var c=b?400:190;d.when("a-sheet").execute(function(e){e.create({inlineContent:a,
closeType:"icon",height:c}).show();f("mobile",b)})}function f(b,e){b=a.getMetricsForDevice(b);e?c.increment(b.ATFC_OCX_STORE_INTRODUCTION_SHEET):c.increment(b.ATFC_STORE_INTRODUCTION_SHEET)}function m(){b.show(b.$("#sis-background"));b.$("body").css({overflow:"hidden"});b.$("#offer-comparison-store-introduction-side-sheet-container").show(function(){g({right:"0px"})});f("desktop",!0)}function h(){var a=b.$("#offer-comparison-store-introduction-side-sheet-container").width()+30;g({right:"-"+a+"px"},
function(){b.$("#offer-comparison-store-introduction-side-sheet-container").remove()});b.$("body").css({overflow:"scroll"});b.hide(b.$("#sis-background"));b.$("#offer-comparison-store-introduction-side-sheet-background-container").remove()}function g(a,c){b.animate(b.$("#offer-comparison-store-introduction-side-sheet-container"),a,300,"ease-out",c)}b.declarative("close-offer-comparison-store-introduction-side-sheet","click",function(a){h()});return{render:function(a,c,d){c=c.storeIntroductionSheetHtml.content;
a=a.additionalParams&&a.additionalParams.shouldRenderSIS;"mobile"===d?e(c,a):"desktop"===d&&(b.$("body").append(c),m())}}});"use strict";d.when("A").register("afx-cpi-helper",function(b){return{render:function(c){b.trigger("consumables-atc:success",{atcAction:{ASIN:c.asin,numberOfItems:c.quantity,operationType:"ADDED"},programDetails:{programType:"UFG",brandId:c.brandId,storeId:c.storeId},requestOverrides:{responseType:"HTML","cart-progress-indicator":{messageType:"topsheet"}}})}}});"use strict";
d.when("A","afx-atfc-cart-conflicts-proxy").register("afx-atfc-cart-conflicts-executor",function(b,c){return{execute:function(a){c.getConflictSummary({data:a.data,success:function(e,d,f){!0===e.isSuccess?!0===e.hasConflicts?c.substitute({data:a.data}):c.resolve({data:a.data,success:function(){b.trigger("fresh-cart-conflict-resolution:success");location.reload()},error:a.error}):a.error(f,d,"Failed to call getconflictsummary")},error:a.error})}}});"use strict";d.when("A","afx-atfc-v2-proxy","fx-atfo-proxy",
"fx-atfc-button-utils","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","afx-callbacks-helper","afx-atfc-cart-conflicts-executor","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","afx-add-all-helper","f3-consumables-atc-helper","add-to-cart-common-utils").register("fresh-shared-add-to-cart-v2",function(b,c,a,e,f,m,h,g,k,n,x,l,y,t){return{updateQuantity:h.updateQuantity,attachCallbacks:g.addCallbacks,updateAddAllQuantityForAsin:l.updateQuantityForAsin,initialize:function(l){function w(a){return a.isItemSoldByCount?
!JSON.parse(a.isItemSoldByCount):a.pickingStrategy?"bulk"===a.pickingStrategy||"catch"===a.pickingStrategy:!1}function p(a,b,d,k){t.vibrate();a.data.amountInUom===r&&w(a.data)&&(a.data.amountInUom=a.data.quantity,a.data.quantity=1);c.addToFreshCart({data:a.data,success:function(c,k,h){200===h.status&&(f.increment(u.ATFC_SUCCESSFUL_ADD_COUNT),k=u.ATFC_CTCF+":lineItemBucket:"+z(c),f.endWidgetTimer(b,k),x.refreshCart(a.data.sessionID),g.success(a.data.clientID,a,c.clientResponseModel),y.handleAddToCart(a.data,
c,l));n.removeModal();e.showButtonAndRemoveSpinner(a);d&&d()},error:function(c,d,h){var w=u.ATFC_CTCF,m=c.responseText,p;n.removeModal();m&&(p=JSON.parse(m),w=u.ATFC_CTCF+":lineItemBucket:"+z(p.clientResponseModel));400===c.status&&p?(f.increment(u.ATFC_ERROR_MODAL_COUNT),n.parseResponseAndShowErrorModal(a,p,l)):403===c.status?location.reload():(f.increment(u.ATFC_UNEXPECTED_ERROR_COUNT),n.showGenericErrorModal(a,l),g.error(a.data.clientID,a,c,d,h));f.endWidgetTimer(b,w);e.showButtonAndRemoveSpinner(a);
k&&k()}})}function A(a,c){f.startWidgetTimer(c);b.post("/afx/slotselection/cancel",{timeout:5E3,params:{token:a.data.additionalParams.csrfToken},success:function(){a.data.quantity=h.getQuantity(a.$target);p(a,c,function(){location.reload()})},error:function(){d.log("Failed to clear reservation");n.showGenericErrorModal(a,l)}})}function z(a){return a.items&&Math.ceil(a.items.length/5)}var u=m.getMetricsForDevice(l),v=u.ATFC_LATENCY_SCOPE+Date.now();b.on("quantity-selector-widget:action:AddToCartAction",
function(a){a.additionalParams&&(a.additionalParams=b.$.parseJSON(a.additionalParams));a.queryLogInfoParams&&(a.queryLogInfoParams=b.$.parseJSON(a.queryLogInfoParams));var c={data:a};if(a.tunneledData&&a.tunneledData.$target){var d=a.tunneledData.$target,c=b.$.extend(c,{$target:d,$currentTarget:d,$declarativeTarget:d});delete a.tunneledData}else a=b.$("#qs-widget-button-container-"+a.qsUID),c=b.$.extend(c,{$target:a,$currentTarget:a,$declarativeTarget:a}),e.hideButtonAndRenderSpinner(c);p(c,v)});
b.declarative("fresh-clear-slot","click",function(a){a.$currentTarget.context.disabled=!0;A(a,v)});b.declarative("fresh-add-to-cart","click",function(a){f.startWidgetTimer(v);f.increment(u.ATFC_COUNT);e.shouldDisableButtonClicks()||a.$currentTarget.find("input").is(":disabled")||(e.hideButtonAndRenderSpinner(a),a.data.qsUID?b.trigger("quantity-selector-widget:triggerAction",a.data.qsUID,"AddToCartAction",{$target:a.$currentTarget}):(a.data.quantity=h.getQuantity(a.$target),p(a,v)))});b.declarative("fresh-add-to-cart-alcohol",
"click",function(a){a.$currentTarget.context.disabled=!0;f.startWidgetTimer(v);a.data.quantity=h.getQuantity(a.$target);p(a,v)});b.declarative("fresh-add-to-cart-regions-resolve","click",function(a){a.$currentTarget.context.disabled=!0;n.removeModal();k.execute({data:a.data,error:function(b,c,e){n.showGenericErrorModal(a,l);g.error(a.data.clientID,a,b,c,e)}})});b.declarative("fresh-add-to-order","click",function(b){e.shouldDisableButtonClicks()||(e.hideButtonAndRenderSpinner(b),t.vibrate(),a.addToFreshOrder({data:b.data,
success:function(a,c,d){200===d.http.status&&g.success(b.data.clientID,b,a.clientResponseModel);e.showButtonAndRemoveSpinner(b)},error:function(c,d,f){n.removeModal();if(400===c.http.status)c=JSON.parse(c.responseText),n.parseResponseAndShowErrorModal(b,c,l);else if(401===c.http.status)location.reload();else{var k=a.getFallbackErrorModalHtml();n.showModal(b,k,l);g.error(b.data.clientID,b,c,d,f)}e.showButtonAndRemoveSpinner(b)}}))})}}});"use strict";d.when("A","alm-multi-add-to-cart-proxy","fx-atfc-button-utils",
"afx-csm-metrics-utils","afx-metrics-helper","afx-callbacks-helper","afx-preHandler-helper","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","f3-consumables-atc-helper","add-to-cart-common-utils").register("shared-alm-multi-add-to-cart",function(b,c,a,e,d,f,h,g,k,n,x){return{attachCallbacks:f.addCallbacks,attachPreHandler:h.addPreHandler,initialize:function(l){function y(b,d,h,q){x.vibrate();c.multiAddToCart({data:b.data,success:function(c,d,p){200===p.status&&(e.increment(t.ALM_MULTI_ATC_COUNT_SUCCESS),
k.refreshCart(b.data.sessionID),f.success(b.data.clientId,b,c),n.handleAddToCart(b.data,c,l));g.removeModal();a.showButtonAndRemoveSpinner(b);h&&h()},error:function(c,d,k){a.showButtonAndRemoveSpinner(b);var h;g.removeModal();c.responseText&&(h=JSON.parse(c.responseText));400===c.status&&h?(e.increment(t.ALM_MULTI_ATC_COUNT_ERROR_MODAL),g.parseResponseAndShowErrorModal(b,h,l)):403===c.status?location.reload():(e.increment(t.ALM_MULTI_ATC_COUNT_ERROR_UNEXPECTED),g.showGenericErrorModal(b,l));f.error(b.data.clientId,
b,c,d,k);q&&q()}})}var t=d.getMetricsForDevice(l),r=t.ATFC_LATENCY_SCOPE+Date.now();b.declarative("alm-multi-add-to-cart","click",function(b){e.increment(t.ALM_MULTI_ATC_COUNT);var c=h.getPreHandler(b.data.clientId);c&&c.preHandle&&(c=c.preHandle(b))&&(b=c);c=b.$currentTarget.find("input");!b.data.items||1>b.data.items.length||a.shouldDisableButtonClicks()||c.is(":disabled")||(a.hideButtonAndRenderSpinner(b),y(b,r))})}}});d.when("A","f3-consumables-atc-helper","fresh-atfc-ewc-helper","afx-callbacks-helper",
"fresh-atfc-error-modal-utils","add-to-cart-common-utils").register("qs-fresh-shared-add-to-cart",function(b,c,a,e,d,f){return{initialize:function(h){function g(b){var f=b.response.rawResponse,g=f.jqXHR,l=b.request,m=l.triggeringEvent;m.data=l.additionalInput;200===g.status&&(a.refreshCart(l.sessionId),e.success(b.clientName,m,f.clientResponseModel),c.handleAddToCart(m.data,f,h));d.removeModal()}b.on("quantity-slider:add-to-cart-start",function(a){f.vibrate()});b.on("quantity-slider:remove-from-cart-start",
function(a){f.vibrate()});b.on("quantity-slider:remove-from-cart-success",function(a){g(a)});b.on("quantity-slider:add-to-cart-success",function(a){g(a)});b.on("quantity-slider:cart-submit-error",function(a){var b=a.request.triggeringEvent,c=a.response,f=c.responseText,g;d.removeModal();f&&(g=JSON.parse(f));b.data=a.request.additionalInput;400===c.status&&g?d.showModal(b,g.errorModalHtml,h):403===c.status?location.reload():(d.showGenericErrorModal(b,h),e.error(a.clientName,b,c,"error",c.statusText))})}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("APEAdaptiveSkyscraperWidgetAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(t){var r=window.AmazonUIPageJS||window.P,p=r._namespace||r.attributeErrors,h=p?p("SponsoredBrandsVideoAssets",""):r;h.guardFatal?h.guardFatal(t)(h,window):h.execute(function(){t(h,window)})})(function(t,r,p){t.when("A","rush-framework","sbv-single-product","sbv-slideshow-product-mixin").register("sbv-slideshow-single-product",function(h,n,g,f){var b=function(){this.attribution=this.name="sbv-slideshow-single-product"};h.mixin(b.prototype,f);var e=new b;n.registerComponent(e.name,e.attribution,
function(d){var b=h.$(d.elem()),a=b.find(".sbv-product:first"),a=0===a.length?b.children().get(-1):a.get(0);e.setup(b,a,d,g)})});"use strict";t.when("A","rush-framework","sbv-video-single-mixin","sbv-single-product","sbv-store-ingress").register("sbv-video-single-product",function(h,n,g,f,b){var e=function(){this.attribution=this.name="sbv-video-single-product"};h.mixin(e.prototype,g);var d=new e;n.registerComponent(d.name,d.attribution,function(e){var a=h.$(e.elem()),c=a.find(".sbv-product:first").get(0),
k=a.find(".sbv-store-ingress:first").get(0);d.setup(a,c,k,e,f,b)})});"use strict";t.when("A","rush-framework","sbv-single-link","sbv-video-single-mixin").register("sbv-video-single-link",function(h,n,g,f){var b=function(){this.attribution=this.name="sbv-video-single-link"};h.mixin(b.prototype,f);var e=new b;n.registerComponent(e.name,e.attribution,function(d){var b=h.$(d.elem()),a=b.find(".sbv-link:first").get(0);e.setup(b,a,null,d,g,null)})});t.when("A","base-mixin","sbv-video").register("sbv-video-single-mixin",
function(h,n,g){return{setup:function(f,b,e,d,h,a){var c=f.find(".sbv-video:first"),k=n.setup(f,d).withVideoPreviewImageSrc(d.prop("videoPreviewImageSrc")).withVideoSrc(d.prop("videoSrc")).withHasAudio("true"===d.prop("hasAudio")).withStoreName(d.prop("storeName")||"").withStoreUrl(d.prop("storeUrl")||"").withStoreCta(d.prop("storeCta")||"").build();f.hasClass("aok-hidden")&&f.hasClass("sbv-abd")||"none"==f.css("display")?k.reportAdRenderSuppressed():(k.reportAceVideoResponseReceived(),f=g.initialize(c.get(0),
k,d.prop("instrumentationPixelUrl")),h.initialize(b,k,f),a&&e&&a.initialize(e,k,f))}}});t.when("A","sbv-metrics-manager","sbv-automated-test-metrics-client","sbv-platform-compatibility","sbv-latency-event-handler").register("base-mixin",function(h,n,g,f){return{setup:function(b,e){f.setAppVersion(e.prop("appVersion"));b=n.builder().withMetricsIdentifier(e.prop("metricsIdentifier")).withAdvertiserId(e.prop("advertiserId")).withCampaignId(e.prop("campaignId")).withSlotId(e.prop("slotId")).withSearchQuery(e.prop("searchQuery")).withWidgetIndex(e.prop("widgetIndex")).withDeviceEnv(e.prop("deviceEnv")||
"").withDeviceOs(e.prop("deviceOs")||"").withDeviceType(e.prop("deviceType")||"").withDevicePlatformVersion(e.prop("devicePlatformVersion")||"").withDeviceModel(e.prop("deviceModel")||"").withDeviceMake(e.prop("deviceMake")||"").withAppVersion(e.prop("appVersion")||"").withStage(e.prop("stage")).withClientId(e.prop("clientId")).withWeblabs(e.prop("weblabs")).withLanguage(e.prop("language")).withMarketplaceId(e.prop("marketplaceId")).withWidgetType(e.prop("widgetType")).withWidgetGroupId(e.prop("widgetGroupId")).withPageType(e.prop("pageType")).withPageNumber(e.prop("pageNumber")).withSushiSourceGroupEndpoint(e.prop("sushiSourceGroupEndpoint"));
e.prop("trackingPixelUrl")&&h.$.ajax({url:e.prop("trackingPixelUrl"),type:"GET",crossDomain:!0});return b}}});t.when("base-mixin","sbv-slideshow").register("sbv-slideshow-product-mixin",function(h,n){return{setup:function(g,f,b,e){var d=g.find(".sbv-slideshow-view-container:first").get(0);b=h.setup(g,b).build();b.reportSlideshowWidgetResponseReceived();d=n.initialize(d,b);(g=g.find(".sbv-slideshow-timer:first").get(0))&&g.dataset&&g.dataset.jsploadedtime&&(g=Date.now()-g.dataset.jsploadedtime,b.reportTimeWaitingForScriptToExecute(g));
e.initialize(f,b,d)}}});t.when("A","3p-promise").register("sbv-adblock-detector",function(h,n){var g={method:"HEAD",mode:"no-cors",headers:{"Content-Type":"plain/text"}};return{timeoutWrapper:function(f){return new n(function(b,e){var d=setTimeout(function(){clearTimeout(d);b()},f)})},fetchWrapper:function(f,b,e){e=this.timeoutWrapper(e);f=r.fetch(f,b);return n.race([f,e])},init:function(){if(h.$(".sbv-video-single-product").find(".sbv-compliant-abd").length){var f=this.fetchWrapper("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?_\x3d1607460946161",
g,2E3);return new n(function(b,e){f.then(function(d){e(d)}).catch(function(d){b(d)})})}}}});t.when("af","ready").register("sbv-latency-event-handler");t.when("A").register("sbv-single-link",function(h){function n(){this.init=function(g,f,b){h.$(g).find("a").click(function(){f.reportLinkClicked(b&&b.getVideoCurrentTimeMs())});h.$(g).find(".sbv-link-cta-container").click(function(){f.reportCallToActionClicked(b&&b.getVideoCurrentTimeMs())});h.$(g).find(".sbv-link-img-container").click(function(){f.reportImageClicked(b&&
b.getVideoCurrentTimeMs())});h.$(g).find(".sbv-link-headline").click(function(){f.reportHeadlineClicked(b&&b.getVideoCurrentTimeMs())})}}return{initialize:function(g,f,b){(new n).init(g,f,b)}}});"use strict";t.when("A","sbv-sushi-client").register("sbv-metrics-manager",function(h,n){function g(a){function c(a,c){var b=k(e.VM_POST_FAILURE);b[d.VIEW_METRICS_FAILURE]=a;b[d.ERROR_MESSAGE]=c;l(b)}function k(a){var c=h.$.extend({},u);c[d.EVENT_TYPE]=a;c[d.METRICS_SEQUENCE_NUMBER]=f++;c[d.NETWORK_TYPE]=
navigator&&navigator.connection&&navigator.connection.type;return c}function l(a,c){g&&g.processEvent(a,m);v&&v.processEvent(a)}var f=0,g=n.newClient(r,a,"AceVisClientMetrics"),u=null,v=null;this.setSushiClient=function(a){g=a};this.setDefaultEventAttributes=function(a){u=h.$.extend({},a);u[d.USER_AGENT]=navigator.userAgent};this.setAutomatedTestMetricsClient=function(a){v=a};this.reportAceVideoResponseReceived=function(){var a=k(e.ACE_VIDEO_RESPONSE_RECEIVED);l(a)};this.reportAdBlockDetected=function(){var a=
k(e.AD_BLOCK_DETECTED);l(a)};this.reportTimeWaitingForScriptToExecute=function(a){var c=k(e.TIME_WAITING_FOR_SCRIPT_TO_EXECUTE);c[d.LOAD_TIME_MS]=a;l(c)};this.reportTimeWaitingForScriptToExecuteFailure=function(a){var c=k(e.TIME_WAITING_FOR_SCRIPT_TO_EXECUTE_FAILURE);c[d.ERROR_MESSAGE]=a;l(c)};this.reportAdRenderSuppressed=function(){var a=k(e.AD_RENDER_SUPPRESSED);l(a)};this.reportSlideshowWidgetResponseReceived=function(){var a=k(e.SLIDESHOW_WIDGET_RESPONSE_RECEIVED);l(a)};this.reportSlideshowClicked=
function(a,c){var b=k(e.SLIDESHOW_CLICKED);b[d.SLIDESHOW_TOTAL_SLIDES]=a;b[d.SLIDESHOW_CURRENT_INDEX]=c;l(b)};this.reportSlideshowSwiped=function(a){var c=k(e.SLIDESHOW_SWIPED);c[d.SLIDESHOW_TOTAL_SLIDES]=a;l(c)};this.reportSlideshowOnScreen=function(a){var c=k(e.SLIDESHOW_ON_SCREEN);c[d.SLIDESHOW_TOTAL_SLIDES]=a;l(c)};this.reportSlideshowOffScreen=function(a,c){var b=k(e.SLIDESHOW_OFF_SCREEN);b[d.SLIDESHOW_TOTAL_SLIDES]=a;b[d.TIME_ON_SCREEN_MS]=c;l(b)};this.reportSlideshowLoop=function(a,c){var b=
k(e.SLIDESHOW_LOOP);b[d.SLIDESHOW_TOTAL_SLIDES]=a;b[d.SLIDESHOW_LOOP_COUNT]=c;l(b)};this.reportSlideshowLoadFailed=function(a,c){var b=k(e.SLIDESHOW_LOAD_FAILED);b[d.SLIDESHOW_TOTAL_SLIDES]=a;b[d.ERROR_MESSAGE]=c;l(b)};this.reportSlideshowLoadCompleted=function(a){var c=k(e.SLIDESHOW_LOAD_COMPLETED);c[d.SLIDESHOW_TOTAL_SLIDES]=a;l(c)};this.reportAdFeedbackLoadFailed=function(a){var c=k(e.AD_FEEDBACK_LOAD_FAILED);c[d.STATUS_CODE]=a;l(c)};this.reportAdFeedbackLoadFailedFromErr=function(a){var c=k(e.AD_FEEDBACK_LOAD_FAILED_FROM_ERR);
c[d.ERROR_MESSAGE]=a;l(c)};this.reportAdFeedbackLoadSucceeded=function(a){var c=k(e.AD_FEEDBACK_LOAD_SUCCEEDED);c[d.STATUS_CODE]=a;l(c)};this.reportAdFeedbackKeywordEncodingFailure=function(){var a=k(e.AD_FEEDBACK_KEYWORD_ENCODING_FAILURE);l(a)};this.reportAdFeedbackPopoverOpened=function(){var a=k(e.AD_FEEDBACK_POPOVER_OPENED);l(a)};this.reportMissingVideoFunction=function(a){var c=k(e.MISSING_VIDEO_FUNCTION);c[d.ERROR_MESSAGE]=a;l(c)};this.reportPreviewImageLoadSuccess=function(a,c){var b=k(e.PREVIEW_IMAGE_LOAD_SUCCESS);
b[d.LOAD_TIME_MS]=a;b[d.RETRY_COUNT]=c;l(b)};this.reportPreviewImageLoadFailure=function(a,c){var b=k(e.PREVIEW_IMAGE_LOAD_FAILURE);b[d.LOAD_TIME_MS]=a;b[d.STATUS_CODE]=c;l(b)};this.reportVideoDomainVerificationFailure=function(a){var c=k(e.VIDEO_DOMAIN_VERIFICATION_FAILURE);c[d.ERROR_MESSAGE]=a;l(c)};this.reportVideoReadyForPlayback=function(a,c,b,f){var g=k(e.VIDEO_READY_FOR_PLAYBACK);g[d.LOAD_TIME_MS]=a;g[d.RETRY_COUNT]=c;g[d.PERCENT_DOWNLOADED]=b;g[d.VIDEO_TOTAL_LENGTH_MS]=f;l(g)};this.reportVideoPlaybackInitiated=
function(a){var c=k(e.VIDEO_PLAYBACK_INITIATED);c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportVideoPlaybackStarted=function(a,c,b){var f=k(e.VIDEO_PLAYBACK_STARTED);f[d.VIDEO_CURRENT_TIME_MS]=a;f[d.PERCENT_DOWNLOADED]=c;f[d.DROPPED_FRAMES]=b;l(f)};this.reportTimeToFirstFrame=function(a,c,b){var f=k(e.TIME_TO_FIRST_FRAME);f[d.LOAD_TIME_MS]=a;f[d.PERCENT_DOWNLOADED]=c;f[d.DROPPED_FRAMES]=b;l(f)};this.reportVideoBufferingStarted=function(a,c,b){var f=k(e.VIDEO_BUFFERING_STARTED);f[d.VIDEO_CURRENT_TIME_MS]=
a;f[d.PERCENT_DOWNLOADED]=c;f[d.DROPPED_FRAMES]=b;l(f)};this.reportVideoBufferingEnded=function(a,c,b){var f=k(e.VIDEO_BUFFERING_ENDED);f[d.VIDEO_CURRENT_TIME_MS]=a;f[d.PERCENT_DOWNLOADED]=c;f[d.DROPPED_FRAMES]=b;l(f)};this.reportVideoPlaybackFailure=function(a,c,b){var f=k(e.VIDEO_PLAYBACK_FAILURE);f[d.VIDEO_CURRENT_TIME_MS]=a;f[d.ERROR_MESSAGE]=c;f[d.ERROR_CODE]=b;l(f)};this.reportVideoDurationPlayed=function(a,c,b){var f=k(e.VIDEO_DURATION_PLAYED);f[d.VIDEO_BOUNDRY_CROSSED_TIME_MS]=a;f[d.PERCENT_DOWNLOADED]=
c;f[d.DROPPED_FRAMES]=b;l(f)};this.reportPlaybackCompleted=function(a,c){var b=k(e.PLAYBACK_COMPLETED);b[d.VIDEO_CURRENT_TIME_MS]=a;b[d.DROPPED_FRAMES]=c;l(b)};this.reportVideoOnScreen=function(a){var c=k(e.VIDEO_ON_SCREEN);c[d.PERCENT_DOWNLOADED]=a;l(c)};this.reportVideoOffScreen=function(a,c,b){var f=k(e.VIDEO_OFF_SCREEN);f[d.TIME_ON_SCREEN_MS]=a;f[d.WAS_BUFFERING]=c;f[d.VIDEO_CURRENT_TIME_MS]=b;l(f)};this.reportVideoView=function(a,c){var b=k(e.VIDEO_VIEW);b[d.CONTINUOUS_PLAYBACK_DURATION_MS]=
a;l(b);c&&g&&g.flush(g,!0)};this.reportVideoPauseInitiated=function(a){var c=k(e.VIDEO_PAUSED_INITIATED);c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportVideoPaused=function(a,c,b){var f=k(e.VIDEO_PAUSED);f[d.VIDEO_CURRENT_TIME_MS]=a;f[d.PERCENT_DOWNLOADED]=c;f[d.DROPPED_FRAMES]=b;l(f)};this.reportVideoSoundOn=function(a,c){var b=k(e.VIDEO_SOUND_ON);b[d.VIDEO_CURRENT_TIME_MS]=a;b[d.SOUND_TOGGLE_METHOD]=c;l(b)};this.reportVideoSoundOff=function(a,c){var b=k(e.VIDEO_SOUND_OFF);b[d.VIDEO_CURRENT_TIME_MS]=
a;b[d.SOUND_TOGGLE_METHOD]=c;l(b)};this.reportVideoClicked=function(a){var c=k(e.VIDEO_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportProductClicked=function(a){var c=k(e.PRODUCT_CLICKED);a!==p&&(c[d.VIDEO_CURRENT_TIME_MS]=a);l(c)};this.reportProductTitleClicked=function(){var a=k(e.PRODUCT_TITLE_CLICKED);l(a)};this.reportProductReviewCountClicked=function(){var a=k(e.PRODUCT_REVIEW_COUNT_CLICKED);l(a)};this.reportProductPriceClicked=function(){var a=k(e.PRODUCT_PRICE_CLICKED);l(a)};this.reportLinkClicked=
function(a){var c=k(e.LINK_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportCallToActionClicked=function(a){var c=k(e.CALL_TO_ACTION_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportHeadlineClicked=function(a){var c=k(e.HEADLINE_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportImageClicked=function(a){var c=k(e.IMAGE_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportStoreIngressClicked=function(a){var c=k(e.STORE_INGRESS_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportBlankScreenLoadFailure=
function(){var a=k(e.BLANK_SCREEN_LOAD_FAILURE);l(a)};this.reportPlaybackFailedToStartAfterPlay=function(){var a=k(e.PLAYBACK_FAILED_TO_START_AFTER_PLAY);l(a)};this.reportAudioToggleIconDisplayed=function(){var a=k(e.AUDIO_TOGGLE_ICON_DISPLAYED);l(a)};this.reportPlayButtonShown=function(){var a=k(e.PLAY_BUTTON_SHOWN);l(a)};this.reportPlayButtonClicked=function(a){var c=k(e.PLAY_BUTTON_CLICKED);c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportDurationTickerDisplayed=function(a){var c=k(e.VIDEO_DURATION_TICKER_SHOWN);
c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportVideoAborted=function(a){var c=k(e.VIDEO_ABORTED);c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportVideoSuspended=function(a){var c=k(e.VIDEO_SUSPENDED);c[d.VIDEO_CURRENT_TIME_MS]=a;l(c)};this.reportVideoPlayPromiseRejected=function(a){var c=k(e.VIDEO_PLAY_PROMISE_REJECTED);c[d.ERROR_MESSAGE]=a;l(c)};this.reportVideoPlayPromiseNotSupported=function(){var a=k(e.VIDEO_PLAY_PROMISE_NOT_SUPPORTED);l(a)};this.reportDebugInfoCopiedSuccess=function(a){var c=k(e.DEBUG_INFO_COPIED_SUCCESS);
c[d.DEBUG_INFO_CONTENT]=a;l(c)};this.reportDebugInfoCopiedFailure=function(a){var c=k(e.DEBUG_INFO_COPIED_FAILURE);c[d.ERROR_MESSAGE]=a;l(c)};this.reportDebugInfoCopiedMessageShown=function(){var a=k(e.DEBUG_INFO_COPIED_MESSAGE_SHOWN);l(a)};this.reportDebugInfoCopiedMessageHidden=function(){var a=k(e.DEBUG_INFO_COPIED_MESSAGE_HIDDEN);l(a)};this.reportViewMetricsPostRequestFailure=c;this.reportViewMetricsVideoViewed=function(a){var c=k(e.VM_VIDEO_VIEWED);l(c);this.emitViewMetrics(a,b.VIEWED)};this.reportViewMetricsVideoProgressFiveSeconds=
function(a){var c=k(e.VM_VIDEO_PROGRESS_FIVE_SECONDS);l(c);this.emitViewMetrics(a,b.PROGRESS_FIVE_SECONDS)};this.reportViewMetricsVideoFirstQuartile=function(a){var c=k(e.VM_VIDEO_FIRST_QUARTILE);l(c);this.emitViewMetrics(a,b.FIRST_QUARTILE)};this.reportViewMetricsVideoMidpoint=function(a){var c=k(e.VM_VIDEO_MIDPOINT);l(c);this.emitViewMetrics(a,b.MIDPOINT)};this.reportViewMetricsVideoThirdQuartile=function(a){var c=k(e.VM_VIDEO_THIRD_QUARTILE);l(c);this.emitViewMetrics(a,b.THIRD_QUARTILE)};this.reportViewMetricsVideoComplete=
function(a){var c=k(e.VM_VIDEO_COMPLETE);l(c);this.emitViewMetrics(a,b.COMPLETE)};this.reportViewMetricsVideoUnmute=function(a){var c=k(e.VM_VIDEO_UNMUTE);l(c);this.emitViewMetrics(a,b.UNMUTE)};this.emitViewMetrics=function(a,b){a===p?c(b,"instrumentationPixelUrl is undefined"):fetch(a,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({v:{def:"iab",event:b}})}).then(function(a){if(!a.ok&&0!==a.status)throw Error(a.status+" "+a.statusText);}).catch(function(a){c(b,
a.message)})};this.getDebugMetricAttributes=function(){var c=u[d.SEARCH_QUERY],b=u[d.ADVERTISER_ID],k=u[d.CAMPAIGN_ID],l=u[d.METRICS_IDENTIFIER],e=u[d.CLIENT_ID],f;a:{if(a&&(f=a.split("-")[1])){f=f.split(".")[0].toUpperCase();break a}f="UNKNOWN"}return{searchQuery:c,advertiserId:b,campaignId:k,metricsIdentifier:l,clientId:e,region:f,stage:u[d.STAGE]}}}function f(){function a(){var a=[];a[d.METRICS_IDENTIFIER]=c;a[d.ADVERTISER_ID]=b;a[d.CAMPAIGN_ID]=l;a[d.WIDGET_INDEX]=h;a[d.DEVICE_ENV]=m;a[d.DEVICE_OS]=
n;a[d.DEVICE_TYPE]=q;a[d.DEVICE_PLATFORM_VERSION]=A;a[d.DEVICE_MODEL]=B;a[d.DEVICE_MAKE]=r;a[d.APP_VERSION]=t;a[d.STAGE]=C;a[d.SLOT_ID]=e;a[d.SEARCH_QUERY]=f;a[d.CLIENT_ID]=D;a[d.WEBLABS]=E;a[d.LANGUAGE]=F;a[d.VIDEO_PREVIEW_IMAGE_SRC]=G;a[d.VIDEO_SRC]=H;a[d.HAS_AUDIO]=I;a[d.STORE_NAME]=J;a[d.STORE_URL]=K;a[d.STORE_CTA]=L;a[d.MARKETPLACE_ID]=M;a[d.WIDGET_TYPE]=N;a[d.WIDGET_GROUP_ID]=O;a[d.PAGE_TYPE]=P;a[d.PAGE_NUMBER]=y;return a}var c=p,b=p,l=p,e=p,f=p,h=p,m=p,n=p,q=p,A=p,B=p,r=p,t=p,C=p,D=p,E=p,F=
p,G=p,H=p,I=p,J=p,K=p,L=p,M=p,Q="https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events",z=p,N=p,O=p,P=p,y=p,x=p;this.withSearchQuery=function(a){f=a;return this};this.withMetricsIdentifier=function(a){c=a;return this};this.withAdvertiserId=function(a){b=a;return this};this.withCampaignId=function(a){l=a;return this};this.withSlotId=function(a){e=a;return this};this.withWidgetIndex=function(a){h=a;return this};this.withDeviceEnv=function(a){m=a;return this};this.withDeviceOs=function(a){n=
a;return this};this.withDeviceType=function(a){q=a;return this};this.withDevicePlatformVersion=function(a){A=a;return this};this.withDeviceModel=function(a){B=a;return this};this.withDeviceMake=function(a){r=a;return this};this.withAppVersion=function(a){t=a;return this};this.withStage=function(a){C=a;return this};this.withClientId=function(a){D=a;return this};this.withWeblabs=function(a){E=a;return this};this.withLanguage=function(a){F=a;return this};this.withVideoPreviewImageSrc=function(a){G=a;
return this};this.withVideoSrc=function(a){H=a;return this};this.withHasAudio=function(a){I=a;return this};this.withStoreName=function(a){J=a;return this};this.withStoreUrl=function(a){K=a;return this};this.withStoreCta=function(a){L=a;return this};this.withMarketplaceId=function(a){M=a;return this};this.withSushiSourceGroupEndpoint=function(a){Q=a||"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events";return this};this.withAutomatedTestMetricsClient=function(a){z=a;return this};
this.withWidgetType=function(a){N=a;return this};this.withWidgetGroupId=function(a){O=a;return this};this.withPageType=function(a){P=a;return this};this.withPageNumber=function(a){if(a){var c=parseInt(a,10);if(!isNaN(c))return y=c,this}y=a;return this};this.build=function(){x=new g(Q);z!==p&&x.setAutomatedTestMetricsClient(z);x.setDefaultEventAttributes(a());return x}}var b={VIEWED:"VIEWED",PROGRESS_FIVE_SECONDS:"PROGRESS_5_SEC",FIRST_QUARTILE:"FIRST_QUARTILE",MIDPOINT:"MIDPOINT",THIRD_QUARTILE:"THIRD_QUARTILE",
COMPLETE:"COMPLETE",UNMUTE:"UNMUTE"},e={ACE_VIDEO_RESPONSE_RECEIVED:"AceVideoResponseReceived",AD_BLOCK_DETECTED:"AdBlockDetected",AD_RENDER_SUPPRESSED:"AdRenderSuppressed",AUDIO_TOGGLE_ICON_DISPLAYED:"AudioToggleIconDisplayed",BLANK_SCREEN_LOAD_FAILURE:"BlankScreenLoadFailure",CALL_TO_ACTION_CLICKED:"CallToActionClicked",AD_FEEDBACK_KEYWORD_ENCODING_FAILURE:"AdFeedbackKeywordEncodingFailure",AD_FEEDBACK_LOAD_FAILED:"AdFeedbackLoadFailed",AD_FEEDBACK_LOAD_FAILED_FROM_ERR:"AdFeedbackLoadFailedFromErr",
AD_FEEDBACK_LOAD_SUCCEEDED:"AdFeedbackLoadSucceeded",AD_FEEDBACK_POPOVER_OPENED:"AdFeedbackPopoverOpened",DEBUG_INFO_COPIED_SUCCESS:"DebugInfoCopiedSuccess",DEBUG_INFO_COPIED_FAILURE:"DebugInfoCopiedFailure",DEBUG_INFO_COPIED_MESSAGE_SHOWN:"DebugInfoCopiedMessageShown",DEBUG_INFO_COPIED_MESSAGE_HIDDEN:"DebugInfoCopiedMessageHidden",HEADLINE_CLICKED:"HeadlineClicked",IMAGE_CLICKED:"ImageClicked",LINK_CLICKED:"LinkClicked",MISSING_VIDEO_FUNCTION:"MissingVideoFunction",NO_VIDEO_SRC_ON_ELEMENT:"NoVideoSrcOnElement",
PLAY_BUTTON_CLICKED:"PlayButtonClicked",PLAY_BUTTON_SHOWN:"PlayButtonShown",PLAYBACK_COMPLETED:"PlaybackCompleted",PREVIEW_IMAGE_LOAD_FAILURE:"PreviewImageLoadFailure",PREVIEW_IMAGE_LOAD_SUCCESS:"PreviewImageLoadSuccess",PRODUCT_CLICKED:"ProductClicked",PRODUCT_TITLE_CLICKED:"ProductTitleClicked",PRODUCT_REVIEW_COUNT_CLICKED:"ProductReviewCountClicked",PRODUCT_PRICE_CLICKED:"ProductPriceClicked",STORE_INGRESS_CLICKED:"StoreIngressClicked",TIME_TO_FIRST_FRAME:"TimeToFirstFrame",TIME_WAITING_FOR_SCRIPT_TO_EXECUTE:"TimeWaitingForScriptToExecute",
TIME_WAITING_FOR_SCRIPT_TO_EXECUTE_FAILURE:"TimeWaitingForScriptToExecuteFailure",VIDEO_BUFFERING_ENDED:"VideoBufferingEnded",VIDEO_BUFFERING_STARTED:"VideoBufferingStarted",VIDEO_CLICKED:"VideoClicked",VIDEO_DOMAIN_VERIFICATION_FAILURE:"VideoDomainVerificationFailure",VIDEO_DURATION_PLAYED:"VideoDurationPlayed",VIDEO_DURATION_TICKER_SHOWN:"VideoDurationTickerShown",VIDEO_OFF_SCREEN:"VideoOffScreen",VIDEO_ON_SCREEN:"VideoOnScreen",VIDEO_PAUSED:"VideoPaused",VIDEO_PAUSED_INITIATED:"VideoPausedInitiated",
VIDEO_PLAYBACK_FAILURE:"VideoPlaybackFailure",VIDEO_PLAYBACK_INITIATED:"VideoPlaybackInitiated",VIDEO_PLAYBACK_STARTED:"VideoPlaybackStarted",VIDEO_READY_FOR_PLAYBACK:"VideoReadyForPlayback",VIDEO_SOUND_OFF:"VideoSoundOff",VIDEO_SOUND_ON:"VideoSoundOn",VIDEO_VIEW:"VideoView",PLAYBACK_FAILED_TO_START_AFTER_PLAY:"PlaybackFailedToStartAfterPlay",VIDEO_ABORTED:"VideoAborted",VIDEO_SUSPENDED:"VideoSuspended",VIDEO_PLAY_PROMISE_REJECTED:"VideoPlayPromiseRejected",VIDEO_PLAY_PROMISE_NOT_SUPPORTED:"VideoPlayPromiseNotSupported",
SLIDESHOW_WIDGET_RESPONSE_RECEIVED:"SlideshowWidgetResponseReceived",SLIDESHOW_CLICKED:"SlideshowClicked",SLIDESHOW_SWIPED:"SlideshowSwiped",SLIDESHOW_ON_SCREEN:"SlideshowOnScreen",SLIDESHOW_OFF_SCREEN:"SlideshowOffScreen",SLIDESHOW_LOOP:"SlideshowLoop",SLIDESHOW_LOAD_COMPLETED:"SlideshowLoadCompleted",SLIDESHOW_LOAD_FAILED:"SlideshowLoadFailed",SLIDESHOW_IMAGE_LOAD_ERROR:"SlideshowImageLoadError",SLIDESHOW_IMAGE_LOAD_SUCCESS:"SlideshowImageLoadSuccess",VM_VIDEO_VIEWED:"ViewMetricsVideoViewed",VM_VIDEO_PROGRESS_FIVE_SECONDS:"ViewMetricsVideoProgressFiveSeconds",
VM_VIDEO_FIRST_QUARTILE:"ViewMetricsVideoFirstQuartile",VM_VIDEO_MIDPOINT:"ViewMetricsVideoMidpoint",VM_VIDEO_THIRD_QUARTILE:"ViewMetricsVideoThirdQuartile",VM_VIDEO_COMPLETE:"ViewMetricsVideoComplete",VM_VIDEO_UNMUTE:"ViewMetricsVideoUnmute",VM_POST_FAILURE:"ViewMetricsPostFailure"},d={APP_VERSION:"appVersion",CLIENT_ID:"clientId",SEARCH_QUERY:"searchQuery",CONTINUOUS_PLAYBACK_DURATION_MS:"continuousPlaybackDurationMs",DEVICE_MAKE:"deviceMake",DEVICE_MODEL:"deviceModel",DEVICE_ENV:"deviceEnv",DEVICE_OS:"deviceOs",
DEVICE_TYPE:"deviceType",DEVICE_PLATFORM_VERSION:"devicePlatformVersion",DEBUG_INFO_CONTENT:"debugInfoContent",DROPPED_FRAMES:"droppedFrames",ERROR_MESSAGE:"errorMessage",ERROR_CODE:"errorCode",EVENT_TYPE:"eventType",HAS_AUDIO:"hasAudio",LOAD_TIME_MS:"loadTimeMs",MARKETPLACE_ID:"marketplaceId",METRICS_SEQUENCE_NUMBER:"metricsSequenceNumber",METRICS_IDENTIFIER:"metricsIdentifier",ADVERTISER_ID:"advertiserId",CAMPAIGN_ID:"campaignId",NETWORK_TYPE:"networkType",PAGE_TYPE:"pageType",PAGE_NUMBER:"pageNumber",
PERCENT_DOWNLOADED:"percentDownloaded",RETRY_COUNT:"retryCount",LANGUAGE:"language",SLOT_ID:"slotId",SOUND_TOGGLE_METHOD:"soundToggleMethod",STAGE:"stage",STATUS_CODE:"statusCode",STORE_CTA:"storeCta",STORE_NAME:"storeName",STORE_URL:"storeUrl",TIME_ON_SCREEN_MS:"timeOnScreenMs",USER_AGENT:"userAgent",VIDEO_BOUNDRY_CROSSED_TIME_MS:"videoBoundaryCrossedTimeMs",VIDEO_CURRENT_TIME_MS:"videoCurrentTimeMs",VIDEO_SRC:"videoSrc",VIDEO_PREVIEW_IMAGE_SRC:"videoPreviewImageSrc",VIDEO_TOTAL_LENGTH_MS:"videoTotalLengthMs",
WAS_BUFFERING:"wasBuffering",WIDGET_INDEX:"widgetIndex",WEBLABS:"weblabs",WIDGET_TYPE:"widgetType",WIDGET_GROUP_ID:"widgetGroupId",SLIDESHOW_LOOP_COUNT:"slideshowLoopCount",SLIDESHOW_CURRENT_INDEX:"slideshowCurrentIndex",SLIDESHOW_TOTAL_SLIDES:"slideshowTotalSlides",VIEW_METRICS_FAILURE:"viewMetricsFailure"},m={n:1};return{EVENT_TYPES:e,SOUND_TOGGLE_OFF_CAUSE:{ICON_TAP:"IconTap",VIDEO_OFF_SCREEN:"VideoOffScreen"},SOUND_TOGGLE_ON_CAUSE:{ICON_TAP:"IconTap"},DEFAULT_SUSHI_SOURCE_GROUP_ENDPOINT:"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events",
builder:function(){return new f}}});t.register("sbv-transportation-client",function(){var h=function(){},n=function(){function f(){if(r.XDomainRequest){var b=new r.XDomainRequest;b.onerror=h;b.ontimeout=h;b.onprogress=h;b.onload=h;b.timeout=0;return b}if(r.XMLHttpRequest){b=new r.XMLHttpRequest;if(!("withCredentials"in b))throw"";return b}return null}return{send:function(b,e){if(e&&b){var d=f();if(!d)throw"";d.open("POST",b,!0);d.setRequestHeader&&d.setRequestHeader("Content-type","text/plain");d.send(e)}},
isSupported:!0}}(),g=function(){return{send:function(f,b){if(f&&b&&!r.navigator.sendBeacon(f,b))throw"";},isSupported:!!r.navigator.sendBeacon}}();return{ajaxClient:n,beaconClient:g}});t.when("sbv-transportation-client","sbv-event-manager").register("sbv-sushi-client",function(h,n){function g(b,e,d){this.endpoint=e;this.window=b;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=this.batchSize=
0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=h;var g=this;this.compressor=function(a){function b(k){if(k)switch(typeof k){case "number":return!(isNaN(k)||Infinity===k)&&k.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return k.length>a.dictionaryIndex.length;default:return!0}return!1}function d(b){a.eventsDictionary[b]="#"+a.dictionaryIndex++;a.reverseEventsDictionary[a.eventsDictionary[b]]=
b;return a.eventsDictionary[b]}function e(g){if(b(g)){var h=0;g instanceof Array?h=2:g instanceof Function?h=null:g instanceof Object&&(h=1);switch(h){case 0:return a.eventsDictionary[g]?a.eventsDictionary[g]:d(g);case 2:for(var m=[],h=0;h<g.length;h++)m[h]=e(g[h]);return m;case 1:h={};for(m in g)Object.prototype.hasOwnProperty.call(g,m)&&(h[a.eventsDictionary[m]?a.eventsDictionary[m]:d(m)]=-1===f.indexOf(m)?e(g[m]):g[m]);return h}}return g}return{compressData:e,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},
events:a.eventsQueue})}}}(this);this.onBeforeUnload=function(){!0!==g.unloadHandlerCalled&&(g.flush(g,!0),g.unloadHandlerCalled=!0)};this.stringify=function(a){try{return JSON.stringify(a)}catch(b){}return null};this.resetBatch=function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0};this.sendWithClient=function(a){if(null==this.endpoint||""===this.endpoint)this.ueCount("SushiClientEndpointMissing");
else{if(a.isSupported){var b=this.compressor.buildPOSTObject();return a.send(this.endpoint,b)}throw"";}};this.sendWithPriority=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];try{return this.sendWithClient(b)}catch(d){}}return null};this.flush=function(a,b){a.eventsQueue.length&&(b||!1!==a.window.navigator.onLine)&&(b=a.eventsQueue.length,a.sendWithPriority(a.transportationClient.beaconClient,a.transportationClient.ajaxClient),a.resetBatch(),a.ueCount("EventsSent",b))};this.startHighPriorityQueueTimer=
function(){0===this.highPriorityFlushInterval?this.flush(this,!1):this.highPriorityTimer||(this.highPriorityTimer=setTimeout(this.flush,this.highPriorityFlushInterval,this,!1))};this.startLowPriorityQueueTimer=function(){this.lowPriorityTimer||(this.lowPriorityTimer=setTimeout(this.flush,this.lowPriorityFlushInterval,this,!1))};this.generateMessageId=function(a,b){return a+"-"+b+"-"+this.eventSequence};this.getCurrentISODate=function(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?
a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};this.decorateEvent=function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(a){a.n?this.startHighPriorityQueueTimer():this.startLowPriorityQueueTimer()};
this.encodeEvent=function(a,b,d){b=b.length;(499===this.eventsQueue.length||524288<this.batchSize+b)&&this.flush(this,!0);this.batchSize+=b;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(d)};this.addEvent=function(a,b){this.decorateEvent(a,b);var d=this.stringify(a);return d?(this.encodeEvent(a,d,b),!0):!1};this.isValidAPIParam=function(a,b){return a&&-1<a.constructor.toString().indexOf(b)};this.isMaxCallsReached=function(){this.eventSequence++;1E3<this.eventSequence&&
this.ueCount("SushiClientMaxCallsReached");return 1E3<this.eventSequence};this.isValidAPICall=function(a){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")};this.ueCount=function(a,b){if("undefined"!==typeof ue&&ue&&ue.count)return b=0===b?0:b||(ue.count(d+":"+a)||0)+1,ue.count(d+":"+a,b),b};this.processEvent=function(a,b){var d=this.unloadHandlerCalled=!1;this.options=b||{};this.isValidAPICall(a)&&(d=this.addEvent(a,this.options));d?this.ueCount("ClientEventsSuccess"):this.ueCount("ClientEventsFailed");
return d};n.addEventListener(r,"beforeunload",100,this.onBeforeUnload);n.addEventListener(document,"visibilitychange",100,this.onBeforeUnload);n.addEventListener(r,"blur",100,this.onBeforeUnload);n.addEventListener(r,"pagehide",100,this.onBeforeUnload);r.app||(r.app={});var a=r.app.willDisappear;r.app.willDisappear=function(){a&&a();g.onBeforeUnload()}}var f=["messageId","timestamp"];return{newClient:function(b,e,d){return new g(b,e,d)}}});t.when("A").register("sbv-automated-test-metrics-client",
function(h){function n(g){this.videoSingleProduct=g;this.processEvent=function(f){var b=this.videoSingleProduct.data("AUTOMATED_TEST_METRICS_ATTR");b===p&&(b=[]);b.push(f);this.videoSingleProduct.data("AUTOMATED_TEST_METRICS_ATTR",b)}}return{newClient:function(g){return new n(g)}}});t.when("A").register("sbv-platform-compatibility",function(h){function n(){return h.capabilities.isAmazonApp&&h.capabilities.ios}var g=null,f=navigator;return{isIOS:function(){return h.capabilities.ios},isIOSWebView:n,
canUseViewWillDisappearToReportMetrics:function(){if(!n()||!g)return!1;var b=g.split(".");if(2>b.length)return!1;var e=parseInt(b[0]),b=parseInt(b[1]);return 13<e||13===e&&18<=b},setAppVersion:function(b){g=b},isSafari:function(){return!(!f.vendor||!f.vendor.match(/apple/i))},isWebView:function(){return h.capabilities.isAmazonApp},_setNavigator:function(b){f=b}}});t.when("A").register("sbv-single-product",function(h){function n(){this.init=function(g,f,b){h.$(g).find("a").click(function(){var d=b&&
b.getVideoCurrentTimeMs&&b.getVideoCurrentTimeMs();f.reportProductClicked(d)});var e=h.$(g).find(".sbv-product-img");e.data("imgsrc")&&e.attr("src",e.data("imgsrc"));e=h.$(g).find(".faceout-product-title");h.$(e).find("a").click(function(){f.reportProductTitleClicked()});e=h.$(g).find(".faceout-product-review");h.$(e).find("a").click(function(){f.reportProductReviewCountClicked()});g=h.$(g).find(".faceout-product-price");h.$(g).find("a").click(function(){f.reportProductPriceClicked()})}}return{loadAdFeedback:function(g){try{var f=
document.querySelector(".sbv-ad-feedback"),b=h.$(".sbv-sponsored-label");if(f){var e=h.$(f).data("slotname"),d=h.$(f).data("searchkeywords");"true"===h.$(f).data("keywordEncodingFailed")&&g.reportAdFeedbackKeywordEncodingFailure();var m=JSON.stringify({adPlacementMetaData:{adElementId:"video_single_product",pageType:"Search",slotName:e,pageUrl:"",searchTerms:d},adCreativeMetaData:{adNetwork:"aax",adProgramId:1010,adImpressionId:"",adCreativeId:"",adId:""}}),a=r.location.protocol+"//"+r.location.hostname+
"/gp/aq-feedback/lazyLoad/handler/af-link-handler.html?pl\x3d"+encodeURIComponent(m),c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var a=JSON.parse(c.responseText);if(a&&"ok"===a.status){"html"in a&&a.html&&(f.innerHTML=a.html,g.reportAdFeedbackLoadSucceeded(c.status));if("script"in a&&a.script){var d=document.createElement("script");d.type="text/javascript";d.innerHTML=a.script;f.appendChild(d)}h.$(".sbv-ad-feedback a").click(function(){g.reportAdFeedbackPopoverOpened()})}else b.removeClass("aok-hidden"),
g.reportAdFeedbackLoadFailed(c.status)}};c.open("GET",a,!0);c.send()}}catch(k){h.$(".sbv-sponsored-label").removeClass("aok-hidden"),e=4E3<k.message.length?k.message.substring(0,3997)+"...":k.message,g.reportAdFeedbackLoadFailedFromErr(e)}},initialize:function(g,f,b){(new n).init(g,f,b);this.loadAdFeedback(f)}}});t.when("A").register("sbv-store-ingress",function(h){function n(){this.init=function(g,f,b){h.$(g).find("a").click(function(){f.reportStoreIngressClicked(b&&b.getVideoCurrentTimeMs())})}}
return{initialize:function(g,f,b){(new n).init(g,f,b)}}});t.register("sbv-retryable",function(){return function(h,n,g,f){function b(){0<m?(m--,e()):(a.cancel(),d())}var e=h,d=f,m=n,a=this;this._init=function(){e();this._intervalID=setInterval(b,g)};this.cancel=function(){clearInterval(this._intervalID)};this._init()}});t.when("A","sbv-video-mixin").register("sbv-video",function(h,n){var g=function(){this.metricsManager=this.$muteClickRegion=this.$unmuteIcon=this.$muteIcon=this.videoPlayer=null;this.onScreenStartTime=
0;this.videoTag=null};h.mixin(g.prototype,n);return{initialize:function(f,b,e){var d=new g;d.init(f,b,e,!1);return d}}});t.when("A","sbv-viewability-manager","sbv-metrics-manager","sbv-video-player-builder","sbv-platform-compatibility","3p-promise","sbv-adblock-detector").register("sbv-video-mixin",function(h,n,g,f,b,e,d){var m=0;return{load:function(){this.videoPlayer.load()},toggleAudio:function(){var a=!this.videoPlayer.isMuted();this.setMuteStatus(a,a?g.SOUND_TOGGLE_OFF_CAUSE.ICON_TAP:g.SOUND_TOGGLE_ON_CAUSE.ICON_TAP)},
updateMuteClickRegionAriaPressed:function(){var a="true"===this.$muteClickRegion.attr("aria-pressed");this.$muteClickRegion.attr("aria-pressed",!a)},setMuteButtonStatus:function(a){var c=this.$muteIcon,b=this.$unmuteIcon;a?(c.css("fill-opacity",1),b.css("fill-opacity",0)):(c.css("fill-opacity",0),b.css("fill-opacity",1))},setMuteStatus:function(a,c){var b=this.videoPlayer,d=this.metricsManager;this.setMuteButtonStatus(a);a?(b.mute(),d&&d.reportVideoSoundOff(b.getCurrentTimeMs(),c)):(b.unmute(),d&&
d.reportVideoSoundOn(b.getCurrentTimeMs(),c))},initPreviewImage:function(){this.videoTag.setAttribute("poster",this.videoTag.dataset.videopreviewsrc)},displayMuteClickRegion:function(a){a?(this.$muteClickRegion.addClass("aok-block"),this.$muteClickRegion.removeClass("aok-hidden"),this.metricsManager.reportAudioToggleIconDisplayed()):(this.$muteClickRegion.addClass("aok-hidden"),this.$muteClickRegion.removeClass("aok-block"))},displayDurationTicker:function(a){this.$durationTicker&&this.$durationTicker.length&&
(a?(this.$durationTicker.removeClass("aok-hidden"),this.metricsManager.reportDurationTickerDisplayed()):this.$durationTicker.addClass("aok-hidden"))},showPlayButton:function(a){a?(this.$playButtonClickRegion.removeClass("aok-hidden"),this.metricsManager.reportPlayButtonShown()):(this.$playButtonClickRegion.addClass("aok-hidden"),n.registerElement(this.videoTag,.5,!0,!0,!0,this.onFiftyPercentViewability.bind(this)),n.registerElement(this.videoTag,.01,!0,!0,!0,this.onOnePercentViewability.bind(this)))},
showDebugInfoCopiedHint:function(a){a?(this.$debugInfoCopiedHint.addClass("aok-block"),this.$debugInfoCopiedHint.removeClass("aok-hidden"),this.metricsManager.reportDebugInfoCopiedMessageShown()):(this.$debugInfoCopiedHint.addClass("aok-hidden"),this.$debugInfoCopiedHint.removeClass("aok-block"),this.metricsManager.reportDebugInfoCopiedMessageHidden())},copyDebugInfoToClipboard:function(){var a=this,c=this.metricsManager;if(navigator&&navigator.clipboard&&navigator.clipboard.writeText){var b=JSON.stringify(this.metricsManager.getDebugMetricAttributes());
navigator.clipboard.writeText(b).then(function(){c.reportDebugInfoCopiedSuccess(b);a.showDebugInfoCopiedHint(!0);setTimeout(function(){a.showDebugInfoCopiedHint(!1)},3E3)}).catch(function(a){c.reportDebugInfoCopiedFailure(a.message)})}else c.reportDebugInfoCopiedFailure("No Supports Clipboard API")},manualPlay:function(){var a=this.videoPlayer,c=this.metricsManager;this.showPlayButton(!1);a.play();c.reportPlayButtonClicked(a.getCurrentTimeMs());c.reportVideoPlaybackInitiated(a.getCurrentTimeMs())},
onOnePercentViewability:function(a,c){a=this.videoPlayer;var b=this.metricsManager;c?(this.onScreenStartTime=this.getCurrentTimeMs(),b.reportVideoOnScreen(a.getPercentDownloaded())):(a.isMuted()||this.setMuteStatus(!0,g.SOUND_TOGGLE_OFF_CAUSE.VIDEO_OFF_SCREEN),c=this.getCurrentTimeMs()-this.onScreenStartTime,b.reportVideoOffScreen(c,0!=this.videoBufferingStartTime,a.getCurrentTimeMs()),this.onScreenStartTime=0,a.seekToStart(),a.resetContinuousPlaybackDurationMs())},onFiftyPercentViewability:function(a,
c){a=this.videoPlayer;var d=this.metricsManager;c?(a.play(),a.resetContinuousPlaybackDurationMs(),d.reportVideoPlaybackInitiated(a.getCurrentTimeMs()),this.viewSessionStartTime=this.getCurrentTimeMs()):(a.pause(),d.reportVideoPauseInitiated(a.getCurrentTimeMs()),d.reportVideoView(a.getContinuousPlaybackDurationMs(),b.isIOSWebView()),a.resetContinuousPlaybackDurationMs(),this.viewSessionBufferingDuration=0)},onVideoReadyForPlayback:function(a,c,b,d){this.metricsManager.reportVideoReadyForPlayback(a,
c,b,d);this.onDurationLeftUpdated(0,d)},onVideoPlaybackFailure:function(a,c,b){this.displayMuteClickRegion(!1);this.displayDurationTicker(!1);this.metricsManager.reportVideoPlaybackFailure(a,b,c)},onVideoPlaying:function(a,c,b){this.displayMuteClickRegion(!0);this.displayDurationTicker(!0);this.metricsManager.reportVideoPlaybackStarted(a,c,b)},onVideoPlaybackPaused:function(a,c,b){this.displayMuteClickRegion(!1);this.displayDurationTicker(!1);this.metricsManager.reportVideoPaused(a,c,b)},onVideoBufferingStarted:function(a,
c,b){var d=this.metricsManager;this.videoBufferingStartTime=this.getCurrentTimeMs();d.reportVideoBufferingStarted(a,c,b)},getCurrentTimeMs:function(){return Date.now()},onVideoBufferingEnded:function(a,c,b){var d=this.metricsManager;this.videoBufferingStartTime=0;d.reportVideoBufferingEnded(a,c,b)},onTimeToFirstFrame:function(a,c,b){this.metricsManager.reportTimeToFirstFrame(a,c,b)},onPlaybackCompleted:function(a,c){this.metricsManager.reportPlaybackCompleted(a,c)},onDurationPlayed:function(a,c,b){this.metricsManager.reportVideoDurationPlayed(a,
c,b)},onContinuousDurationPlayed:function(a){this.metricsManager.reportVideoView(a,!0)},logClick:function(){var a=this.videoPlayer,c=this.metricsManager;c&&c.reportVideoClicked(a.getCurrentTimeMs())},getVideoCurrentTimeMs:function(){return this.videoPlayer.getCurrentTimeMs()},onVideoAborted:function(a){var c=this.metricsManager;c&&c.reportVideoAborted(a)},onVideoSuspended:function(a){var c=this.metricsManager;c&&c.reportVideoSuspended(a)},onDurationLeftUpdated:function(a,c){this.$durationTickerSeconds&&
this.$durationTickerSeconds.length&&(a=("0"+Math.floor((c-a)/1E3)).slice(-2),!isNaN(a)&&isFinite(a)&&this.$durationTickerSeconds.html(a))},onVideoPlayPromiseRejected:function(a){var c=this.metricsManager;b.isIOS()&&null!==a&&""!==a&&a.startsWith("NotAllowedError")&&this.showPlayButton(!0);c&&c.reportVideoPlayPromiseRejected(a)},onVideoPlayPromiseNotSupported:function(){var a=this.metricsManager;a&&a.reportVideoPlayPromiseNotSupported()},init:function(a,c,e,l){function g(a,c,b){q.onDurationPlayed(a,
c,b)}function r(a){q.onContinuousDurationPlayed(a)}function t(a,c){q.onOnePercentViewability(a,c)}function v(a,c){q.onFiftyPercentViewability(a,c)}function w(){q.load();n.registerElement(q.videoTag,.5,!0,!0,!0,v);n.registerElement(q.videoTag,.01,!0,!0,!0,t)}a=h.$(a);this.videoTag=a.find("video:first").get(0);var q=this;q.metricsManager=c;!l||this.videoTag!==p&&null!==this.videoTag&&this.videoTag.load!==p&&null!==this.videoTag.load?(q.initPreviewImage(),l=f.builder(this.videoTag).withVideoReadyForPlaybackHandler(function(a,
c,b,d){q.onVideoReadyForPlayback(a,c,b,d)}).withTimeToFirstFrameHandler(function(a,c,b){q.onTimeToFirstFrame(a,c,b)}).withVideoPlaybackFailureHandler(function(a,c,b){q.onVideoPlaybackFailure(a,c,b)}).withVideoPlayingHandler(function(a,c,b){q.onVideoPlaying(a,c,b)}).withVideoPlaybackPausedHandler(function(a,c,b){q.onVideoPlaybackPaused(a,c,b)}).withPlaybackCompletedHandler(function(a,c){q.onPlaybackCompleted(a,c)}).withVideoBufferingStartedHandler(function(a,c,b){q.onVideoBufferingStarted(a,c,b)}).withVideoBufferingEndedHandler(function(a,
c,b){q.onVideoBufferingEnded(a,c,b)}).withVideoPlayedToBoundaryHandler(2E3,g).withVideoPlayedToBoundaryHandler(15E3,g).withVideoPlaybackFailedAfterPlayErrorCallback(function(){c.reportPlaybackFailedToStartAfterPlay()}).withVideoAbortedHandler(function(a){q.onVideoAborted(a)}).withVideoSuspendedHandler(function(a){q.onVideoSuspended(a)}).withTimeUpdateHandler(function(a,c){q.onDurationLeftUpdated(a,c)}).withVideoPlayPromiseRejectedHandler(function(a){q.onVideoPlayPromiseRejected(a)}).withVideoPlayPromiseNotSupportedHandler(function(){q.onVideoPlayPromiseNotSupported()}),
b.isIOSWebView()&&!b.canUseViewWillDisappearToReportMetrics()&&(l=l.withVideoPlayedToContinuousBoundaryHandler(2E3,r)),l=l.build(),q.videoPlayer=l,a.find("a").click(function(){q.logClick()}),e=a.find('[data-itemid\x3d"sbv-video-mute-click-region"]'),q.$muteClickRegion=e,q.$muteIcon=a.find('[data-itemid\x3d"sbv-video-mute-icon"]'),q.$unmuteIcon=a.find('[data-itemid\x3d"sbv-video-unmute-icon"]'),q.setMuteButtonStatus(l.isMuted()),e.click(function(){q.updateMuteClickRegionAriaPressed();q.toggleAudio();
q.$debugInfoCopiedHint&&q.$debugInfoCopiedHint.length&&(m+=1,5===m&&(q.copyDebugInfoToClipboard(),m=0))}),e.keydown(function(a){if(" "===a.key||"Enter"===a.key||"Spacebar"===a.key)a.preventDefault(),q.updateMuteClickRegionAriaPressed(),q.toggleAudio()}),l=a.find(".sbv-duration-ticker-seconds"),q.$durationTickerSeconds=l,l=a.find(".sbv-duration-ticker-container"),q.$durationTicker=l,l=a.find('[data-itemid\x3d"sbv-video-play-click-region"]'),q.$playButtonClickRegion=l,l.click(function(){q.manualPlay()}),
a=a.find(".sbv-video-debug-info-copied-message-container"),q.$debugInfoCopiedHint=a,(a=d.init())?a.then(function(){navigator.onLine&&(q.load(),q.showPlayButton(!0),c.reportAdBlockDetected())}).catch(function(){w()}):w()):c.reportMissingVideoFunction(this.videoTag===p||null===this.videoTag?"videoTag is undefined":this.videoTag.outerHTML?this.videoTag.outerHTML:"load function is undefined and outerHTML is not supported")}}});t.when("A","sbv-slideshow-mixin").register("sbv-slideshow",function(h,n){var g=
function(){this.metricsManager=this.carousel=p;this.numOfSlides=this.currentSlideIndex=0};h.mixin(g.prototype,n);return{initialize:function(f,b){var e=new g;e.init(f,b);b.reportSlideshowLoadCompleted(e.numOfSlides);return e}}});t.when("A","a-carousel-framework","sbv-viewability-manager","sbv-metrics-manager").register("sbv-slideshow-mixin",function(h,n,g,f){var b=0,e=0,d=0,m=this,a=function(a,d){m.carousel===p?m.metricsManager.reportSlideshowLoadFailed(m.numOfSlides,"slideshow.carousel is undefined"):
d?(e=h.interval(function(){b+=1},1),m.metricsManager.reportSlideshowOnScreen(m.numOfSlides),c(!0)):(m.status="IDLE",m.metricsManager.reportSlideshowOffScreen(m.numOfSlides,b),clearInterval(e),b=0,c(!1))},c=function(a){a&&m.autoRotate===p?m.autoRotate=h.interval(function(){m.status="AUTO_PLAYING";m.carousel.gotoNextPage({accessibleSafe:!0})},2500):(d=0,m.autoRotate!==p&&(clearInterval(m.autoRotate),m.autoRotate=p))};return{onFiftyPercentViewability:a,autoPlay:c,init:function(b,e){var f=h.$(b),p=f.get(0);
m=this;m.metricsManager=e;n.onInit("sbv-slideshow-carousel",function(b){m.carousel=b;m.numOfSlides=m.carousel.getAttr("totalPages");m.status="IDLE";b=m.carousel.dom.$viewport;h.on("a:pan-horizontal:"+b[0].id,function(a){m.status="SWIPING";c(!1);a.ended&&c(!0)});b.bind(h.action.end,function(a){"SWIPING"===m.status&&m.metricsManager.reportSlideshowSwiped(m.numOfSlides);c(!0)});f.find("a").click(function(){m.metricsManager.reportSlideshowClicked(m.numOfSlides,m.currentSlideIndex)});h.on("a:carousel:sbv-slideshow-carousel:change:pageNumber",
function(a){var c=a.newValue-1;m.currentSlideIndex=c;var b=a.oldValue-1;0===c&&b===m.numOfSlides-1&&(d+=1,m.metricsManager.reportSlideshowLoop(m.numOfSlides,d));h.$(".sbv-slideshow-pagination-container").each(function(){h.$(this).children("ul").children("li:eq("+b+")").removeClass("a-selected");h.$(this).children("ul").children("li:eq("+c+")").addClass("a-selected")})});g.registerElement(p,.5,!0,!0,!0,a)});return this}}});"use strict";t.when("sbv-retryable","sbv-platform-compatibility").register("sbv-video-player-builder",
function(h,n){function g(b){var a=this,c=0,e=0;this._videoElement=b;this._onVideoBufferingEnded=this._onVideoBufferingStarted=this._onPlaybackCompleted=this._onPlaybackPaused=this._onVideoPlaying=this._onVideoPlaybackFailure=this._onTimeToFirstFrame=this._onVideoReadyForPlayback=p;this._lastOnTimeUpdateCurrentTimeMs=0;this._boundaryChecks=[];this._continuousDurationBoundaryChecks=[];this._retryable=null;this._registerEventListeners=function(){var b=a._videoElement;b.oncanplay=function(){return a._handleVideoReadyForPlaybackEvent()};
b.onerror=function(){!a._assetLoaded&&3>a._retryLoadCount?(a._retryLoadCount++,setTimeout(a._videoElement.load.bind(a._videoElement),2E3)):a._handleVideoPlaybackFailureEvent()};b.onplaying=function(){a._handleFirstFramePlayedEvent();a._playbackstate===d.BUFFERING&&a._onVideoBufferingEnded(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());a._playbackstate!==d.END&&a._onVideoPlaying(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());a._playbackstate=d.PLAYING};b.onpause=
function(){a._videoElement.currentTime!==a._videoElement.duration&&(a._playbackstate=d.PAUSED,a._onPlaybackPaused(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames()))};b.onended=function(){a._playbackstate=d.END;var b=a.getDurationMs();e+=b-c;c=0;a._onPlaybackCompleted(a.getDurationMs(),a.getDroppedFrames());a._playInternal()};b.onwaiting=function(){a._playbackstate=d.BUFFERING;a._onVideoBufferingStarted(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames())};b.ontimeupdate=
function(){a.cancelPlayRetryable();var c=a.getCurrentTimeMs(),b=a.getDurationMs(),d=a.getContinuousPlaybackDurationMs();a._continuousDurationBoundaryChecks.forEach(function(a){a.reportIfBoundaryCrossed(d)});a._boundaryChecks.forEach(function(b){b.reportIfBoundaryCrossed(a._lastOnTimeUpdateCurrentTimeMs,c,a.getDurationMs(),a.getPercentDownloaded(),a.getDroppedFrames())});a._lastOnTimeUpdateCurrentTimeMs=c;a._onTimeUpdated(c,b)};b.onabort=function(){var c=a.getCurrentTimeMs();a._onAborted(c)};b.onsuspend=
function(){var c=a.getCurrentTimeMs();a._onSuspended(c)}};this._getDateTime=function(){return Date.now()};this._playInternal=function(){a._initiatedPlayTime||(a._initiatedPlayTime=a._getDateTime());var c=a._videoElement.play();c?c.catch(function(c){var b="Unknown";"string"===typeof c?b=c:c instanceof DOMException&&(b=c.name+": "+c.message);a._onVideoPlayPromiseRejected(b)}):a._onVideoPlayPromiseNotSupported()};this.cancelPlayRetryable=function(){a._retryable&&(a._retryable.cancel(),a._retryable=null)};
this._init=function(){a._playbackstate=d.INITIATED;a._loadStartTime=a._getDateTime();a._assetLoaded=!1;a._retryLoadCount=0;a._firstFramePlayed=!1;a._initiatedPlayTime=p};this._init();this._registerEventListeners();this._handleVideoReadyForPlaybackEvent=function(){if(!a._assetLoaded){var c=a._getDateTime()-a._loadStartTime;a._onVideoReadyForPlayback(c,a._retryLoadCount,a.getPercentDownloaded(),a.getDurationMs());a._assetLoaded=!0}};this._handleFirstFramePlayedEvent=function(){if(!a._firstFramePlayed){var c=
a._getDateTime()-a._initiatedPlayTime;a._onTimeToFirstFrame(c,a.getPercentDownloaded(),a.getDroppedFrames());a._firstFramePlayed=!0}};this._handleVideoPlaybackFailureEvent=function(){var c=a._videoElement;if(c.error){var b="UNKNOWN";if(c.error.code)switch(c.error.code){case 1:b="MEDIA_ERR_ABORTED";break;case 2:b="MEDIA_ERR_NETWORK";break;case 3:b="MEDIA_ERR_DECODE";break;case 4:b="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:b=c.error.code.toString()}a._onVideoPlaybackFailure(a.getCurrentTimeMs(),b,
c.error.message)}};this.addVideoReadyForPlaybackListener=function(c){a._onVideoReadyForPlayback=c;4==a._videoElement.readyState&&(a._onVideoReadyForPlayback(0,0,a.getPercentDownloaded(),a.getDurationMs()),a._assetLoaded=!0)};this.addVideoPlaybackFailureListener=function(c){a._onVideoPlaybackFailure=c;if(a._videoElement.error&&a._videoElement.error.code)a._videoElement.onerror()};this.play=function(){n.isIOS()?(a._retryable&&a.cancelPlayRetryable(),a._retryable=new h(a._playInternal,10,200,function(){a._assetLoaded&&
null!=a._playbackFailedAfterPlayErrorCallback&&a._playbackFailedAfterPlayErrorCallback()})):a._playInternal()};this.pause=function(){a.cancelPlayRetryable();a._videoElement.pause()};this.seekToStart=function(){var b=a.getCurrentTimeMs();e+=b-c;c=0;a._lastOnTimeUpdateCurrentTimeMs=0;a._videoElement.currentTime=0};this.mute=function(){a._videoElement.muted=!0};this.unmute=function(){a._videoElement.muted=!1};this.isMuted=function(){return a._videoElement.muted};this.getCurrentTimeMs=function(){return Math.round(1E3*
a._videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*a._videoElement.duration)};this.getDroppedFrames=function(){return a._videoElement.getVideoPlaybackQuality?a._videoElement.getVideoPlaybackQuality().droppedVideoFrames:a._videoElement.webkitDroppedFrameCount!=p?a._videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return e+(a.getCurrentTimeMs()-c)};this.resetContinuousPlaybackDurationMs=function(){var b=a.getCurrentTimeMs();e=0;
c=b===a.getDurationMs()?0:b;a._continuousDurationBoundaryChecks.forEach(function(a){a.resetReported()})};this.getPercentDownloaded=function(){var c=a._videoElement.buffered,b=0;if(c){for(var d=0;d<c.length;d++)b+=c.end(d)-c.start(d);return b/a._videoElement.duration}return 0};this.load=function(){a._videoElement.load()}}function f(b,a){this.reportIfBoundaryCrossed=function(c,d,e,f,g){!isNaN(b)&&0<=b&&b<=e&&(c<=d?b>c&&b<=d&&a(b,f,g):(0<b&&b<=d||b>c&&b<=e)&&a(b,f,g))}}function b(b,a){var c=!1;this.resetReported=
function(){c=!1};this.reportIfBoundaryCrossed=function(d){var e;if(e=!c)e=!isNaN(b)&&0<=b&&b<d;e&&(c=!0,a(d))}}function e(d){var a=this;this._videoPlayer=new g(d);this.withVideoReadyForPlaybackHandler=function(b){a._videoPlayer.addVideoReadyForPlaybackListener(b);return a};this.withTimeToFirstFrameHandler=function(b){a._videoPlayer._onTimeToFirstFrame=b;return a};this.withVideoPlaybackFailureHandler=function(b){a._videoPlayer.addVideoPlaybackFailureListener(b);return a};this.withVideoPlayingHandler=
function(b){a._videoPlayer._onVideoPlaying=b;return a};this.withVideoPlaybackPausedHandler=function(b){a._videoPlayer._onPlaybackPaused=b;return a};this.withPlaybackCompletedHandler=function(b){a._videoPlayer._onPlaybackCompleted=b;return a};this.withVideoBufferingStartedHandler=function(b){a._videoPlayer._onVideoBufferingStarted=b;return a};this.withVideoBufferingEndedHandler=function(b){a._videoPlayer._onVideoBufferingEnded=b;return a};this.withVideoPlayedToBoundaryHandler=function(b,d){a._videoPlayer._boundaryChecks.push(new f(b,
d));return a};this.withVideoPlayedToContinuousBoundaryHandler=function(c,d){a._videoPlayer._continuousDurationBoundaryChecks.push(new b(c,d));return a};this.withVideoPlaybackFailedAfterPlayErrorCallback=function(b){a._videoPlayer._playbackFailedAfterPlayErrorCallback=b;return a};this.withVideoAbortedHandler=function(b){a._videoPlayer._onAborted=b;return a};this.withVideoSuspendedHandler=function(b){a._videoPlayer._onSuspended=b;return a};this.withTimeUpdateHandler=function(b){a._videoPlayer._onTimeUpdated=
b;return a};this.withVideoPlayPromiseRejectedHandler=function(b){a._videoPlayer._onVideoPlayPromiseRejected=b;return a};this.withVideoPlayPromiseNotSupportedHandler=function(b){a._videoPlayer._onVideoPlayPromiseNotSupported=b;return a};this.build=function(){var b=a._videoPlayer;if(b._onVideoReadyForPlayback&&b._onTimeToFirstFrame&&b._onVideoPlaybackFailure&&b._onVideoPlaying&&b._onPlaybackPaused&&b._onPlaybackCompleted&&b._onVideoBufferingStarted&&b._onVideoBufferingEnded&&b._onAborted&&b._onSuspended&&
b._onTimeUpdated&&b._onVideoPlayPromiseRejected&&b._onVideoPlayPromiseNotSupported)return a._videoPlayer;throw Error("Need implements all event listeners");}}var d={PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",INITIATED:"initiated",END:"ended"};return{builder:function(b){return new e(b)}}});t.register("sbv-event-manager",function(){function h(f){var b=0,e;for(e in f)b++;return b}function n(f,b){return function(e){g[f][b].listeners.forEach(function(b){b.callback&&b.callback(e)})}}var g=
{};return{addEventListener:function(f,b,e,d){g[f]||(g[f]={});g[f][b]||(g[f][b]={listeners:[],generatedCallback:n(f,b)},f.addEventListener(b,g[f][b].generatedCallback));g[f][b].listeners.push({priority:e,callback:d});g[f][b].listeners.sort(function(b,a){return b.priority-a.priority})},removeEventListener:function(f,b,e,d){g[f]&&g[f][b]&&(g[f][b].listeners=g[f][b].listeners.filter(function(b){return b.priority!==e||b.callback!==d}),0===g[f][b].listeners.length&&(f.removeEventListener(b,g[f][b].generatedCallback),
delete g[f][b],h(g[f])&&delete g[f]))}}});"use strict";t.when("A","amzn-safe-frame-viewability","sbv-platform-compatibility","sbv-event-manager").register("sbv-viewability-manager",function(h,n,g,f){function b(a,b){a.isInView=b;a.callback(a.ratio,b);a.recurring||p(a.element,a.ratio,a.dispatchOnElementInView,a.dispatchOnElementOutOfView,a.recurring)}function e(a,c){a.dispatchOnElementInView&&c>=a.ratio&&!a.isInView&&b(a,!0);a.dispatchOnElementOutOfView&&c<a.ratio&&a.isInView&&b(a,!1)}function d(a){e(a,
0)}function m(a){var b=n.geom(a.element);e(a,b&&b.self&&b.self.iv||0)}function a(){u.forEach(d)}function c(){u.forEach(m)}function k(){document.hidden?a():setTimeout(c,50)}function l(){a();c()}function p(b,d,e,m,n){var q=u.length;u=u.filter(function(a){return!(a.element===b&&a.ratio===d&&a.dispatchOnElementInView===e&&a.dispatchOnElementOutOfView===m&&a.recurring===n)});0===u.length&&(h.off("afterReady",v),h.off(h.constants.BROWSER_EVENTS.SCROLL,v),h.off(h.constants.BROWSER_EVENTS.RESIZE,v),h.off(h.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,
v),f.removeEventListener(document,"visibilitychange",1,k),f.removeEventListener(r,"beforeunload",1,a),g.isWebView()||(f.removeEventListener(r,"focus",1,c),f.removeEventListener(r,"blur",1,a)),g.isSafari()&&!g.isWebView()&&(f.removeEventListener(r,"pagehide",1,a),f.removeEventListener(r,"pageshow",1,c),f.removeEventListener(r,"popstate",1,l)));return q!==u.length}function t(){g.canUseViewWillDisappearToReportMetrics()&&!q&&(q=!0,r.app||(r.app={}),w=r.app.willDisappear,r.app.willDisappear=function(){a();
w&&w()})}var u=[],v,w,q=!1;v=h.throttle(function(){u.forEach(m)},50);return{registerElement:function(b,d,e,n,p,q){b={element:b,ratio:d,dispatchOnElementInView:e,dispatchOnElementOutOfView:n,recurring:p,callback:q};0===u.length&&(h.on("afterReady",v),h.on(h.constants.BROWSER_EVENTS.SCROLL,v),h.on(h.constants.BROWSER_EVENTS.RESIZE,v),h.on(h.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,v),f.addEventListener(document,"visibilitychange",1,k),g.isWebView()||(f.addEventListener(r,"focus",1,c),f.addEventListener(r,
"blur",1,a)),g.isSafari()&&!g.isWebView()&&(f.addEventListener(r,"pagehide",1,a),f.addEventListener(r,"pageshow",1,c),f.addEventListener(r,"popstate",1,l)),t());u.push(b);m(b);return b},deregisterElement:p,_handleRatioInViewChange:e,_onBrowserVisibilityChange:k}})});
/* ******** */
(function(b){var h=window.AmazonUIPageJS||window.P,e=h._namespace||h.attributeErrors,a=e?e("SearchQuestionAnswerWidgetAssets",""):h;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,h,e){b.when("A","ready").execute("aspa-partial-collapse-expander",function(a){a.on("a:expander:qna_answer_expander:toggle:expand",function(a){a.expander.$expander.find(".a-expander-partial-collapse-header").addClass("aok-hidden");a.expander.$expander.find(".a-expander-partial-collapse-content").addClass("aspa-padding-none")});
a.on("a:expander:qna_question_expander:toggle:expand",function(a){a.expander.$expander.find(".a-expander-section-header").addClass("a-text-bold");b.when("a-expander").execute("aspa-question-expander",function(a){a.initializeExpanders()})});a.on("a:expander:qna_question_expander:toggle:collapse",function(a){a.expander.$expander.find(".a-expander-section-header").removeClass("a-text-bold")})});"use strict";b.when("jQuery","rush-framework","a-button").register("aspa-voting-component",function(a,b,e){function q(a,
c){for(var d=0;d<a.length;++d)if(a[d].name===c)return a[d].value;return null}function z(b){var c={};a.map(b,function(a){c[a.name]=a.value});return c}function l(b){function c(){m.addClass("aok-hidden");n.addClass("aok-hidden");r.removeClass("aok-hidden")}function d(){t.removeClass("aok-hidden")}function e(a){401===a.status?(k.unbind("submit"),k.submit()):(m.removeClass("aok-hidden"),n.removeClass("aok-hidden"))}function u(a){401!==a.status&&r.addClass("aok-hidden")}function l(){for(var a={},b=0;b<
f.length;++b)"csm-producer"!==f[b].name&&"csm-schema"!==f[b].name&&(a[f[b].name]=f[b].value);h.ue&&h.ue.event&&h.ue.event(a,v,w);m.addClass("aok-hidden");n.addClass("aok-hidden");t.removeClass("aok-hidden")}var k=a(b.currentTarget),g=k.closest(".aspa-feedback-container"),m=g.find(".aspa-vote-buttons"),r=g.find(".aspa-loading-section"),t=g.find(".aspa-success-section"),n=g.find(".aspa-error-section"),g=k.attr("action"),x=k.attr("method"),f=k.serializeArray(),p=z(f),v=q(f,"csm-producer"),w=q(f,"csm-schema"),
y={"X-Requested-With":"XMLHttpRequest"};b.preventDefault();g?"application/json"===p.contentType?(delete p.contentType,a.ajax({url:g,type:x,contentType:"application/json",data:JSON.stringify(p),withCredentials:!0,headers:y,beforeSend:c,success:d,error:e,complete:u})):a.ajax({url:g,type:x,data:f,withCredentials:!0,headers:y,beforeSend:c,success:d,error:e,complete:u}):v&&w&&l()}b.registerComponent("aspa-voting-component","aspa-voting-component",function(b){b=a(b.elem()).find(".aspa-vote-form");var c=
e(".aspa-upvote-button"),d=e(".aspa-downvote-button");c.isEnabled()||c.enable();d.isEnabled()||d.enable();b.submit(l)})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("PantryCPIMobileAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,c=d._namespace||d.attributeErrors,a=c?c("InterstitialProgramInformationSheetAssets",""):d;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,d,c){b.when("A").register("lucid-metrics-logger",function(a){var b=function(b,a){var c=d.ue;"undefined"!==typeof c&&c.count(b,a)};return{logCountMetrics:b,incrementCountMetrics:function(a){b(a,1)}}})});
/* ******** */
(function(f){var h=window.AmazonUIPageJS||window.P,u=h._namespace||h.attributeErrors,a=u?u("SearchWebVSEVideoWidgetAssets",""):h;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,h,u){f.register("vse-search-utils",function(){function a(a){var b,e;"undefined"!==typeof a&&(b=h.ue)&&(e=b.count(a)||0,b.count(a,e+1))}return{postCountMetric:a,postTimeMetric:function(a,b){var e;"undefined"!==typeof a&&"undefined"!==typeof b&&(e=h.ue)&&e.count(a,b)},logError:function(a,
b,e,c){h.ueLogError&&h.ueLogError(c,{logLevel:a,attribution:b,message:e})},logHideWidgetMetrics:function(d){a("vse_search_widget_hidden");d.trigger("vse:search:widget:hidden")},getAssetSpec:function(a,b){a=a.$(b.currentTarget);b=a.parent().data();var e=a.closest("li").index(),c=a.find(".vse-video-image").data("img");return{contentId:b.asin,title:b.title,vendorName:b.vendorName,vendorCode:b.vendorCode,referenceUrl:b.referenceUrl,referenceLinkTitle:b.referenceTitle,videoUrl:b.videoUrl,$el:a,duration:b.duration,
imageUrl:c,sponsored:b.sponsored|0,videoVoteContainer:{},productAsin:b.productAsin,refTag:"vse-s-ic-"+e,relatedProducts:b.relatedProducts,sponsorProducts:b.sponsorProducts,vendorTrackingId:b.vendorTrackingId,videoReferenceId:b.videoRefId,index:a.closest("li").index()}},reSize:function(a){a.trigger("resize",{},{width:h.innerWidth,height:h.innerHeight})},getModalFactory:function(a){var b=null;a.capabilities.mobile?f.now("a-secondary-view").execute("vse-search-secondary-view-factory",function(a){b=a}):
f.now("a-modal").execute("vse-search-modal-factory",function(a){b=a});return b},refTagRecorder:function(a,b,e,c){c=c||0;if(!(3<=c)){var l=this;a.post("/gp/mobile/tag/?ref\x3dvse_vws_vc_"+b+e,{error:function(){l.refTagRecorder(a,b,e,++c)}})}}}});f.when("vse-search-utils").execute("vse-search-ajax-calls",function(a){f.register("vse-search-preLoadCallHook",function(){function d(b,e){try{var c=b.A,l=b.request,f=b.block,h=b.handleFailure,r=b.handleSuccess;e--;var p=3-e-1,g=c.now();c.ajax("/vap/ew/componentbuilder",
{params:l,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:l.timeout||4E3,withCredentials:!0,success:function(b){var d=c.now()-g;a.postTimeMetric("vse_search:preload:success:",d);a.postCountMetric("vse_search:preload:success:"+l.page+":"+l.placement+":"+p);c.$(f).html(b);r(c,l,b)},error:function(k){a.postCountMetric("vse_search:preload:error:"+l.page+":"+l.placement+":"+p);(0===k.http.status||500<=k.http.status&&599>=k.http.status)&&0<e?d(b,e):(a.postCountMetric("vse_search:preload:error:"),
h(c,k))}})}catch(k){a.logError("FATAL","vse_search","[vse_search_preLoadCallHook] ",k)}}return{get:function(a,e,c,l,f){d({A:a,block:e,request:c,handleFailure:f,handleSuccess:l},3)}}});f.register("vse-search-lazyLoadCallHook",function(){function d(b,e,c){try{var l=b.A,f=b.context,h=b.handleFailure,r=b.handleSuccess,p=atob(e.attr("data-configuration")),g=JSON.parse(p),k={pageContext:f,configuration:g},x=l.now();c--;var w=3-c-1;l.ajax("/vap/ew/subcomponent/"+g.type,{params:k,paramsFormat:"json",method:"post",
contentType:"application/json",timeout:f.timeout||4E3,withCredentials:!0,success:function(b){var d=l.now()-x;a.postTimeMetric("vse_search:lazyload:success:",d);a.postCountMetric("vse_search:lazyload:success:"+k.page+":"+k.placement+":"+w);e.html(b);r(l,k,b,g.type)},error:function(f){a.postCountMetric("vse_search:lazyload:error:"+k.page+":"+k.placement+":"+w);(0===f.http.status||500<=f.http.status&&599>=f.http.status)&&0<c?d(b,e,c):(a.postCountMetric("vse_search:lazyload:error:"),h(l,k,f,g.type))}})}catch(t){a.logError("FATAL",
"vse_search","[vse_search_lazyLoadCallHook] ",t)}}return{get:function(a,e,c,f,h){var v=a.$;v(e+" div[data-configuration]").each(function(){d({A:a,context:c,handleFailure:h,handleSuccess:f},v(this),3)})}}})});"use strict";f.when("A","vse-search-utils","vse-search-preLoadCallHook","vse-search-lazyLoadCallHook","rush-framework").register("vse-search-widget",function(a,d,b,e,c){a.$(".vse-search-video-carousel").delegate(".vse-video-card.vse-avoid-clicks","click",function(){d.postCountMetric("vse-search.widgetClickedBeforeRushFramework")});
c.registerComponent("vse-search-widget","vse-search-widget",function(c){try{var h=a.now();d.postTimeMetric("vse-search-preload-load-time",h);var v,r,p,g,k=!1,x=!1,w=!1,t=!0,u=!1,n=c.elem();f.when("af").execute("vse-search-widget-load-images-lazily",function(){a.loadDescendantImagesManually(a.$(n));a.trigger("a:image:vse:manualLoaded")});c=function G(){if(n)if(w)a.off("scroll",G);else if(a.onScreen(a.$(n),0)){var b=a.now()-h;k?(d.postCountMetric("vse-search.widgetViewedWithLightboxWidgetsCount"),d.postTimeMetric("vse-search.widgetViewedWithLightboxWidgetsDuration",
b)):(d.postCountMetric("vse-search.widgetViewedWithNoLightboxWidgetsCount"),d.postTimeMetric("vse-search.widgetViewedWithNoLightboxWidgetsDuration",b));d.postTimeMetric("vse-search-preload.pageLoadToWidgetViewedDuration",b);w=!0}};c();a.on("scroll",c);var A=a.$(n).attr("data-page-state");if(A){var H=atob(A),m=JSON.parse(H);g=m.clientPrefix;var I=m.popoverTriggerId,q=m.popoverContainerId,B=m.popoverName,y=m.initialVideo,J=m.celQueryStringParam,z=m.videoDataList,C=0;p={requester:m.requester,clientPrefix:g,
page:m.page,placement:m.placement,device:m.device,locale:m.locale,requestId:m.requestId,sessionId:m.sessionId,customerId:m.customerId,marketplaceID:m.marketplaceID,metadata:m.metadata,videoDataList:z,video:{contentID:y.contentId,contentIDType:"ASIN",videoURL:y.videoURL,imageURL:y.videoImageUrl},product:{contentID:y.relatedProductsAsins,contentIDType:"ASIN"}};var D=function(a,b){a.trigger("vse:"+g+":lazyload:"+b.configuration.type+":failed")},E=function(a,b){a.trigger("vse:"+g+":lazyload:"+b.configuration.type+
":succeeded")};b.get(a,"#"+q+" .vse-search-video-block",p,function(a){t=!1;f.when("VSEComponentAssets").execute("vse-search-preload-success",function(){k=!0;x&&(a.trigger("vse:"+g+":page:lightBoxOpened",{assetSpec:r,lightBoxId:q}),e.get(a,"#"+q,p,E,D),d.postCountMetric("vse-search.lightBoxOpenedBeforePreload"));a.delay(function(){d.reSize(a)},500)});a.trigger("vse:"+g+":preload:succeeded")},function(a){k=!1;a.trigger("vse:"+g+":preload:failed");d.logHideWidgetMetrics(a)});a.$(n).find(".vse-search-video-carousel").delegate(".vse-video-card a",
"click",function(b){if(!t){b.preventDefault();var c=d.getModalFactory(a);r=d.getAssetSpec(a,b);a.objectIsEmpty(c)?(t=!0,d.logHideWidgetMetrics(a)):(v=c.get(a.$("#"+I)),a.objectIsEmpty(v)?(t=!0,d.logHideWidgetMetrics(a)):(v.show(),d.refTagRecorder(a,r.index,J,0)))}});a.on("a:popover:afterShow:"+B,function(b){x=!0;a.$(b.popover.$popover).addClass(a.$("#"+q).data("cssClass"));C++;k&&(a.trigger("vse:"+g+":page:lightBoxOpened",{assetSpec:r,lightBoxId:q}),1===C&&(e.get(a,"#"+q,p,E,D),d.postCountMetric("vse-search.lightBoxOpenedAfterPreload")));
d.reSize(a)});a.on("a:popover:beforeHide:"+B,function(){k&&(a.trigger("vse:"+g+":page:lightBoxClosed"),a.$("#"+q+" .vse-placeholder").addClass("aok-hidden"),a.$("#"+q+" .vse-search-video-block").removeClass("vse-search-absolute-lb"))});a.on(g+":vse:player:registered",function(){a.$("#"+q+" .vse-search-video-block").first().animate({opacity:1})});a.declarative(g+"-carousel-see-more","click touch",function(){a.$(n).find(".vse-video-card").first().find(".vse-carousel-item").click()});a.on(g+":vse:sushiMetrics",
function(b){var c=z.map(function(a){return a.contentId}).join(","),d=function(){f.when("A","a-carousel-framework").execute("vse-carousel-metric-handler",function(a,c){var d=c.getCarousel(a.$(n).find(".vse-search-video-carousel")),e=d.getAttr("name"),f=[];z.map(function(a){f.push({videoAsin:a.contentId,impressionRecorded:!1})});c=function F(){for(var c=d.getAttr("pageNumber"),h=d.getAttr("pageSize"),k=d.getAttr("totalPages"),g=0;g<Math.min(c*h,f.length);g++)if(!f[g].impressionRecorded){var l=b.buildSushiPayload({eventName:"vse-search.thumbnailImpression",
stringPayload:"",intPayload:1,videoAsin:f[g].videoAsin});b.postMetric.emitSushiMetric(l,b.endpoint);f[g].impressionRecorded=!0}c===k&&(a.off("a:carousel:"+e+":change:pageSize",F),a.off("a:carousel:"+e+":change:pageNumber",F))};c();a.on("a:carousel:"+e+":change:pageSize",c);a.on("a:carousel:"+e+":change:pageNumber",c)})},e=function K(){if(n)if(u)a.off("scroll",K);else if(a.onScreen(a.$(n),0)){var e=b.buildSushiPayload({eventName:"vse-search.pageView",stringPayload:"",intPayload:1,videoAsinList:c});
b.postMetric.emitSushiMetric(e,b.endpoint);d();u=!0}},h=b.buildSushiPayload({eventName:"vse-search.pageRender",stringPayload:"",intPayload:1,videoAsinList:c});b.postMetric.emitSushiMetric(h,b.endpoint);e();a.on("scroll",e)});a.$(n).find(".vse-sm-link").removeClass("vse-avoid-clicks");a.$(n).find(".vse-video-card").removeClass("vse-avoid-clicks");a.$(n).find(".vse-search-container-spinner").addClass("aok-hidden");d.postTimeMetric("vse-search.timeToRemoveSpinner",a.now()-h)}else d.logHideWidgetMetrics(a),
d.postCountMetric("vse-search-preload-page-state-not-found")}catch(L){t=!0,d.logHideWidgetMetrics(a)}})})});
/* ******** */
(function(t){var p=window.AmazonUIPageJS||window.P,v=p._namespace||p.attributeErrors,h=v?v("MiraiDiscoverWidgetSearchWebAssets",""):p;h.guardFatal?h.guardFatal(t)(h,window):h.execute(function(){t(h,window)})})(function(t,p,v){t.when("A","ready").register("mirai-discover-constants",function(){return{BOX_ID_PREFIX:"sbl-item-box-",GET_RECOMMENDATION:"getRecommendationsRS",GET_RECOMMENDATION_ADD_LIKE:"getRecommendationsForLikeRS",GET_RECOMMENDATION_ADD_DISLIKE:"getRecommendationsForDislikeRS",LIKE_PREFIX:"L",
DISLIKE_PREFIX:"D",SBL_WEBSITE_ADDRESS_PREFIX:"/discover/",SBL_FLIP_BOX_CLASS:"sbl-item-box-flip",DESKTOP_NUM_ROWS_PER_SHOW_MORE:2,MOBILE_NUM_ROWS_PER_SHOW_MORE:2,INITIAL_ITEM_COUNT_DESKTOP:8,INITIAL_ITEM_COUNT_MOBILE:4,END_OF_RECOMMENDATIONS_START_INDEX:-1,RATINGS_HALF_STAR_THRESHOLD:.5,RATINGS_MAX_STAR:5,AUI_EMPTY_IMAGE_URL:"https://images-na.ssl-images-amazon.com/images/G/01/x-locale/common/grey-pixel.gif",HTTP_ERROR_NO_CONTENT:204,AUI_HIDDEN_CLASS:"aok-hidden",ANIMATION_DURATION_MILLISECONDS:500,
ITEMS_SECTION_ANIMATION_DURATION_MILLISECONDS:200,SCROLL_ANIMATION_MILLISECONDS:500,SCROLL_HEIGHT_MULTIPLIER:1.3,NUMBER_TWO:2,CHANGEOVER_FADE_IN:200,CHANGEOVER_FADE_OUT:200,CHANGEOVER_SHOW_DELAY:5E3,RESET_LIKE_BUTTON_TO_ORIGINAL_DELAY:5E3,DEFAULT_ITEM_BOX_HEIGHT_FOR_ANIMATION:275,LINK_TO_REVIEW_SECTION_TAG:"#customerReviews"}});t.when("A","ready").register("mirai-discover-utils",function(){return{getElementData:function(h){var d=h.data();d&&d.asin&&(d.asin=h.attr("data-asin"));d&&d.refinements&&(d.refinements=
h.attr("data-refinements"));return d},getHiddenElementWidthById:function(h){h=document.getElementById(h);return parseInt(p.getComputedStyle(h).getPropertyValue("width"),10)},escapeSelector:function(h){return h.toString().replace(/(:|\.|\[|\]|,|=|@|\>|\<)/g,"\\$1")}}});t.when("A","jQuery","mirai-discover-constants","mirai-discover-utils","ready").register("mirai-discover-helpers",function(h,d,b,l){return{refMarkerPrefix:"sbl_swb",generateAsinToDpURL:function(a,b,c,d,h){d=d.split("?");return"/dp/"+
a+"/ref\x3d"+this.refMarkerPrefix+(b?"_m_":"_")+c+"?"+(1<d.length?d[1]:"").replace(h,a)},scrollTwoPixelsToActivateLazyLoad:function(){d("html, body").animate({scrollTop:d(p).scrollTop()+b.NUMBER_TWO},b.SCROLL_ANIMATION_MILLISECONDS)},changePageScrollTopIfRequire:function(a,g,c){var h=d(p).scrollTop();a=a.offset().top+g+c-(h+d(p).height());1<a?d("html, body").animate({scrollTop:h+a},b.ANIMATION_DURATION_MILLISECONDS):this.scrollTwoPixelsToActivateLazyLoad()},showNoContentChangeover:function(a,g){var c=
a.find("#sbl-no-content-message"),d=g.find(".sbl-item-detail-row");a=a.find(".sbl-items-row").offset();c.removeClass(b.AUI_HIDDEN_CLASS);c.css({top:d.offset().top-a.top,left:g.position().left,width:g.width()});c.stop(!0,!0).fadeIn(b.CHANGEOVER_FADE_IN).delay(b.CHANGEOVER_SHOW_DELAY).fadeOut(b.CHANGEOVER_FADE_OUT)},getCurrentBoxesAsinsOnPage:function(a){return a.find(".sbl-item-box").map(function(){return l.getElementData(d(this)).asin}).get()},getNumItemsPerRow:function(a){return Math.round(a.width()/
a.children().eq(0).width())},updateReviewStars:function(a,g,c,d,h){var k=a.find(".sbl-item-review-stars"),f=a.find(".sbl-item-review-count");a=a.find("span.a-declarative");var e;if(!g||g<b.RATINGS_HALF_STAR_THRESHOLD)0<a.length?a.remove():k.remove(),f.remove();for(e=0;e<=b.RATINGS_MAX_STAR;e++)k.removeClass("a-star-small-"+e).removeClass("a-star-small-"+e+"-5");e=Math.floor(g);k.addClass("a-star-small-"+e+(g-e>=b.RATINGS_HALF_STAR_THRESHOLD?"-5":""));f.text(c);f.is("a")&&f.attr("href",h+b.LINK_TO_REVIEW_SECTION_TAG);
0<a.length&&(g=JSON.parse(a.attr("data-a-popover")),g.url+="\x26asin\x3d"+d,a.attr("data-a-popover",JSON.stringify(g)))},updateShowMoreSectionStatus:function(a,g){g===b.END_OF_RECOMMENDATIONS_START_INDEX?a.find("#sbl-show-more").hide():a.find("#sbl-show-more").show()},updatePriceInformation:function(a,g,c){c.price&&(a.find(".a-offscreen").text(c.price),a.find(".a-price-whole").text(c.priceWhole),a.find(".a-price-fraction").text(c.priceFraction),a.find(".a-price-symbol").text(c.currencySymbol),a.removeClass(b.AUI_HIDDEN_CLASS));
c.basisPrice&&(g.text(c.basisPrice),g.removeClass(b.AUI_HIDDEN_CLASS))},swapBoxOnThePage:function(a,g,c,d,h){var k=a.find("#sbl-item-box-empty");a=k.find(".sbl-item-rating").clone();var f=k.find(".sbl-item-price").clone(),e=f.find(".sbl-item-price-current"),u=f.find(".sbl-item-price-original"),k=k.find(".sbl-item-prime").clone(),w,B;if(null===g||0===g.length||c===v)return!1;B=l.getElementData(g).asin;g.attr("data-asin",c.asin);g.data("asin",c.asin);g.attr("data-physical-id",c.physicalId);g.data("physicalId",
c.physicalId);g.attr("id",b.BOX_ID_PREFIX+c.asin);w=g.find(".sbl-item-top").children("a");d=this.generateAsinToDpURL(c.asin,d,h,w.attr("href"),B);w.attr("href",d);this.updatePriceInformation(e,u,c);g.find(".sbl-item-price").replaceWith(f);c.prime?k.find(".sbl-item-prime-icon").removeClass(b.AUI_HIDDEN_CLASS):k.find(".sbl-item-prime-icon").addClass(b.AUI_HIDDEN_CLASS);k.append(c.deliveryMessage);g.find(".sbl-item-prime").replaceWith(k);g.find(".sbl-button").removeClass("selected");g.removeClass("sbl-item-disliked");
h=g.find(".sbl-item-image");f=c.imageUrl;e=c.title;h.attr("src",b.AUI_EMPTY_IMAGE_URL);h.attr("data-src",f);h.data("src",f);h.addClass("a-lazy-loaded");h.attr("alt",e);h.attr("title",e);this.updateReviewStars(a,c.rating,c.ratingCount,c.asin,d);g.find(".sbl-item-rating").replaceWith(a);return!0},animateFadeColorBox:function(a){a=a.find(".sbl-item-box-inner-fade");a.removeClass(b.AUI_HIDDEN_CLASS);a.css("opacity",1);a.show();a.animate({opacity:0},b.ANIMATION_DURATION_MILLISECONDS,function(){d(this).hide()})},
resetHeightToAuto:function(){d(this).height("auto")},removeHrefFromShowMoreElement:function(){d("#sbl-show-more").removeAttr("href")}}});t.when("A","jQuery","mirai-discover-constants","mirai-discover-utils","ready").register("mirai-discover-refinements",function(h,d,b,l){function a(a){a.find("#sbl-refinement-prime-button .sbl-prime-toggle").removeClass("sbl-prime-toggle-selected")}function g(a,c,f,e,k){var g=n.find("#sbl-selected-refinement-row"),d=g.find("#sbl-selected-refinement-empty").clone();
f=k?k:f+(e?": "+e:"");d.attr("data-refinement-element-id",c);d.attr("id","sbl-selected-refinement-"+a);d.find(".sbl-selected-refinement-item-title").text(f);d.removeClass(b.AUI_HIDDEN_CLASS);g.append(d)}function c(a){a=n.find("#sbl-selected-refinement-"+l.escapeSelector(a));0<a.length&&a.remove()}var n,m,k=!1,f=[],e;return e={getRefinements:function(){return f},updateRefinementItemStatus:function(a){var b=l.getElementData(a),e=b.refinementChildId,k=a.closest(".sbl-refinement-item-row"),h=l.getElementData(k),
q=h.refinementType,r=n.find("#sbl-refinement-"+q+"-button");"base"===h.refinementSource&&(e="@"+q+":"+b.refinementChildId);h=f.indexOf(e);-1<h?(f.splice(h,1),a.removeClass("sbl-selected"),c(b.refinementChildId)):("review"===q&&k.find(".sbl-refinement-item.sbl-selected").each(function(){var a=l.getElementData(d(this)).refinementChildId,b=f.indexOf("@review:"+a);c(a);d(this).removeClass("sbl-selected");-1<b&&f.splice(b,1)}),f.push(e),a.addClass("sbl-selected"),g(b.refinementChildId,a.attr("id"),r.find(".sbl-refinement-title").text(),
b.refinementChildName,"review"===q?m.replace("${count}",b.refinementChildId):v));a=k.find(".sbl-refinement-item.sbl-selected").length;e=r.find("#sbl-refinement-"+q+"-selected");0<a?("review"===q?(e.text(m.replace("${count}",b.refinementChildId)),r.find(".sbl-refinement-title").hide()):e.text(" ("+a+")"),r.addClass("sbl-selected")):(e.text(""),r.removeClass("sbl-selected"),"review"===q&&r.find(".sbl-refinement-title").show())},setItemClearAction:function(a){h.declarative("sblRefinementItemClearAll",
"click",function(b){b=b.$declarativeParent.closest(".sbl-refinement-item-row");var e=l.getElementData(b),k=e.refinementType;b=b.find(".sbl-refinement-item.sbl-selected");var g;0<b.length&&(b.each(function(){var a=l.getElementData(d(this)),b=a.refinementChildId;"base"===e.refinementSource&&(b="@"+k+":"+a.refinementChildId);b=f.indexOf(b);-1<b&&(f.splice(b,1),d(this).removeClass("sbl-selected"),c(a.refinementChildId))}),b=n.find("#sbl-refinement-"+k+"-button"),g=b.find("#sbl-refinement-"+k+"-selected"),
g.text(""),b.removeClass("sbl-selected"),"review"===k&&b.find(".sbl-refinement-title").show(),a())})},setClearAllAction:function(b,e){h.declarative("sblRefinementsClearAll","click",function(){f=[];d(".sbl-refinement-item.sbl-selected").each(function(){d(this).removeClass("sbl-selected")});n.find(".sbl-refinement-button.sbl-selected").each(function(){var a=d(this);a.removeClass("sbl-selected");a.find(".sbl-refinement-selected").text("");a.find(".sbl-refinement-title").show()});n.find(".sbl-selected-refinement-item").each(function(){var a=
d(this);l.getElementData(a).refinementElementId&&a.remove()});a(b);e()})},updateSelectedRefinementRowShowStatus:function(){0<f.length?d("#sbl-selected-refinement-row").removeClass(b.AUI_HIDDEN_CLASS):d("#sbl-selected-refinement-row").addClass(b.AUI_HIDDEN_CLASS)},setCurrentSelectedFilter:function(a){var b;if(a)for(b=a.split(","),a=0;a<b.length;a++)e.updateRefinementItemStatus(n.find("#sbl-refinement-item-"+b[a])),e.updateSelectedRefinementRowShowStatus()},setRefinementItemAction:function(a,b){h.declarative("sblRefinementItem",
"click",function(f){k=!0;e.updateRefinementItemStatus(f.$declarativeParent.find(".sbl-refinement-item"));a||b()});h.declarative("sblRefinementPrimeButton","click",function(a){var e=a.$declarativeParent.find(".sbl-prime-toggle");e.hasClass("sbl-prime-toggle-selected")?(a=f.indexOf("@prime"),-1<a&&f.splice(a,1),e.removeClass("sbl-prime-toggle-selected")):(f.push("@prime"),e.addClass("sbl-prime-toggle-selected"));b()});if(a)h.on("a:sheet:beforeHide",function(){k&&(k=!1,b())})},setSelectedRefinementItemAction:function(a){h.declarative("sblSelectedRefinementItem",
"click",function(b){b=l.getElementData(b.$declarativeParent.closest(".sbl-selected-refinement-item"));e.updateRefinementItemStatus(d("#"+l.escapeSelector(b.refinementElementId)));a()})},constructRefinements:function(b,k,c,g,d,h){f=[];n=c;m=h;e.setRefinementItemAction(b,g);e.setItemClearAction(g);e.setClearAllAction(k,g);e.setCurrentSelectedFilter(d);e.setSelectedRefinementItemAction(g);a(k)},resetRefinementsState:function(b,e){n=e;f=[];k=!1;a(b)}}});t.when("A","jQuery","mirai-discover-constants",
"mirai-discover-utils","ready").register("mirai-discover-like-dislike-actions",function(h,d,b,l){var a=[],g=[],c=[],n=0,m={getPositiveAsins:function(){return a},getNegativeAsins:function(){return g},getIteration:function(){return n},increaseIterationByOne:function(){n++},isPositiveAndNegativeEmpty:function(){return 0===a.length&&0===g.length},addLikeStatus:function(k,f){var e=k.find(".sbl-button");-1===c.indexOf(b.LIKE_PREFIX+f.asin)&&(c.push(b.LIKE_PREFIX+f.asin),a.push({asin:f.asin,iteration:n}));
e.addClass("selected");setTimeout(function(){e.removeClass("selected")},b.RESET_LIKE_BUTTON_TO_ORIGINAL_DELAY)},deleteLikeStatus:function(k,f){var e;for(e=0;e<a.length;e++)if(a[e].asin===f.asin){a.splice(e,1);break}for(e=0;e<c.length;e++)if(c[e]===b.LIKE_PREFIX+f.asin){c.splice(e,1);break}k.find(".sbl-button").removeClass("selected")},addDislikeStatus:function(a,f){-1===c.indexOf(b.DISLIKE_PREFIX+f.asin)&&(c.push(b.DISLIKE_PREFIX+f.asin),g.push({asin:f.asin,iteration:n}));a.addClass("sbl-item-disliked")},
deleteDislikeStatus:function(a,f){var e=!1,d;for(d=0;d<g.length;d++)if(g[d].asin===f.asin){g.splice(d,1);e=!0;break}for(d=0;d<c.length;d++)if(c[d]===b.DISLIKE_PREFIX+f.asin){c.splice(d,1);break}e&&a.removeClass("sbl-item-disliked")},setLikeStatusForNewItemIfRequired:function(a,f){-1<c.indexOf(b.LIKE_PREFIX+f.asin)&&this.addLikeStatus(a,f)},setOnClickFunction:function(a){h.declarative("sblItemLike","click",function(f){f=f.$declarativeParent.closest(".sbl-item-box");var e=f.index()+1,c=l.getElementData(f);
m.increaseIterationByOne();m.deleteDislikeStatus(f,c);m.addLikeStatus(f,c);a(c,!0,b.GET_RECOMMENDATION_ADD_LIKE,e)});h.declarative("sblItemDislike","click",function(c){c=c.$declarativeParent.closest(".sbl-item-box");var e,d;c.hasClass("sbl-item-disliked")||(e=c.index()+1,d=l.getElementData(c),m.increaseIterationByOne(),m.deleteLikeStatus(c,d),m.addDislikeStatus(c,d),a(d,!1,b.GET_RECOMMENDATION_ADD_DISLIKE,e))})},resetLikeDislikeState:function(){a=[];g=[];c=[];n=0}};return m});"use strict";t.when("A",
"jQuery","mirai-discover-constants","mirai-discover-utils","mirai-discover-helpers","mirai-discover-refinements","mirai-discover-like-dislike-actions","ready").execute("mirai-discover-main",function(h,d,b,l,a,g,c){function n(){var d,r,l,n,m,z,x,y;e!==b.END_OF_RECOMMENDATIONS_START_INDEX&&(u&&(u.abort(),u=null),d=a.getCurrentBoxesAsinsOnPage(k),r=f.find(".sbl-item-box"),l=r.first(),n=f.height(),m=Math.round(l.outerHeight()),z=a.getNumItemsPerRow(f),x=w?b.MOBILE_NUM_ROWS_PER_SHOW_MORE:b.DESKTOP_NUM_ROWS_PER_SHOW_MORE,
x*=z,y=Math.ceil(f.height()/m),r=r.length<y*z?y*z-r.length:0,u=h.ajax(b.SBL_WEBSITE_ADDRESS_PREFIX+b.GET_RECOMMENDATION,{method:"post",params:{browseNode:t,positive:c.getPositiveAsins(),negative:c.getNegativeAsins(),currentViewAsins:d,start:e,count:x+r,iteration:c.getIteration(),filters:g.getRefinements()},paramsFormat:"json",contentType:"application/json; charset\x3dUTF-8",accepts:"application/json; charset\x3dUTF-8",success:function(d){var g,h,q,r=d.rsRecommendationItemList;e=d.nextStart;g=l.clone();
g.removeClass(b.SBL_FLIP_BOX_CLASS);for(d=0;d<r.length;d++)h=g.clone(),q=r[d],a.swapBoxOnThePage(k,h,q,w,c.getIteration()),c.setLikeStatusForNewItemIfRequired(h,q),f.append(h),h.css("opacity",0),h.animate({opacity:1},b.ANIMATION_DURATION_MILLISECONDS);a.changePageScrollTopIfRequire(f,n,m/b.NUMBER_TWO);a.updateShowMoreSectionStatus(k,e)},error:function(c){c.http.status===b.HTTP_ERROR_NO_CONTENT&&(e=b.END_OF_RECOMMENDATIONS_START_INDEX);a.updateShowMoreSectionStatus(k,e)}}))}function m(){var b;(k=d("#sbl-row"))&&
0<k.length&&(b=l.getElementData(k),t=b.browseNode,a.refMarkerPrefix=b.refMarkerPrefix,w=k.hasClass("sbl-row-mobile"),f=k.find("#sbl-items-row"),c.setOnClickFunction(v),h.declarative("sblShowMore","click",n),g.constructRefinements(w,k,k.find("#sbl-refinement-row"),p,b.refinements,b.translationFilterStarsAndUp),a.removeHrefFromShowMoreElement())}var k,f,e=null,u=null,w=!1,t,p,v;v=function(q,r,l,n){var m,z=0,x,y,p,v,A;u&&(u.abort(),u=null);c.isPositiveAndNegativeEmpty()||(m=a.getCurrentBoxesAsinsOnPage(k),
x=k.find("#"+b.BOX_ID_PREFIX+q.asin),e===b.END_OF_RECOMMENDATIONS_START_INDEX?a.showNoContentChangeover(k,x):(y=f.find(".sbl-item-box"),p=x.index(),v=a.getNumItemsPerRow(f),A=p+(v-p%v)-1,A>y.length-1&&(z=A-y.length+1,A=y.length-1),p=r?v:1,u=h.ajax(b.SBL_WEBSITE_ADDRESS_PREFIX+l,{method:"post",params:{browseNode:t,asin:q.asin,physicalId:q.physicalId,positive:c.getPositiveAsins(),negative:c.getNegativeAsins(),currentViewAsins:m,count:p+z,iteration:c.getIteration(),asinIndex:n,filters:g.getRefinements()},
paramsFormat:"json",contentType:"application/json; charset\x3dUTF-8",accepts:"application/json; charset\x3dUTF-8",success:function(f){var g,h,q,l,n,m=f.rsRecommendationItemList;e=f.nextStart;if(e===b.END_OF_RECOMMENDATIONS_START_INDEX&&0===m.length)a.showNoContentChangeover(k,x);else if(g=y.first().clone(),g.removeClass(b.SBL_FLIP_BOX_CLASS),r){h=d(y[A]);q=Math.round(x.outerHeight());for(f=m.length-1;0<=f;f--)l=g.clone(),n=m[f],a.swapBoxOnThePage(k,l,n,w,c.getIteration()),c.setLikeStatusForNewItemIfRequired(l,
n),h.after(l),0===z||f>z?(l.height(0),l.animate({height:b.DEFAULT_ITEM_BOX_HEIGHT_FOR_ANIMATION},b.ANIMATION_DURATION_MILLISECONDS,a.resetHeightToAuto),a.animateFadeColorBox(l)):(l.css("opacity",0),l.animate({opacity:1},b.ANIMATION_DURATION_MILLISECONDS));a.updateShowMoreSectionStatus(k,e);a.changePageScrollTopIfRequire(x,q,q*b.SCROLL_HEIGHT_MULTIPLIER)}else a.swapBoxOnThePage(k,x,m[0],w,c.getIteration()),a.scrollTwoPixelsToActivateLazyLoad()},error:function(c){c.http.status===b.HTTP_ERROR_NO_CONTENT&&
(e=b.END_OF_RECOMMENDATIONS_START_INDEX);a.updateShowMoreSectionStatus(k,e)}})))};p=function(){var l,n,m;u&&(u.abort(),u=null);g.updateSelectedRefinementRowShowStatus();l=f.find(".sbl-item-box");n=l.first();m=w?b.INITIAL_ITEM_COUNT_MOBILE:b.INITIAL_ITEM_COUNT_DESKTOP;c.getPositiveAsins().length>m&&(m=c.getPositiveAsins().length+b.NUMBER_TWO);u=h.ajax(b.SBL_WEBSITE_ADDRESS_PREFIX+b.GET_RECOMMENDATION,{method:"post",params:{browseNode:t,positive:c.getPositiveAsins(),negative:c.getNegativeAsins(),currentViewAsins:[],
count:m,iteration:c.getIteration(),filters:g.getRefinements(),isFilterChange:!0},paramsFormat:"json",contentType:"application/json; charset\x3dUTF-8",accepts:"application/json; charset\x3dUTF-8",success:function(d){var g,h,m,p=d.rsRecommendationItemList;e=d.nextStart;g=n.clone();g.removeClass(b.SBL_FLIP_BOX_CLASS);l.remove();for(d=0;d<p.length;d++)h=g.clone(),m=p[d],a.swapBoxOnThePage(k,h,m,w,c.getIteration()),c.setLikeStatusForNewItemIfRequired(h,m),f.append(h);k.find("#sbl-no-results-section").addClass(b.AUI_HIDDEN_CLASS);
a.updateShowMoreSectionStatus(k,e);a.scrollTwoPixelsToActivateLazyLoad()},error:function(c){if(c.http.status===b.HTTP_ERROR_NO_CONTENT)for(e=b.END_OF_RECOMMENDATIONS_START_INDEX,k.find("#sbl-no-results-section").removeClass(b.AUI_HIDDEN_CLASS),c=1;c<l.length;c++)d(l[c]).remove();a.updateShowMoreSectionStatus(k,e)},indicator:k.find("#sbl-loading-section")})};h.on("a:pageUpdate",function(){var b;k&&0<k.length?(b=d("#sbl-row"))&&0<b.length&&k[0]!==b[0]&&(k=b,f=k.find("#sbl-items-row"),e=null,c.resetLikeDislikeState(),
g.resetRefinementsState(k,k.find("#sbl-refinement-row")),a.removeHrefFromShowMoreElement()):m()});m()})});
/* ******** */
(function(g){var h=window.AmazonUIPageJS||window.P,l=h._namespace||h.attributeErrors,e=l?l("ListsCommonUtilityAssets",""):h;e.guardFatal?e.guardFatal(g)(e,window):e.execute(function(){g(e,window)})})(function(g,h,l){g.when("A").register("al-ajax-response-state-parser",function(e){var b=e.$;return{getState:function(d){d=b(d).filter("#listsAjaxResponseStateSection");var a=b("#listsAjaxResponseStateSection");a&&0<=a.length&&a.remove();b(d).appendTo("body");e.state.parse();d=e.state("listsAjaxResponseState")||
{};return{hasError:d.hasError,authRequired:d.authRequired,authUrl:d.authUrl,error:d.error}}}});"use strict";g.when("A","al-bottomsheet-with-fallback","iphone-x-detector").register("bottom-sheet-utils",function(e,b,d){var a=e.$;e.declarative("al-sheet-with-fallback","click",function(f){f.$event.preventDefault();var a=f.data;f=b.create(b.buildComponentParams(a.componentName,a.showCloseButton,d.getAdjustedHeightPx(a.bottomsheetHeight),a.popoverHeight,a.popoverWidth,a.headerForPopover,a.viewLabel,a.viewDescription?
a.viewDescription:a.viewLabel,a.paddingForPopover,a.closeMessage),f.$target);b.show(f)});return{raiseBottomsheet:function(b){b=a(b).parents(".a-sheet-web-container");b.css("z-index",1E4);b.siblings(".a-sheet-lightbox").css("z-index",8E3)}}});"use strict";g.when("A").register("al-bottomsheet-with-fallback",function(e){function b(c){h.ueLogError&&h.ueLogError({logLevel:"ERROR",message:c})}var d,a;g.when("a-sheet").execute(function(c){d=c});g.when("a-modal").execute(function(c){a=c});var f=function(c){if(c)return d?
d.get(c.name):a.get(c.name);b("No ComponentParams specified. Please generate componentParams using .create(component)")},p={IS_POPOVER_LABEL:"IS_POPOVER",IS_BOTTOMSHEET_LABEL:"IS_BOTTOMSHEET"};return{create:function(c,f){if(c)return d?d.create(c):a.create(f,c),c;b("No ComponentParams specified. Please generate componentParams using .create(component)")},show:function(c){(c=f(c))?c.show():b("No View Created. Please create a view first by calling .create(component)")},hide:function(c){(c=f(c))?c.hide():
b("No View Created. Please create a view first by calling .create(component)")},changeHeight:function(c,a,e){var g=f(c);g?d?(g.changeHeight({height:a,duration:e}),c.bottomsheetHeight=a):(g.update({height:a}),c.popoverHeight=a):b("No View Found. Please create a view first by calling .create(component)")},remove:function(c){(c=f(c))?c.$container.remove():b("No View Created. Please create a view first by calling .create(component)")},exists:function(c){return f(c)?!0:!1},onCloseExecute:function(c,a,
f){if("function"!==typeof a)b("Expected onCloseFunction to be of type function");else if(c)e.on((d?"a:sheet":"a:popover")+":"+(f?"beforeHide":"afterHide")+":"+c.name,a);else b("No ComponentParams specified. Please generate componentParams using .create(component)")},onOpenExecute:function(c,a,f){if("function"!==typeof a)b("Expected onOpenFunction to be of type function");else if(c)e.on((d?"a:sheet":"a:popover")+":"+(f?"beforeShow":"afterShow")+":"+c.name,a);else b("No ComponentParams specified. Please generate componentParams using .create(component)")},
buildComponentParams:function(a,b,f,e,g,h,u,y,v,w){var x=d!==l,k={viewTypeLabel:x?p.IS_BOTTOMSHEET_LABEL:p.IS_POPOVER_LABEL,name:a};x?(k.closeType=w?"message":b?"icon":l,k.closeMessage=w,k.height=f,k.sheetLabel=u,k.sheetDescription=y,k.preloadDomId=a):(k.closeButton=b,k.height=e,k.width=g,k.dataStrategy="preload",k.header=h,k.hideHeader=h===l,k.padding=v!==l?v:"none",k.popoverLabel=u);return k},VIEW_TYPE_LABELS:p}});"use strict";g.when("A").register("lists-dpx-common-utils",function(e){return{urlParamValue:function(b){for(var d=
h.location.search.substring(1).split("\x26"),a=0;a<d.length;a++){var f=d[a].split("\x3d");if(f[0]===b)return f[1]}}}});"use strict";g.when("A").register("iphone-x-detector",function(){function e(){try{var a=b();d.forEach(function(b){if(-1<a.indexOf(b))return!0})}catch(f){}return!1}function b(){try{var a;a:{for(var b=document.cookie.split(";"),d=0;d<b.length;d++){for(var c=b[d];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf("amzn-app-ctxt\x3d")){a=c.substring(14,c.length);break a}}a=
null}if(a){var e=a.match(/"v":.*%2C*/);if(e)return e.toString().toLowerCase()}}catch(g){}return""}var d=["iphone10","iphone11"];return{isIphoneX:e,getDeviceType:b,getAdjustedHeightPx:function(a){try{if(a=parseInt(a,10),e())return a+40}catch(b){}return a}}});"use strict";g.when("A").register("amazon-lists-csrf-utils",function(e){return{addCsrfToken:function(b){var d=e.$("[data-amazon-lists-csrf-token]");0!==d.length&&(b["anti-csrftoken-a2z"]=d.attr("data-amazon-lists-csrf-token"))},hasCsrfToken:function(b){b=
b["anti-csrftoken-a2z"];return""!==b&&b!==l}}});"use strict";g.when("A","amazon-lists-csrf-utils").register("lists-ajax-handler",function(e,b){function d(a){b.hasCsrfToken(a)||b.addCsrfToken(a)}function a(a,c){"function"===typeof a?a(c):r("callableFunction passed in is not callable: "+a)}function f(a,c,b){m(a);b&&m(n(a,b));c&&m(n(a,c));c&&b&&m(n(a,c,b))}function g(a){m("lists_ajax_before_send");a&&m(n("lists_ajax_before_send",a))}function c(a){try{return a.replaceAll("/","_")}catch(c){r("Replace all failed for URL: "+
a)}}function n(a,c,b){return[a,c,b].filter(function(a){return""!==a&&a!==l}).join(":")}function m(a){q&&q.count(a,(q.count(a)||0)+1)}function r(a){h.ueLogError(l,{logLevel:"ERROR",attribution:"ListsCommonUtilityAssets::ListsAjaxHandler",message:a})}var t=e.$,q=h.ue;return{post:function(b){var e=b.headers||[];d(e);var h=c(b.url);g(h);t.ajax({type:"POST",url:b.url,cache:b.isCached,headers:e,data:b.params,timeout:b.timeout,success:function(c,d){f("lists_ajax_success",h,d);a(b.successCallback,c)},error:function(c,
d){f("lists_ajax_error",h,d);a(b.errorCallback)}})},get:function(b){var d=c(b.url);g(d);t.ajax({type:"GET",url:b.url,headers:b.headers,cache:b.isCached,data:b.params,timeout:b.timeout,success:function(c,e){f("lists_ajax_success",d,e);a(b.successCallback,c)},error:function(c,e){f("lists_ajax_error",d,e);a(b.errorCallback)}})}}})});
/* ******** */
(function(g){var e=window.AmazonUIPageJS||window.P,l=e._namespace||e.attributeErrors,c=l?l("ListsCreateAssets",""):e;c.guardFatal?c.guardFatal(g)(c,window):c.execute(function(){g(c,window)})})(function(g,e,l){g.when("A","al-bottomsheet-with-fallback","al-ajax-response-state-parser","create-new-list-hz","bottom-sheet-utils","lists-dpx-common-utils").execute(function(c,f,z,v,m,d){function t(){m.raiseBottomsheet("#create-list-form-wrapper")}function b(a){n.ajax({type:"GET",url:"/hz/wishlist/create",
data:{createIngressName:a.createIngressName},success:A,error:function(a,b,c){r("Failed to fetch CreateList-Form. Status: "+b+"; Error: "+c)},timeout:2E4})}function A(a){var b=n(a).filter("#createlist-form-container");a=z.getState(a);a.authRequired&&a.authUrl?e.location.href=a.authUrl:a.hasError?r("CreateList form has error \x3d "+a.error):(n("#create-list-form-wrapper").html(b),p("#create-list-form-spinner"),u("#create-list-form-wrapper"))}function p(a){n(a).addClass("aok-hidden")}function u(a){n(a).removeClass("aok-hidden")}
function r(a){f.changeHeight(h,110);p("#create-list-form-spinner");p("#create-list-form-wrapper");u("#createlist-form-loading-error-section");e.ueLogError&&e.ueLogError({logLevel:"FATAL",message:a});if(!y())f.onCloseExecute(h,k,!1)}function k(){p("#createlist-form-loading-error-section");p("#create-list-form-wrapper");u("#create-list-form-spinner");e.location.reload()}function q(a,b,c){r("List creation failed. Status: "+b+"; Error: "+c)}function B(a){a.hasError?r("List creation failed with Error: "+
a.error):e.location="/hz/wishlist/ls/"+a.listExternalId}function y(){return"DETAIL_PAGE"===(c.state("createListIngressState")||{}).ingressName&&w}var n=c.$,w,x,h;c.declarative("awl-create-list-bottomsheet","click",function(a){var d=a.data||{};c.state("createListIngressState",{ingressName:d.ingressName});var e=d.componentName;e&&"function"==typeof uet&&uet("bb",e,{wb:1});e=a.data||{};h=f.create(f.buildComponentParams(e.componentName,!0,340,430,400,l,e.viewName,e.viewDescription,l,l),a.$target);f.show(h);
if(y())f.onOpenExecute(h,t);b(d);(a=d.componentName)&&"function"==typeof uet&&uet("cf",a,{wb:1});a&&"function"==typeof uex&&uex("ld",a,{wb:1})});c.declarative("create-list-bottomsheet-submit","click",function(a){a=a.data||{};var b=n("#createlist-list-name-textinput").val();b===l||0===b.length?n("#createlist-list-name-textinput").parent("div").addClass("a-form-error"):(p("#createlist-form-loading-error-section"),p("#create-list-form-wrapper"),u("#create-list-form-spinner"),a.listName=b,(b=d.urlParamValue("createAndAddAsin"))&&
0<b.length&&(a.asin=b),y()?((b=w.getAsin())&&0<b.length&&(a.asin=b),v(a,w.handleSuccess,w.handleError)):"HEARTS_BOTTOMSHEET"===(c.state("createListIngressState")||{}).ingressName&&x?(a.isDefault=!0,f.hide(h),v(a,x.onCreateSuccess,x.onCreateError)):v(a,B,q))});g.when("dp-create-list-handler").execute(function(a){w=a});g.when("hearts-create-list-handler").execute(function(a){x=a});c.on("a:expander:create-list-learn-more-popover:toggle:expand",function(){h.viewTypeLabel===f.VIEW_TYPE_LABELS.IS_BOTTOMSHEET_LABEL?
f.changeHeight(h,425):f.changeHeight(h,580)});c.on("a:expander:create-list-learn-more-popover:toggle:collapse",function(){f.changeHeight(h,340);h.viewTypeLabel===f.VIEW_TYPE_LABELS.IS_BOTTOMSHEET_LABEL?f.changeHeight(h,340):f.changeHeight(h,430)});c.declarative("createlist-list-name-validation",["keyup"],function(a){0!==a.$target.context.value.length&&n("#createlist-list-name-textinput").parent("div").hasClass("a-form-error")&&n("#createlist-list-name-textinput").parent("div").removeClass("a-form-error")})});
"use strict";g.when("A","create-new-list-hz","a-modal","lists-dpx-common-utils").register("create-utils",function(c,f,g,v){function m(b){b&&"function"==typeof uet&&uet("cf",b,{wb:1});b&&"function"==typeof uex&&uex("ld",b,{wb:1})}var d=c.$,t=function(b){b="#"+(b.formId||"addToCart");0===d(b).length&&(b="#atwl-form");return b};c.declarative("show-create-list",["click touchstart"],function(b){b.$event.preventDefault();var d=b.data;if(d.url||d.name)"function"==typeof uet&&uet("bb","create-list-dp-widget",
{wb:1}),g.create(b.$target,d).show({padding:"none"}),m("create-list-dp-widget");c.on("a:popover:afterHide:redesigned-create-list",function(){g.remove("redesigned-create-list")})});c.declarative("list-name-validation",["keyup"],function(b){0!==b.$target.context.value.length&&d("#alert-list-name").is(":visible")&&(d("#alert-list-name").addClass("aok-hidden"),d("#alert-list-name").parent("div").find("input").each(function(){d(this).removeClass("a-form-error")}))});return{submitCreate:function(b,g,p){b.$event.preventDefault();
var u=d("#create-list-form").closest(".a-popover"),r=d("#list-name").val();if(""===r)d("#alert-list-name").removeClass("aok-hidden"),d("#alert-list-name").parent("div").find("input").each(function(){d(this).addClass("a-form-error")});else{var k={},q=c.state("popoverState")||{},q=t(q),m=v.urlParamValue("createAndAddAsin");m&&1<m.length&&(k.asin=m);"1"===d("#is-create-and-add").val()&&(q=d(q).find("#ASIN, [name^\x3d'ASIN'], [name\x3d'a'], [name\x3d'asin']").val(),"undefined"!==q&&(k.asin=d.trim(q)));
d("#create-list-loading").removeClass("aok-hidden");u.find("#popover-spinner .a-popover-loading").show();d("#create-list-form").addClass("aok-hidden");k.listName=r;k.sid=b.data.sessionId;k.vendorId=b.data.sourceVendorId;k.privacyStatus=b.data.privacyStatus;k.listType=b.data.listType;if(b=e.ue?e.ue.rid:l)k.relatedRequestID=b;f(k,g,p)}}}});"use strict";g.when("A","amazon-lists-csrf-utils").register("create-new-list-hz",function(c,f){var g=c.$;return function(c,m,d){var t=[];f.addCsrfToken(t);var b=
e.ue?e.ue.rid:l;b&&(c.relatedRequestID=b);c.isJson=!0;return g.ajax("/hz/wishlist/create/newlist",{type:"POST",headers:t,data:c,success:m,error:d,timeout:1E4})}})});
/* ******** */
(function(n){var p=window.AmazonUIPageJS||window.P,q=p._namespace||p.attributeErrors,c=q?q("HeartsAssets",""):p;c.guardFatal?c.guardFatal(n)(c,window):c.execute(function(){n(c,window)})})(function(n,p,q){"use strict";n.when("A","content-margin-utils","hearts-logging-utils","heart-error-utils","hearts-enabled").register("heart-icon-event-handlers-module",function(c,b,d,f){var k={},h;c.declarative("lists-hearts-heart-action","click",function(a){var r=a.data||{},m=a.$currentTarget.closest(".amazon-lists-heart-container"),
b=m.find(".amazon-lists-heart-icon-container"),u=m.find(".amazon-lists-filled-heart"),g=m.find(".amazon-lists-empty-heart"),f=m.find("[aria-checked]"),t=m.find(".amazon-lists-heart-flyout");if(1===u.length&&1===g.length&&1===t.length){a.$event.stopPropagation();a.$event.preventDefault();var v=r.itemExternalId;v in k||(k[v]=!0,m={itemExternalId:v,$heartsContainer:m,$heartsIconContainer:b,$filledHeart:u,$emptyHeart:g,$heartButton:f,isFilledByAttribute:0<f.length,$flyout:t},b=r.flyoutMarginSelector,
u=m.isFilledByAttribute?"true"===m.$heartButton.attr("aria-checked"):m.$emptyHeart.hasClass("aok-hidden"),u?(w(m),d.incrementCount(d.REMOVE_FROM_HEARTS_COUNTER),d.logEventDetails(a.$event),a=m.$heartsContainer.data("heartsListId"),a===q&&h!==q&&(a=h),c.post("/hz/wishlist/hearts/remove",{headers:y(r),params:p(r,a),success:n(m,b,r.isShortenedResponseView),error:l(m)})):(x(m),d.incrementCount(d.ADD_TO_HEARTS_COUNTER),d.logEventDetails(a.$event),c.post("/hz/wishlist/hearts/add",{headers:y(r),params:p(r),
success:z(m,b,r.isShortenedResponseView),error:e(m)})))}});var z=function(a,r,d){return function(b){delete k[a.itemExternalId];if(b.hasError)w(a),f.showError(a,b.errorContent,d,r);else{var c=b.listExternalId;a.$heartsContainer.data("heartsListId",c);h===q&&(h=c);t(a,b.flyoutContent,r);g(a.itemExternalId,!0)}}},e=function(a){return function(){delete k[a.itemExternalId];w(a)}},n=function(a,b,d){return function(c){delete k[a.itemExternalId];if(c.hasError)x(a),f.showError(a,c.errorContent,d,b);else{var e=
a.$heartsContainer,l=c.listExternalId;e.data("heartsListId",l);h===q&&(h=l);e.data("heartsListId")&&e.removeData("heartsListId");t(a,c.flyoutContent,b);g(a.itemExternalId,!1)}}},l=function(a){return function(){delete k[a.itemExternalId];x(a)}},g=function(a,b){c.trigger("hearts:stateChange",{itemExternalId:a,isHearted:b})},p=function(a,b){a={vendorId:a.vendorId||"listsadoption.hearts.unknown",itemType:a.itemType.toLowerCase(),itemExternalId:a.itemExternalId,isShortenedResponseView:a.isShortenedResponseView};
b&&(a.listExternalId=b);return a},y=function(a){var b=[];a.antiCsrfToken&&(b["anti-csrftoken-a2z"]=a.antiCsrfToken);return b},x=function(a){a.isFilledByAttribute?a.$heartButton.attr("aria-checked","true"):(a.$emptyHeart.addClass("aok-hidden"),a.$filledHeart.removeClass("aok-hidden"))},w=function(a){a.isFilledByAttribute?a.$heartButton.attr("aria-checked","false"):(a.$filledHeart.addClass("aok-hidden"),a.$emptyHeart.removeClass("aok-hidden"))},t=function(a,d,h){var e=a.$flyout,g=a.$heartsContainer,
f=g.data("timer");f&&clearTimeout(f);e.html(d);d=e.find(".amazon-lists-heart-list-name-template");d.remove();f=a.$flyout.find(".amazon-lists-heart-flyout-text");f.html(f.html().replace("LIST_NAME",d[0].outerHTML));e.removeClass("aok-hidden");d=g.attr("style");g.attr("style","");f=e.outerWidth(!0)+2+1;h=b.getMaxHeartsContainerWidth(g,h);h=Math.min(f,h);e.addClass("aok-hidden");g.attr("style",d);c.animate(g,{width:h},300,"ease-out",function(){e.removeClass("aok-hidden");var b=c.delay(function(){A(a)},
5E3);g.data("timer",b)})},A=function(a){var b=a.$flyout;b.html("");c.animate(a.$heartsContainer,{width:34},300,"ease-out",function(){b.addClass("aok-hidden")})};(function(){var a=document.createElement("style");document.head.appendChild(a);a.sheet.insertRule(".amazon-lists-heart-container.amazon-lists-heart-container{visibility: visible;opacity: 0.95;}",0)})()});"use strict";n.when("A","hearts-logging-utils","hearts-enabled").register("heart-flyout-event-handlers",function(c,b){c.declarative("amazon-lists-heart-add-flyout-action",
"click",function(d){var c=d.data||{};d.$event.stopPropagation();d.$event.preventDefault();b.incrementCount(b.CLICK_ADD_TO_HEARTS_LIST_TOAST_COUNTER);c.listExternalId&&(p.location.href="/hz/wishlist/ls/"+c.listExternalId)})});"use strict";n.when("A","hearts-enabled").register("content-margin-utils",function(c){return{getMaxHeartsContainerWidth:function(b,d){var f=.8*c.$(p).width(),k=0;b=b.closest(d);1===b.length&&(f=b.width(),k=4);return f-k},getErrorDisplayWidth:function(b,d){b=b.closest(d);return 1===
b.length?b.width():null}}});"use strict";n.when("hearts-enabled").register("hearts-logging-utils",function(){var c=p.ue,b=function(b){c&&c.count(b,(c.count(b)||0)+1)};return{ADD_TO_HEARTS_COUNTER:"addToHeartsList",REMOVE_FROM_HEARTS_COUNTER:"removeFromHeartsList",CLICK_ADD_TO_HEARTS_LIST_TOAST_COUNTER:"clickAddToHeartsListToast",MOVE_ITEM_COUNTER:"reusablehearts:moveToList",CHANGE_DEFAULT_AND_MOVE_COUNTER:"reusablehearts:changeDefaultAndMove",CREATE_LIST_COUNTER:"reusablehearts:createList",incrementCount:b,
logEventDetails:function(c){if("undefined"!==typeof c){var f=c.offsetX-13;c=c.offsetY-10;if("undefined"!==typeof f&&"undefined"!==typeof c){var k,h;17<f?k="Right":-17>f&&(k="Left");17<c?h="Bottom":-17>c&&(h="Top");k&&b("heartsListClickMargin"+k);h&&(b("heartsListClickMargin"+h),k&&b("heartsListClickMargin"+h+k))}}}}});n.when("A","content-margin-utils","native-heart-utils","hearts-enabled").register("heart-error-utils",function(c,b,d){var f=function(h,d,e,f){var l=h.$flyout,g=h.$heartsContainer,n=
h.$heartsIconContainer,p,q;e?p=b.getErrorDisplayWidth(g,f):q=b.getMaxHeartsContainerWidth(g,f);if(null!==p||null!==q)g.addClass("aok-hidden"),n.addClass("aok-hidden"),g.removeClass("amazon-lists-heart-container"),e?g.addClass("amazon-lists-popup-error-container"):g.addClass("amazon-lists-flyout-error-container"),e?(l.width(p),g.height(0),g.css("margin",0),g.css("top",0)):g.width(0),g.removeClass("aok-hidden"),l.html(d),l.removeClass("amazon-lists-heart-flyout"),e&&l.removeClass("aok-nowrap"),l.removeClass("aok-hidden"),
l.children().first().width("100%"),e?(d=l.height(),d={height:d,"margin-top":-1*d}):d={width:Math.min(l.width(),q)},c.animate(g,d,300,"ease-out",function(){l.removeClass("aok-hidden");c.delay(function(){k(h,e)},5E3)})},k=function(b,d){var e=b.$heartsContainer,f=b.$heartsIconContainer,l=b.$flyout;c.animate(e,d?{height:0,"margin-top":0}:{width:0},300,"ease-out",function(){e.addClass("aok-hidden");e.removeClass("amazon-lists-popup-error-container");e.addClass("amazon-lists-heart-container");e.attr("style",
"");f.removeClass("aok-hidden");l.html("");l.addClass("amazon-lists-heart-flyout");d&&l.addClass("aok-nowrap");e.removeClass("aok-hidden")})};return{showError:function(b,c,e,k){d.canShowNativeHeartsFab()?n.when("mash","ContextualActions").execute(function(l,g){g.renderNativeErrorToast?g.renderNativeErrorToast({successCallback:function(){},failCallback:function(){f(b,c,e,k);d.logCounterMetricsForNativeHeartFab("lists:dp:nativeHearts:showErrorHeartErr")},asin:b.itemExternalId,startTimeMs:Date.now()}):
f(b,c,e,k)}):f(b,c,e,k)}}});"use strict";n.when("A","hearts-enabled").register("native-heart-utils",function(){return{canShowNativeHeartsFab:function(){return!1}}})});
/* ******** */
(function(k){var l=window.AmazonUIPageJS||window.P,m=l._namespace||l.attributeErrors,f=m?m("SearchMultiQuestionWidgetAssets",""):l;f.guardFatal?f.guardFatal(k)(f,window):f.execute(function(){k(f,window)})})(function(k,l,m){k.when("rush-dispatcher","rush-util").register("cse-multi-question-actions",function(f,b){return{listeners:{update:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");return c+":multi-question:update-selections"},apply:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");
return c+":multi-question:apply-selections"},remove:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");return c+":multi-question:remove-selections"}}}});"use strict";k.when("rush-dispatcher","rush-util","cse-multi-question-actions").register("cse-question-actions",function(f,b,c){function d(a,b){if(!a)throw Error(b);}var g=f.trigger,h;h={answered:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:answered"},previousAnswered:function(a){d(b.isNotBlank(a),
"questionId must be a non-empty string");return a+":question:previous-answered"},hide:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:hide-question"},show:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:show-question"}};return{listeners:h,triggers:{updateSelections:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(c.listeners.update(a),e)},applySelections:function(a,e){d(b.isNotBlank(a),
"widget must be a non-empty string");return g(c.listeners.apply(a),e)},removeSelections:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(c.listeners.remove(a),e)},updatePrevious:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(h.previousAnswered(a),e)},show:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(h.show(a))},hide:function(a,e){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(h.hide(a),
{questionToShow:e})}}}});"use strict";k.when("rush-dispatcher","rush-util","cse-question-actions").register("cse-answer-actions",function(f,b,c){function d(a,b){if(!a)throw Error(b);}var g=f.trigger,h;h={deselect:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":answer:deselect"}};return{listeners:h,triggers:{selected:function(a,e){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(c.listeners.answered(a),e)},deselect:function(a,c){d(b.isNotBlank(a),
"questionId must be a non-empty string");d(b.isNotBlank(c),"uuid must be a non-empty string");return g(h.deselect(a),{selectedUuid:c})}}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("AEEDiscoveryDeepCheckPromiseAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(l){var m=window.AmazonUIPageJS||window.P,n=m._namespace||m.attributeErrors,k=n?n("PostsSharedFeedAssets","PostsSharedFeedAssets"):m;k.guardFatal?k.guardFatal(l)(k,window):k.execute(function(){l(k,window)})})(function(l,m,n){var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"===typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},p=function(){function g(f,e){for(var a=0;a<e.length;a++){var b=
e[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(f,b.key,b)}}return function(f,e,a){e&&g(f.prototype,e);a&&g(f,a);return f}}();l.now("posts-sushi-client").execute(function(g){"undefined"===typeof g&&l.register("posts-sushi-client",function(){var f=["messageId","timestamp"];return function(){function e(a,b){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.endpoint=b;this.window=a;this.eventsQueue=[];this.eventsDictionary=
{};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.rejectedEvents=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=function(b){var f=function(){};b=function(){var b=function(){if(a.XDomainRequest){var d=new a.XDomainRequest;d.onerror=f;d.ontimeout=f;d.onprogress=f;d.onload=f;d.timeout=0;return d}if(a.XMLHttpRequest){d=new a.XMLHttpRequest;
if(!("withCredentials"in d))throw"";return d}return null};return{send:function(a,c){if(c&&a){var h=b();if(!h)throw"";h.open("POST",a,!0);h.setRequestHeader&&h.setRequestHeader("Content-type","text/plain");h.send(c)}},isSupported:!0}}();var e=function(){return{send:function(b,d){if(b&&d&&!a.navigator.sendBeacon(b,d))throw"";},isSupported:!!a.navigator.sendBeacon&&!(a.cordova&&a.cordova.platformId&&"ios"===a.cordova.platformId)}}();return{ajaxClient:b,beaconClient:e}}(this);this.compressor=function(a){var b=
function(d){if(d)switch("undefined"===typeof d?"undefined":k(d)){case "number":return!(d!==d||Infinity===d)&&d.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return d.length>a.dictionaryIndex.length;default:return!0}return!1},e=function(d){a.eventsDictionary[d]||(a.eventsDictionary[d]=a.dictionaryIndex++,a.reverseEventsDictionary[a.eventsDictionary[d]]=d);return a.eventsDictionary[d]},g=function(a){if(b(a)){var c=0;a instanceof Array?c=2:a instanceof Function?c=null:
a instanceof Object&&(c=1);switch(c){case 0:return e(a);case 2:for(var h=[],c=0;c<a.length;c++)h[c]=g(a[c]);return h;case 1:c={};for(h in a)Object.prototype.hasOwnProperty.call(a,h)&&(c[e(h)]=-1===f.indexOf(h)?g(a[h]):a[h]);return c}}return a};return{compressData:g,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},events:a.eventsQueue})}}}(this)}p(e,[{key:"onBeforeUnload",value:function(){!0!==this.unloadHandlerCalled&&(this.flush(this),this.unloadHandlerCalled=!0)}},
{key:"stringify",value:function(a){try{return JSON.stringify(a)}catch(b){console.warn("Fail to stringify data")}return null}},{key:"resetBatch",value:function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0}},{key:"sendWithClient",value:function(a){if(null==this.endpoint||""==this.endpoint)this.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var b=this.compressor.buildPOSTObject();
return a.send(this.endpoint,b)}throw"";}}},{key:"sendWithPriority",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];for(a=0;a<b.length;a++){c=b[a];try{return this.sendWithClient(c)}catch(f){}}return null}},{key:"flush",value:function(a){a.eventsQueue.length&&(a.sendWithPriority(a.transportationClient.beaconClient||{},a.transportationClient.ajaxClient||{}),a.resetBatch())}},{key:"startHighPriorityQueueTimer",value:function(){0===this.highPriorityFlushInterval?this.flush(this):
this.highPriorityTimer||(this.highPriorityTimer=this.window.setTimeout(this.flush,this.highPriorityFlushInterval,this))}},{key:"startLowPriorityQueueTimer",value:function(){this.lowPriorityTimer||(this.lowPriorityTimer=this.window.setTimeout(this.flush,this.lowPriorityFlushInterval,this))}},{key:"generateMessageId",value:function(a,b){return a+"-"+b+"-"+this.eventSequence}},{key:"getCurrentISODate",value:function(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?
a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}},{key:"decorateEvent",value:function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())}},{key:"startTimers",value:function(a){(a||{}).n?this.startHighPriorityQueueTimer():
this.startLowPriorityQueueTimer()}},{key:"encodeEvent",value:function(a,b,c){b=b.length;(499===this.eventsQueue.length||524288<this.batchSize+b)&&this.flush(this);this.batchSize+=b;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(c)}},{key:"addEvent",value:function(a,b){this.decorateEvent(a,b);var c=this.stringify(a);return c?(this.encodeEvent(a,c,b),!0):!1}},{key:"isValidAPIParam",value:function(a,b){return a&&-1<a.constructor.toString().indexOf(b)}},{key:"isMaxCallsReached",
value:function(){this.eventSequence++;5E4<this.eventSequence&&this.ueCount("SushiClientMaxCallsReached");return 5E4<this.eventSequence}},{key:"isValidAPICall",value:function(a,b){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")}},{key:"ueCount",value:function(a,b){"undefined"!==typeof ue&&ue&&ue.count&&ue.count("ACEPostsMetrics:"+a,0===b?0:b||(ue.count("ACEPostsMetrics:"+a)||0)+1)}},{key:"processEvent",value:function(a,b){var c=this.unloadHandlerCalled=!1;this.options=b||{};this.isValidAPICall(a,
this.options)&&(c=this.addEvent(a,this.options));c?this.ueCount("ClientEventsSuccess:"+a.event_type):(console.error("Invalid JS SushiEel API call"),this.ueCount("ClientEventsFailed:"+a.event_type));return c}}]);return e}()})});"use strict";l.now("posts-clamp").execute(function(g){"undefined"===typeof g&&l.register("posts-clamp",function(){return function(f,e){function a(a,b){m.getComputedStyle||(m.getComputedStyle=function(a){this.el=a;this.getPropertyValue=function(b){var d=/(-([a-z]){1})/g;"float"==
b&&(b="styleFloat");d.test(b)&&(b=b.replace(d,function(a,b,d){return d.toUpperCase()}));return a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null};return this});return m.getComputedStyle(a).getPropertyValue(b)}function b(b){var c=a(f,"line-height");"normal"==c&&(c=1.2*parseInt(a(f,"font-size")));return parseInt(c)*b}function c(a){if(a.lastChild.children&&0<a.lastChild.children.length)return c(Array.prototype.slice.call(a.children).pop());if(a.lastChild&&a.lastChild.nodeValue&&""!=a.lastChild.nodeValue&&
a.lastChild.nodeValue!=e.truncationChar)return a.lastChild;a.lastChild.parentNode.removeChild(a.lastChild);return c(f)}function g(a,b){if(b&&!(f.clientHeight<=b))for(;f.clientHeight>b;){var c=a.nodeValue.split("");if(1<c.length){do{c.pop();var e=c.join("");a.nodeValue=e}while(/[\s\n,.]+/.test(c[c.length-1])&&1<c.length)}k&&(f.innerHTML=a.nodeValue+k.innerHTML)}}if(f!==n){e=e||{};var l=e.clamp||2,k;e.truncationHTML&&(k=document.createElement("span"),k.innerHTML=e.truncationHTML);l=b(l);g(c(f),l)}}})})});
/* ******** */
(function(l){var m=window.AmazonUIPageJS||window.P,n=m._namespace||m.attributeErrors,q=n?n("BrandFollowButtonJS",""):m;q.guardFatal?q.guardFatal(l)(q,window):q.execute(function(){l(q,window)})})(function(l,m,n){var q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"===typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u=function(){function g(c,a){for(var e=0;e<a.length;e++){var f=a[e];f.enumerable=
f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(c,a,e){a&&g(c.prototype,a);e&&g(c,e);return c}}();l.when("A").register("brand-follow-constants",function(){return{Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR:"span[class*\x3dbrand-follow-button-container]",Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR:"span[class*\x3dbrand-follow-button]",Brand_FOLLOW_BUTTON_SELECTOR:"button[data-bfid]",Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR:'button[data-bfid][data-showtooltip\x3d"true"]',
BRAND_FOLLOW_STATUS_MAP:"brand-follow-status",BRAND_FOLLOW_STATUS:{FOLLOWING:"following",NOT_FOLLOWING:"not_following",PENDING:"pending",NOT_SIGNED_IN:"not_signed_in",ERROR:"error"},BRAND_FOLLOW_CSRF_KEY:"brand-follow-csrf",BRAND_FOLLOW_CSRF_DATA_KEY:"csrf",BRAND_FOLLOW_LAST_CLICK_EVENT_MAP:"brand-follow-last-click-event-map",BFID_DATA_KEY:"bfid",FOLLOW_STATUS_DATA_KEY:"followstatus",FOLLOW_TEXT_DATA_KEY:"followtext",FOLLOWING_TEXT_DATA_KEY:"followingtext",REQUEST_ID_DATA_KEY:"requestid",PLACEMENT_TYPE_DATA_KEY:"placementtype",
PLACEMENT_SUB_TYPE_DATA_KEY:"placementsubtype",PLACEMENT_ID_DATA_KEY:"placementid",COMPONENT_TYPE_DATA_KEY:"componenttype",COMPONENT_ID_DATA_KEY:"componentid",ELEMENT_TYPE_DATA_KEY:"elementtype",ELEMENT_ID_DATA_KEY:"elementid",TOOLTIP_TEXT_DATA_KEY:"tooltiptext",BACK_BUTTON_SUPPORT_ENABLED_DATA_KEY:"backbuttonsupportenabled",ARIA_LABEL_KEY:"aria-label",ARIA_LABEL_FOLLOW_DATA_KEY:"arialabelfollow",ARIA_LABEL_FOLLOWING_DATA_KEY:"arialabelfollowing",HIDE_TOOLTIP_KEY:"brand_follow_hide_tooltip",TOOLTIP_DISPLAY_TIME:5E3,
TOOLTIP_STATUS_SHOWN:"SHOWN",TOOLTIP_STATUS_NOT_SHOWN:"NOT_SHOWN",TOOLTIP_STATUS_DISABLED:"DISABLED",FOLLOW_AJAX_TIMEOUT:2E3,FOLLOW_AJAX_RETRIES:2,FOLLOW_ENDPOINT:"/followv2/follow",FOLLOW_ENTITY_TYPE:"brand",FOLLOW_REF_TAG:"bft",FOLLOW_CSM_PREFIX:"BrandFollow",FOLLOW_CSM_SUCCESS:"Success",FOLLOW_CSM_FAIL:"Fail",FOLLOW_CSM_FOLLOW:"Follow",FOLLOW_CSM_UNFOLLOW:"Unfollow",FOLLOW_CSM_GET_FOLLOW_STATUS:"GetFollowStatus",HTTP_GET:"GET",HTTP_POST:"POST",HTTP_DELETE:"DELETE",SIGN_IN_PORTAL:"/ap/signin",AUTH_PORTAL_ASSOC_HANDLE:{"amazon.com":"usflex",
"amazon.co.uk":"gbflex","amazon.de":"deflex","amazon.fr":"frflex","amazon.es":"esflex","amazon.in":"inflex","amazon.it":"itflex","amazon.co.jp":"jpflex","amazon.ca":"caflex"},BREAKPOINTS:{MOBILE:840},SUSHI_ENDPOINT:{gamma:"https://unagi-na.amazon.com/1/events/com.amazon.eel.BrandFollowButtonMetrics.Gamma.ClientEvents",prod:"https://unagi-na.amazon.com/1/events/com.amazon.eel.BrandFollowButtonMetrics.Prod.ClientEvents"},EVENT_TYPE:{FOLLOW:"Follow",UNFOLLOW:"Unfollow"}}});"use strict";l.when("A","brand-follow-constants").register("brand-follow-auth-portal-link-builder",
function(g,c){return{signin:function(){var a={"openid.ns":"http://specs.openid.net/auth/2.0","openid.claimed_id":"http://specs.openid.net/auth/2.0/identifier_select","openid.identity":"http://specs.openid.net/auth/2.0/identifier_select","openid.mode":"checkid_setup","openid.return_to":m.location.href,"openid.assoc_handle":c.AUTH_PORTAL_ASSOC_HANDLE[m.location.hostname.replace(/.+?(?=amazon)/,"")]};return c.SIGN_IN_PORTAL+"?"+g.$.param(a)}}});"use strict";l.register("brand-follow-csm-helper",function(){return{incrementCSMCounter:function(g,
c){m.ue&&m.ue.count&&m.ue.count(g,(m.ue.count(g)||0)+1,c)},logBodyBegin:function(g){"function"==typeof uet&&uet("bb",g,{wb:1})},sendCsmMetrics:function(g){"function"==typeof uex&&uex("ld",g,{wb:1})}}});"use strict";l.when("A","brand-follow-constants","brand-follow-csm-helper").register("brand-follow-data-storage-helper",function(g,c,a){var e={set:function(a,e,c){var h={};h[e]=c;g.state(a,h)},get:function(a){return g.state(a)},setFollowStatus:function(a,k){e.set(c.BRAND_FOLLOW_STATUS_MAP,a,k)},getFollowStatus:function(a){var k=
e.get(c.BRAND_FOLLOW_STATUS_MAP);return k===n?n:k[a]},setLastClickEvent:function(a,k){e.set(c.BRAND_FOLLOW_LAST_CLICK_EVENT_MAP,a,k)},getLastClickEvent:function(f){var k=c.FOLLOW_CSM_PREFIX+":dataStorageHelper:getLastClickAction";a.incrementCSMCounter(k);var p=e.get(c.BRAND_FOLLOW_LAST_CLICK_EVENT_MAP);if(p===n)return a.incrementCSMCounter(k+":emptyMap"),n;(f=p[f])||a.incrementCSMCounter(k+":notFoundInMap");return f},setCsrf:function(a){e.set(c.BRAND_FOLLOW_CSRF_KEY,c.BRAND_FOLLOW_CSRF_DATA_KEY,a)},
getCsrf:function(){var a=e.get(c.BRAND_FOLLOW_CSRF_KEY);return a===n?n:a[c.BRAND_FOLLOW_CSRF_DATA_KEY]}};return e});"use strict";l.when("A","brand-follow-constants","brand-follow-data-storage-helper","brand-follow-csm-helper").register("brand-follow-afs-helper",function(g,c,a,e){var f={makeCallToAfs:function(a,f,h,b,d,r){var t=c.FOLLOW_CSM_PREFIX+":"+a;e.incrementCSMCounter(t);(function v(l){e.logBodyBegin(r);g.$.ajax({url:f,type:a,headers:{Accept:"application/json","Content-Type":"application/json"},
data:h,dataType:"json",cache:!1,timeout:c.FOLLOW_AJAX_TIMEOUT,success:function(a,d,k){e.incrementCSMCounter(t+":"+c.FOLLOW_CSM_SUCCESS);e.sendCsmMetrics(r);"function"===typeof b&&b(a,d,k)},error:function(b,h,f){if("timeout"===h&&l)e.incrementCSMCounter(t+":timeout"),v(--l);else{var p=t+":"+c.FOLLOW_CSM_FAIL;e.incrementCSMCounter(p);"timeout"===h&&e.incrementCSMCounter(p+":timeout");e.sendCsmMetrics(r);m.ueLogError&&m.ueLogError({logLevel:"WARN",attribution:"BrandFollowKataComponentAssets",message:"AFS "+
a+" call failed with status "+h+", error thrown: "+f+", response text: "+b.responseText});"function"===typeof d&&d(b,h,f)}}})})(c.FOLLOW_AJAX_RETRIES)},getFollowStatusAndInitCsrf:function(e,p,h,b){f.makeCallToAfs(c.HTTP_GET,c.FOLLOW_ENDPOINT+"/"+e+"_"+c.FOLLOW_ENTITY_TYPE,{ref:c.FOLLOW_REF_TAG},function(d,e,c){d.signedIn?(a.setCsrf(d.csrf),"function"===typeof p&&p(d)):"function"===typeof b&&b()},h,c.FOLLOW_CSM_PREFIX+":"+c.FOLLOW_CSM_GET_FOLLOW_STATUS)},follow:function(e,p,h,b){var d=c.FOLLOW_CSM_PREFIX+
":"+c.FOLLOW_CSM_FOLLOW,r=function(){f.makeCallToAfs(c.HTTP_POST,c.FOLLOW_ENDPOINT,JSON.stringify({authenticity_token:a.getCsrf(),entity_id:e,category:c.FOLLOW_ENTITY_TYPE,ref:c.FOLLOW_REF_TAG}),p,h,d)};a.getCsrf()===n?f.getFollowStatusAndInitCsrf(e,r,n,b):r()},unfollow:function(e,p,h){var b=c.FOLLOW_CSM_PREFIX+":"+c.FOLLOW_CSM_UNFOLLOW,d=function(){f.makeCallToAfs(c.HTTP_DELETE,c.FOLLOW_ENDPOINT+"/"+e+"_"+c.FOLLOW_ENTITY_TYPE+"?"+g.$.param({authenticity_token:a.getCsrf(),ref:c.FOLLOW_REF_TAG}),n,
p,h,b)};a.getCsrf()===n?f.getFollowStatusAndInitCsrf(e,d):d()}};return f});"use strict";l.when("A").register("brand-follow-button-tooltip-factory",function(g){g=g.$;var c=g("\x3cdiv class\x3d'brand-follow-tooltip-root'/\x3e").appendTo("body");return{getOrCreateTooltip:function(){0===c.children().length&&c.append("\x3cdiv role\x3d'tooltip' class\x3d'bf-tooltip' id\x3d'bf-tooltip' aria-hidden\x3d'true' style\x3d'z-index: 299; visibility: hidden; opacity: 0;'\x3e\x3cdiv class\x3d'bf-tooltip-inner'\x3eFollow to see more from this brand on Amazon\x3c/div\x3e\x3cdiv class\x3d'bf-arrow-border'\x3e\x3cdiv class\x3d'bf-arrow'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");
return c.children().first()}}});"use strict";l.when("A").register("brand-follow-button-tooltip-position",function(g){function c(){if(1===g.viewport().zoom)return{top:0,left:0};h||(h=p('\x3cspan id\x3d"bf-tooltip-offset-tracker"\x3e\x3c/span\x3e'),p("body").prepend(h));var b;p.withoutRtl(function(){b=h.offset()});return b}function a(b,a){var e=g.viewport(),h=c(),k,f;p.withoutRtl(function(){k=a.offset();f=b.offset()});k.top-=h.top;k.left-=h.left;f.top-=h.top;f.left-=h.left;var m=a.outerWidth(),l=a.outerHeight(),
n=b.outerWidth(!0),q=b.outerHeight(!0);return{windowWidth:e.width,windowHeight:e.height,windowTop:e.scrollTop,windowLeft:e.scrollLeft,windowRight:e.scrollLeft+e.width,windowBottom:e.scrollTop+e.height,zoomTop:h.top,zoomLeft:h.left,triggerWidth:m+1,triggerHeight:l,triggerTop:k.top-1,triggerLeft:k.left-1,triggerRight:k.left+m+1,triggerBottom:k.top+l+1,triggerVerticalCenter:k.top+l/2,triggerHorizontalCenter:k.left+m/2,popoverWidth:n,popoverHeight:q,popoverTop:f.top,popoverLeft:f.left,popoverRight:f.left+
n,popoverBottom:f.top+q,popoverVerticalCenter:f.top+q/2,popoverHorizontalCenter:f.left+n/2}}function e(b){return b.removeClass("a-arrow-top a-arrow-bottom a-arrow-left a-arrow-right")}function f(b){var a={deltaTop:0},e;a.top=b.triggerVerticalCenter-b.popoverHeight/2;a.top<b.windowTop+15?(e=Math.min(b.windowTop+15,b.triggerTop-15),a.deltaTop=a.top-e,a.top=e):a.top+b.popoverHeight>b.windowBottom-15&&(e=Math.min(15,b.windowBottom-b.triggerBottom+15),a.deltaTop=a.top+b.popoverHeight-(b.windowBottom-e),
a.top=b.windowBottom-e-b.popoverHeight);return a}function k(a){var d={deltaLeft:0},e;d.left=a.triggerHorizontalCenter-a.popoverWidth/2;15>d.left?(e=Math.min(15,a.triggerLeft-15),d.deltaLeft=d.left-e,d.left=e):d.left+a.popoverWidth>a.windowRight-15&&(e=Math.min(15,a.windowRight-a.triggerRight+15),d.deltaLeft=d.left+a.popoverWidth-(a.windowRight-e),d.left=a.windowRight-e-a.popoverWidth);return d}var p=g.$;p(m);var h=null;return{windowCenter:function(b){b=a(b.$popover,b.$trigger);var d={};d.top=(b.windowHeight-
b.popoverHeight)/2;d.left=(b.windowWidth-b.popoverWidth)/2;0>d.top&&(d.top=0);return d},windowTop:function(b){b=a(b.$popover,b.$trigger);var d={top:0};d.left=b.windowWidth/2-b.popoverWidth/2;return d},windowFullWidth:function(a){return{top:0,left:0}},triggerRight:function(b,d){var c=b.$popover;b=b.$trigger;d||(d=a(c,b));b=f(d);b.left=d.triggerRight;e(c).addClass("a-arrow-right");c.find(".bf-arrow-border").css("top",d.popoverHeight/2+b.deltaTop);return b},triggerLeft:function(b,d){var c=b.$popover;
b=b.$trigger;d||(d=a(c,b));b=f(d);b.left=d.triggerLeft-d.popoverWidth;b.left=0<b.left?b.left:0;e(c).addClass("a-arrow-left");c.find(".bf-arrow-border").css("top",d.popoverHeight/2+b.deltaTop);return b},triggerTop:function(b,d){var c=b.$popover;b=b.$trigger;d||(d=a(c,b));b=k(d);b.top=d.triggerTop-d.popoverHeight;e(c).addClass("a-arrow-top");c.find(".bf-arrow-border").css("left",d.popoverWidth/2+b.deltaLeft);return b},triggerBottom:function(b,d){var c=b.$popover;b=b.$trigger;d||(d=a(c,b));b=k(d);b.top=
d.triggerBottom;e(c).addClass("a-arrow-bottom");c.find(".bf-arrow-border").css("left",d.popoverWidth/2+b.deltaLeft);return b},triggerHorizontal:function(b,d){var e=b.$popover,c=b.$trigger;d||(d=a(e,c));return d.triggerLeft-d.windowLeft>d.windowRight-d.triggerRight?this.triggerLeft(b,d):this.triggerRight(b,d)},triggerVertical:function(b,d){var e=b.$popover,c=b.$trigger;d=d?d:a(e,c);return d.triggerTop-d.windowTop>d.popoverHeight+15?this.triggerTop(b,d):this.triggerBottom(b,d)},triggerVerticalAlignLeft:function(b,
d){var c=b.$popover;b=b.$trigger;d||(d=a(c,b));b={};var k=0,h=0,f=d.windowBottom-d.triggerBottom;b.left=d.triggerLeft;b.top=f>d.popoverHeight?d.triggerBottom+3:d.triggerTop-d.popoverHeight-3;15>b.left?(h=Math.min(15,d.triggerLeft-15),k=b.left-h,b.left=h):b.left+d.popoverWidth>d.windowRight-15&&(h=Math.min(15,d.windowRight-d.triggerRight+15),k=b.left+d.popoverWidth-(d.windowRight-h),b.left=d.windowRight-h-d.popoverWidth);e(c).addClass(f>d.popoverHeight?"a-arrow-bottom":"a-arrow-top");p.withoutRtl(function(){c.find(".bf-arrow-border").css("left",
d.triggerWidth/2+k)});return b},triggerBottomAlignRight:function(b,d){var c=b.$popover;b=b.$trigger;d||(d=a(c,b));b={};var h=0,k=0,f=d.windowBottom-d.triggerBottom;b.left=d.triggerRight-d.popoverWidth;b.top=d.triggerBottom+3;15>b.left?(k=Math.max(0,b.left),h=k-b.left,b.left=k):b.left+d.popoverWidth>d.windowRight-15&&(k=Math.min(15,d.windowRight-d.triggerRight+15),h=b.left+d.popoverWidth-(d.windowRight-k),b.left=d.windowRight-k-d.popoverWidth);e(c).addClass(f>d.popoverHeight?"a-arrow-bottom":"a-arrow-top");
p.withoutRtl(function(){c.find(".bf-arrow-border").css("right",d.triggerWidth/2+h)});return b},customPosition:function(b,d){return d.call(this,{popover:b,$popover:b.$popover,$trigger:b.$trigger,measure:a})}}});"use strict";l.when("A","brand-follow-button-tooltip-factory","brand-follow-button-tooltip-position","brand-follow-constants").register("brand-follow-button-tooltip",function(g,c,a,e){var f=g.$;return{show:function(k){var p=c.getOrCreateTooltip(),h=f(k);k=h.data(e.TOOLTIP_TEXT_DATA_KEY);h=a.triggerBottomAlignRight({$popover:p,
$trigger:h});k&&p.find(".bf-tooltip-inner").first().text(k);p.css({top:h.top+"px",left:h.left+6+"px",visibility:"visible",opacity:1,transition:"opacity 0.5s"})},hide:function(){c.getOrCreateTooltip().css({visibility:"hidden",opacity:0,transition:"visibility 0s 0.5s, opacity 0.5s linear"})}}});"use strict";l.register("brand-follow-sushi-client",function(){var g=["messageId","timestamp"];return function(){function c(a,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
this.endpoint=e;this.window=a;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.rejectedEvents=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=function(e){var c=function(){};e=function(){var e=function(){if(a.XDomainRequest){var b=new a.XDomainRequest;b.onerror=c;b.ontimeout=c;b.onprogress=c;
b.onload=c;b.timeout=0;return b}if(a.XMLHttpRequest){b=new a.XMLHttpRequest;if(!("withCredentials"in b))throw"";return b}return null};return{send:function(a,d){if(d&&a){var c=e();if(!c)throw"";c.open("POST",a,!0);c.setRequestHeader&&c.setRequestHeader("Content-type","text/plain");c.send(d)}},isSupported:!0}}();var p=function(){return{send:function(e,b){if(e&&b&&!a.navigator.sendBeacon(e,b))throw"";},isSupported:!!a.navigator.sendBeacon&&!(a.cordova&&a.cordova.platformId&&"ios"===a.cordova.platformId)}}();
return{ajaxClient:e,beaconClient:p}}(this);this.compressor=function(a){var e=function(b){if(b)switch("undefined"===typeof b?"undefined":q(b)){case "number":return!(b!==b||Infinity===b)&&b.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return b.length>a.dictionaryIndex.length;default:return!0}return!1},c=function(b){a.eventsDictionary[b]||(a.eventsDictionary[b]=a.dictionaryIndex++,a.reverseEventsDictionary[a.eventsDictionary[b]]=b);return a.eventsDictionary[b]},h=function(a){if(e(a)){var d=
0;a instanceof Array?d=2:a instanceof Function?d=null:a instanceof Object&&(d=1);switch(d){case 0:return c(a);case 2:for(var f=[],d=0;d<a.length;d++)f[d]=h(a[d]);return f;case 1:d={};for(f in a)Object.prototype.hasOwnProperty.call(a,f)&&(d[c(f)]=-1===g.indexOf(f)?h(a[f]):a[f]);return d}}return a};return{compressData:h,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},events:a.eventsQueue})}}}(this)}u(c,[{key:"onBeforeUnload",value:function(){!0!==this.unloadHandlerCalled&&
(this.flush(this),this.unloadHandlerCalled=!0)}},{key:"stringify",value:function(a){try{return JSON.stringify(a)}catch(e){console.warn("Fail to stringify data")}return null}},{key:"resetBatch",value:function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0}},{key:"sendWithClient",value:function(a){if(null==this.endpoint||""==this.endpoint)this.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var e=
this.compressor.buildPOSTObject();return a.send(this.endpoint,e)}throw"";}}},{key:"sendWithPriority",value:function(){for(var a=arguments.length,e=Array(a),c=0;c<a;c++)e[c]=arguments[c];for(a=0;a<e.length;a++){c=e[a];try{return this.sendWithClient(c)}catch(k){}}return null}},{key:"flush",value:function(a){a.eventsQueue.length&&(a.sendWithPriority(a.transportationClient.beaconClient||{},a.transportationClient.ajaxClient||{}),a.resetBatch())}},{key:"startHighPriorityQueueTimer",value:function(){0===
this.highPriorityFlushInterval?this.flush(this):this.highPriorityTimer||(this.highPriorityTimer=this.window.setTimeout(this.flush,this.highPriorityFlushInterval,this))}},{key:"startLowPriorityQueueTimer",value:function(){this.lowPriorityTimer||(this.lowPriorityTimer=this.window.setTimeout(this.flush,this.lowPriorityFlushInterval,this))}},{key:"generateMessageId",value:function(a,c){return a+"-"+c+"-"+this.eventSequence}},{key:"getCurrentISODate",value:function(){var a=new Date,c=function(a){return 10>
a?"0"+a:a};return Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}},{key:"decorateEvent",value:function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())}},{key:"startTimers",value:function(a){(a||
{}).n?this.startHighPriorityQueueTimer():this.startLowPriorityQueueTimer()}},{key:"encodeEvent",value:function(a,c,f){c=c.length;(499===this.eventsQueue.length||524288<this.batchSize+c)&&this.flush(this);this.batchSize+=c;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(f)}},{key:"addEvent",value:function(a,c){this.decorateEvent(a,c);var f=this.stringify(a);return f?(this.encodeEvent(a,f,c),!0):!1}},{key:"isValidAPIParam",value:function(a,c){return a&&-1<a.constructor.toString().indexOf(c)}},
{key:"isMaxCallsReached",value:function(){this.eventSequence++;5E4<this.eventSequence&&this.ueCount("SushiClientMaxCallsReached");return 5E4<this.eventSequence}},{key:"isValidAPICall",value:function(a,c){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")}},{key:"ueCount",value:function(a,c){"undefined"!==typeof ue&&ue&&ue.count&&ue.count("BrandFollowMetrics:"+a,0===c?0:c||(ue.count("BrandFollowMetrics:"+a)||0)+1)}},{key:"processEvent",value:function(a,c){var f=this.unloadHandlerCalled=
!1;this.options=c||{};this.isValidAPICall(a,this.options)&&(f=this.addEvent(a,this.options));f?this.ueCount("ClientEventsSuccess:"+a.event_type):(console.error("Invalid JS SushiEel API call"),this.ueCount("ClientEventsFailed:"+a.event_type));return f}}]);return c}()});"use strict";l.when("A","brand-follow-sushi-client","brand-follow-constants").register("brand-follow-metrics-client",function(g,c,a){var e=g.$;g=document.domain;g=0===g.indexOf("www.amazon")||0===g.indexOf("smile.amazon");var f=new c(m,
a.SUSHI_ENDPOINT[g?"prod":"gamma"]);return{getAttributeMapFromElement:function(c){var f=e(c).data(a.BFID_DATA_KEY),h=e(c).data(a.REQUEST_ID_DATA_KEY),b=e(c).data(a.PLACEMENT_TYPE_DATA_KEY),d=e(c).data(a.PLACEMENT_SUB_TYPE_DATA_KEY),g=e(c).data(a.PLACEMENT_ID_DATA_KEY),m=e(c).data(a.COMPONENT_TYPE_DATA_KEY),l=e(c).data(a.COMPONENT_ID_DATA_KEY),n=e(c).data(a.ELEMENT_TYPE_DATA_KEY);c=e(c).data(a.ELEMENT_ID_DATA_KEY);return{bfid:f,request_id:h,placement_type:b,placement_sub_type:d,placement_id:g,component_type:m,
component_id:l,element_type:n,element_id:c}},buildFollowButtonClickMetricEvent:function(a,c,e){a=this.getAttributeMapFromElement(a);return{bfid:a.bfid,request_id:a.request_id,placement_type:a.placement_type,placement_sub_type:a.placement_sub_type,placement_id:a.placement_id,component_type:a.component_type,component_id:a.component_id,element_type:a.element_type,element_id:a.element_id,event_type:c,tooltip_status:m.brandFollowTooltipStatus,timestamp:Date.now(),event_source:m.location.href,schema_version:1}},
processMetricEvent:function(a,c){f.processEvent(a,c)}}});"use strict";l.when("A","brand-follow-constants","brand-follow-button-tooltip","brand-follow-data-storage-helper").execute("brand-follow-tooltip-helper",function(g,c,a,e){var f=g.$;g.on("brandFollow:followButton:loaded",function(){var e;try{e="true"!==localStorage.getItem(c.HIDE_TOOLTIP_KEY)}catch(d){e=!1}if(e)if(e=f(c.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR),e.length)if(g.capabilities.mobile||g.capabilities.tablet||screen.width<=c.BREAKPOINTS.MOBILE){var b=
e.get(0);a.show(b);m.brandFollowTooltipStatus=c.TOOLTIP_STATUS_SHOWN;k(b)?p():f(m).scroll(g.throttle(function(){k(b)&&p()},200))}else f(c.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).undelegate(c.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR,"mouseenter mouseleave"),f(c.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).delegate(c.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR,"mouseenter mouseleave",function(b){"mouseenter"===b.type?(a.show(b.target),m.brandFollowTooltipStatus=c.TOOLTIP_STATUS_SHOWN,localStorage.setItem(c.HIDE_TOOLTIP_KEY,
"true")):"mouseleave"===b.type&&a.hide()});else m.brandFollowTooltipStatus=c.TOOLTIP_STATUS_DISABLED;else m.brandFollowTooltipStatus=c.TOOLTIP_STATUS_NOT_SHOWN});var k=function(a){a=a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom<=(m.innerHeight||document.documentElement.clientHeight)&&a.right<=(m.innerWidth||document.documentElement.clientWidth)},p=function(){localStorage.setItem(c.HIDE_TOOLTIP_KEY,"true");setTimeout(function(){a.hide()},c.TOOLTIP_DISPLAY_TIME)}});"use strict";l.when("A",
"brand-follow-data-storage-helper","brand-follow-constants","brand-follow-csm-helper").register("brand-follow-shared-utils",function(g,c,a,e){var f=g.$;m.BrandFollowSharedUtils={getLastClickAction:function(k){var g=a.FOLLOW_CSM_PREFIX+":sharedUtils:getLastClickAction";e.incrementCSMCounter(g);var h;h=a.FOLLOW_CSM_PREFIX+":sharedUtils:getBFID";e.incrementCSMCounter(h);k?"string"===typeof k?h=k:k instanceof Element&&1===k.nodeType?((k=f(k).find(a.Brand_FOLLOW_BUTTON_SELECTOR).andSelf().filter(a.Brand_FOLLOW_BUTTON_SELECTOR).first().data(a.BFID_DATA_KEY))||
e.incrementCSMCounter(h+":notFound"),h=k):(e.incrementCSMCounter(h+":unknownInput"),h=void 0):h=void 0;h||e.incrementCSMCounter(g+":emptyBFID");(h=c.getLastClickEvent(h))||e.incrementCSMCounter(g+":emptyResponse");return h},isFollowing:function(e){return c.getFollowStatus(e)===a.BRAND_FOLLOW_STATUS.FOLLOWING}}});"use strict";l.when("A","brand-follow-data-storage-helper","brand-follow-constants").register("on-brand-follow-status-change",function(g,c,a){var e=g.$;g.state.bind("brand-follow-status",
function(f,k){for(var g in k)k.hasOwnProperty(g)&&k[g]&&(c.getFollowStatus(g)===a.BRAND_FOLLOW_STATUS.FOLLOWING?e("[data-bfid\x3d'"+g+"']").each(function(){e(this).text(e(this).data(a.FOLLOWING_TEXT_DATA_KEY));e(this).attr(a.ARIA_LABEL_KEY,e(this).data(a.ARIA_LABEL_FOLLOWING_DATA_KEY))}):e("[data-bfid\x3d'"+g+"']").each(function(){e(this).text(e(this).data(a.FOLLOW_TEXT_DATA_KEY));e(this).attr(a.ARIA_LABEL_KEY,e(this).data(a.ARIA_LABEL_FOLLOW_DATA_KEY))}))})});"use strict";l.when("A").register("brand-follow-button-event-helper",
function(g){return{triggerFollowButtonLoadedEvent:function(){g.trigger("brandFollow:followButton:loaded")},triggerFollowButtonRedirectionEvent:function(c){g.trigger("brandFollow:followButton:redirectToAuthPortal",c)}}});"use strict";l.when("A","brand-follow-data-storage-helper","brand-follow-constants","brand-follow-afs-helper","brand-follow-auth-portal-link-builder","brand-follow-button-event-helper","brand-follow-metrics-client","brand-follow-csm-helper").register("brand-follow-button-click-handler",
function(g,c,a,e,f,k,p,h){var b=g.$;g.on("brandFollow:followButton:loaded",function(){b(a.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).undelegate(a.Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR,"click");b(a.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).delegate(a.Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR,"click",function(d){var g=a.FOLLOW_CSM_PREFIX+":clickHandler";h.incrementCSMCounter(g);var l=b(this).find(a.Brand_FOLLOW_BUTTON_SELECTOR).first(),n=l.data(a.BFID_DATA_KEY);if(n){var q=c.getFollowStatus(n);q||(q=l.data(a.FOLLOW_STATUS_DATA_KEY)?
a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);switch(q){case a.BRAND_FOLLOW_STATUS.FOLLOWING:h.incrementCSMCounter(g+":status:following");c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.PENDING);c.setLastClickEvent(n,a.EVENT_TYPE.UNFOLLOW);e.unfollow(n,function(){c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);var b=p.buildFollowButtonClickMetricEvent(l,a.EVENT_TYPE.UNFOLLOW,d);p.processMetricEvent(b,{n:1})},function(){c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.FOLLOWING)});
break;case a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING:h.incrementCSMCounter(g+":status:not_following");c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.PENDING);c.setLastClickEvent(n,a.EVENT_TYPE.FOLLOW);e.follow(n,function(){c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.FOLLOWING);var b=p.buildFollowButtonClickMetricEvent(l,a.EVENT_TYPE.FOLLOW,d);p.processMetricEvent(b,{n:1})},function(){c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING)},function(){k.triggerFollowButtonRedirectionEvent(d);var a=f.signin();
m.location.assign(a)});break;case a.BRAND_FOLLOW_STATUS.NOT_SIGNED_IN:h.incrementCSMCounter(g+":status:not_signed_in");k.triggerFollowButtonRedirectionEvent(d);g=f.signin();m.location.assign(g);break;case a.BRAND_FOLLOW_STATUS.ERROR:h.incrementCSMCounter(g+":status:error");k.triggerFollowButtonLoadedEvent();break;case a.BRAND_FOLLOW_STATUS.PENDING:return h.incrementCSMCounter(g+":status:pending"),!1;default:h.incrementCSMCounter(g+":status:unknown")}}else h.incrementCSMCounter(g+":emptyBFID")})})});
"use strict";l.when("A","brand-follow-data-storage-helper","brand-follow-constants","brand-follow-afs-helper","brand-follow-button-event-helper","brand-follow-csm-helper","on-brand-follow-status-change","ready").register("brand-follow-button-initializer",function(g,c,a,e,f,k){g.on("brandFollow:followButton:loaded",function(){g.$(a.Brand_FOLLOW_BUTTON_SELECTOR).each(function(){var f=g.$(this),h=f.data(a.BFID_DATA_KEY);if(h!==n){var b=c.getFollowStatus(h);if(b===n||b===a.BRAND_FOLLOW_STATUS.ERROR){b=
f.data(a.FOLLOW_STATUS_DATA_KEY);if(f.data(a.BACK_BUTTON_SUPPORT_ENABLED_DATA_KEY)){var d=m.performance||m.webkitPerformance,d=d&&d.navigation&&2==d.navigation.type;!/bot|crawl|spider/i.test(m.navigator&&m.navigator.userAgent)&&d&&(b="")}if(""!==b)c.setFollowStatus(h,b?a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);else{c.setFollowStatus(h,a.BRAND_FOLLOW_STATUS.PENDING);var l=a.FOLLOW_CSM_PREFIX+":FetchFollowStatus";k.incrementCSMCounter(""+l);e.getFollowStatusAndInitCsrf(h,
function(b){c.setFollowStatus(h,b.isFollowing?a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);k.incrementCSMCounter(l+":success");f.data(a.FOLLOW_STATUS_DATA_KEY)!==b.isFollowing&&k.incrementCSMCounter(l+":FoundDiff")},function(){k.incrementCSMCounter(l+":error");c.setFollowStatus(h,a.BRAND_FOLLOW_STATUS.ERROR)},function(){k.incrementCSMCounter(l+":notSignedIn");c.setFollowStatus(h,a.BRAND_FOLLOW_STATUS.NOT_SIGNED_IN)})}}else b===a.BRAND_FOLLOW_STATUS.FOLLOWING?(f.text(f.data(a.FOLLOWING_TEXT_DATA_KEY)),
f.attr(a.ARIA_LABEL_KEY,f.data(a.ARIA_LABEL_FOLLOWING_DATA_KEY))):(f.text(f.data(a.FOLLOW_TEXT_DATA_KEY)),f.attr(a.ARIA_LABEL_KEY,f.data(a.ARIA_LABEL_FOLLOW_DATA_KEY)))}})});f.triggerFollowButtonLoadedEvent()});"use strict";l.when("A","brand-follow-constants","brand-follow-button-event-helper","ready").execute("brand-follow-button-mutation-observer",function(g,c,a){var e=g.$;(function(){var f=m.MutationObserver||m.WebKitMutationObserver||m.MozMutationObserver;f!==n&&(new f(function(f,g){var h;g=!1;
for(var b=0;b<f.length;b++){h=f[b];if("childList"!==h.type)break;h=h.addedNodes;for(var d,l=0;l<h.length;l++)if(d=h[l],0!==e(d).find(c.Brand_FOLLOW_BUTTON_SELECTOR).length){g=!0;break}if(g){a.triggerFollowButtonLoadedEvent();break}}})).observe(document,{childList:!0,subtree:!0})})()})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("BrandFollowKataComponentAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(g){var h=window.AmazonUIPageJS||window.P,l=h._namespace||h.attributeErrors,f=l?l("PostsSearchWidgetAssets",""):h;f.guardFatal?f.guardFatal(g)(f,window):f.execute(function(){g(f,window)})})(function(g,h,l){g.when("A","rush-framework","related-posts-search-metrics-client","related-posts-carousel-view","af","ready").register("related-posts-search-widget",function(f,h,k,c){h.registerComponent("related-posts-search-widget","related-posts-search-widget",function(b){var e=f.$(b.elem());b={sushiEndpoint:b.prop("sushiEndpoint"),
requestId:b.prop("requestId"),pageType:b.prop("pageType"),pageId:b.prop("pageId"),appMode:b.prop("appMode"),platform:b.prop("platform"),mShopBuild:b.prop("mShopBuild")};e=new c(e);b=new k(e,b);e.initEvents(b);e.$carousel.length||b.emitCsmCounter("PostsCarouselWidgetExpectedButNotLoaded")})});"use strict";g.when("A","a-carousel-framework","posts-carousel-linkto","af","ready").register("related-posts-carousel-view",function(f,g,k){function c(a){this.$carouselContainer=a.find(".posts-feed-preview-wrapper");
this.$carousel=a.find(".related-posts-carousel-container")}var b=f.$,e=!1;c.prototype.getCarouselElement=function(){return this.$carousel};c.prototype.initEvents=function(a){var d=this;g.onInit("posts-feed-preview-carousel",function(c){e?a.emitCsmCounter("PostsCarouselWidgetAlreadyInitialized"):c?(a.emitCsmCounter("PostsCarouselWidgetInitialized"),d.auiCarousel=c,f.on(f.constants.BROWSER_EVENTS.SCROLL,function(){a.handleUserScroll()}),c.onChange("px",function(){a.handleUserScroll()}),b(".posts-feed-preview-card").click(function(d){a.handleUserClick(d)}),
h.addEventListener("beforeunload",function(){a.handleUnload()}),h.addEventListener("pagehide",function(){a.handleUnload()}),h.addEventListener("DOMContentLoaded",function(){a.handlePageLoad()}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&a.handleUnload();"visible"===document.visibilityState&&a.handlePageLoad()}),d.$carouselContainer.delegate("[data-target-href]","click",function(a){var e=a.target,c=d.$carouselContainer.get(0),m=b(a.target).attr("data-target-href");
if(null===m||m===l)m=b(a.target).closest("[data-target-href]").attr("data-target-href");for(;e&&e!==c;){if(e.hasAttribute("ignore-data-target-href"))return!1;e=e.parentNode}if("string"===typeof m&&m.length)return k.execute(m),!1}),d.$carouselContainer.delegate(".posts-feed-preview-link","mousedown keydown",function(a){switch(a.type){case "mousedown":b(a.target).addClass("posts-feed-preview-link-remove-outline");break;case "keydown":b(a.target).removeClass("posts-feed-preview-link-remove-outline")}}),
e=!0,a.initialize()):a.emitCsmCounter("PostsCarouselWidgetCarouselNotFound")})};return c});"use strict";g.when("A","posts-sushi-client","related-posts-measure","af","ready").register("related-posts-search-metrics-client",function(f,g,k){function c(a,d){this.carouselView=a;this.metricConfig=d;this.state={postVisibilityEventStates:{},postImpressionMetadata:{},carouselOnScreen:!1,unloadHandled:!1};this.sushiClient=new g(h,this.metricConfig.sushiEndpoint)}var b={PostImpression:2,PostPartialImpression:1,
CarouselOffScreen:1,PostClick:1,PostView:2,PostOffScreen:1,PageEgress:1},e=f.$;c.prototype.initialize=function(){this.isCarouselOutOfViewPort()||this.checkPostsClientSideMetrics()};c.prototype.handlePageLoad=function(){this.carouselInstance=this.generateInstanceId();this.requestInstance=this.generateInstanceId()};c.prototype.generateInstanceId=function(){return Math.round(Math.floor(999999*Math.random())+1)};c.prototype.emitCsmCounter=function(a){this.sushiClient.ueCount(a)};c.prototype.decorateMetricPayload=
function(a){a.request_id=this.metricConfig.requestId;a.request_instance=this.requestInstance;a.carousel_instance=this.carouselInstance;a.page_type=this.metricConfig.pageType;a.page_id=this.metricConfig.pageId;a.app_mode=this.metricConfig.appMode;a.app_build="1.0";a.platform=this.metricConfig.platform;this.metricConfig.mShopBuild&&(a.mshop_build=this.metricConfig.mShopBuild);a.event_version=b[a.event_type];return a};c.prototype.handleUserScroll=function(){this.checkPostsClientSideMetrics()};c.prototype.getOriginPx=
function(a){a=e("#"+a);var d=a.offset();return a.length?d.left+","+d.top:"-1,-1"};c.prototype.postOriginsAreInvalid=function(){for(var a=e(".posts-feed-preview-card"),d=null,b=!1,c=-1,f=this.carouselView.getCarouselElement().is(":visible"),h=0;h<a.length;h++){var g=e(a[h]),k=g.attr("id");if(g=g.is(":visible")){-1===c&&(c=h);k=this.getOriginPx(k);if(d){if(a=k===d)this.emitCsmCounter("PostsCarouselInvalidOrigins:LastVisible:"+(b?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:CurVisible:"+
(g?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:CarouselVisible:"+(f?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:FirstVisibleIndex:"+c);return a}d=k;b=g}}this.emitCsmCounter("PostsCarouselInvalidOrigins:NoCardsVisible:"+(d?"false":"true"));this.emitCsmCounter("PostsCarouselInvalidOrigins:CardsInvis:CarouselVisible:"+(f?"true":"false"));return!0};c.prototype.checkPostsClientSideMetrics=function(){if(this.postOriginsAreInvalid()){this.emitCsmCounter("PostsCarouselInvalidOrigins");
var a=!this.isCarouselOutOfViewPort();this.emitCsmCounter("PostsCarouselInvalidOrigins:OnScreen:"+(a?"true":"false"))}else this.checkPostImpressionMetrics(),this.checkPostCarouselOffScreenMetric()};c.prototype.checkPostImpressionMetrics=function(){for(var a=e(".posts-feed-preview-card"),d=0;d<a.length;d++){var b=e(a[d]),c=b.attr("id"),f=b.attr("data-post-rank");this.checkPostViewMetric(c,f);this.checkPostOffScreenMetric(c,f);b.is(":visible")&&(this.checkPostPartialImpressionMetric(c,f),this.checkPostImpressionMetric(c,
f))}};c.prototype.postEventEmittedSinceComingOnScreen=function(a,d){return this.state.postVisibilityEventStates[d]?this.state.postVisibilityEventStates[d][a]||!1:!1};c.prototype.shouldEmitMetrics=function(a,d){return!this.postEventEmittedSinceComingOnScreen(a,d)};c.prototype.checkPostCarouselOffScreenMetric=function(){if(this.state.carouselOnScreen&&this.isCarouselOutOfViewPort()){this.state.carouselOnScreen=!1;var a=this.decorateMetricPayload({event_type:"CarouselOffScreen"});this.sushiClient.processEvent(a,
{n:1});this.carouselInstance=this.generateInstanceId()}};c.prototype.checkPostPartialImpressionMetric=function(a,d){this.shouldEmitMetrics("PostPartialImpression",a)&&this.isPartialImpression(a)&&(this.state.carouselOnScreen=!0,d=this.buildPostEvent("PostPartialImpression",a,d),this.sushiClient.processEvent(d,{n:1}),this.updateImpressionState(a,"PostPartialImpression"))};c.prototype.isPartialImpression=function(a){a=k.getElementViewportExtents(a);return(a.isTopInViewport||a.isBottomInViewport)&&(a.isLeftInViewport||
a.isRightInViewport)};c.prototype.checkPostViewMetric=function(a,d){if(this.shouldEmitMetrics("PostView",a)&&this.isView(a)){d=this.buildPostEvent("PostView",a,d);var b=f.now()-this.state.postVisibilityEventStates[a].PostImpression;0<b&&36E5>b&&(d.dwell_time_ms=Math.round(b));this.sushiClient.processEvent(d,{n:1});this.updateImpressionState(a,"PostView")}};c.prototype.isView=function(a){if(this.postEventEmittedSinceComingOnScreen("PostImpression",a))return a=k.getElementViewportAreas(a),a.viewportArea<
.5*a.totalArea};c.prototype.checkPostImpressionMetric=function(a,d){this.shouldEmitMetrics("PostImpression",a)&&this.isImpression(a)&&(d=this.buildPostEvent("PostImpression",a,d),this.sushiClient.processEvent(d,{n:1}),this.updateImpressionState(a,"PostImpression",f.now()))};c.prototype.isImpression=function(a){a=k.getElementViewportAreas(a);return a.viewportArea>=.5*a.totalArea};c.prototype.checkPostOffScreenMetric=function(a,d){this.isPostOutOfViewPort(a)&&this.postEventEmittedSinceComingOnScreen("PostPartialImpression",
a)&&(d=this.buildPostEvent("PostOffScreen",a,d),this.sushiClient.processEvent(d,{n:1}),this.state.postVisibilityEventStates[a].PostImpression=!1,this.state.postVisibilityEventStates[a].PostPartialImpression=!1,this.state.postVisibilityEventStates[a].PostView=!1)};c.prototype.isPostOutOfViewPort=function(a){return!f.onScreen(e("#"+a),0)};c.prototype.isCarouselOutOfViewPort=function(){return!f.onScreen(this.carouselView.getCarouselElement(),0)};c.prototype.buildPostEvent=function(a,d,b){return this.decorateMetricPayload({event_type:a,
post_id:d.split("Posts-")[1],rank:parseInt(b,10),origin_px:this.getOriginPx(d)})};c.prototype.updateImpressionState=function(a,d,b){var c=this.state.postVisibilityEventStates[a]||{};c[d]="undefined"===typeof b?!0:b;this.state.postVisibilityEventStates[a]=c};c.prototype.handleUserClick=function(a){var d=e(a.target),b=d.attr("data-post-id"),c=d.attr("data-post-rank"),f=d.attr("data-click-target");if(null===b||null===c||b===l||c===l)c=d.closest(".posts-feed-preview-card"),b=c.attr("id"),c=c.attr("data-post-rank");
if(null===f||f===l)f=d.closest("[data-click-target]"),f=null!==f&&f!==l?f.attr("data-click-target"):"UNKNOWN";var g=this.buildPostEvent("PostClick",b,c);g.click_target=f;"FollowButton"===f&&h.BrandFollowSharedUtils&&e.isFunction(h.BrandFollowSharedUtils.getLastClickAction)&&(g.click_action=h.BrandFollowSharedUtils.getLastClickAction(a.target));this.sushiClient.processEvent(g,{n:1});a=d.closest("[data-click-action]");null!==a&&a!==l&&"Egress"===a.attr("data-click-action")&&"FollowButton"!==f&&(a=a.attr("data-target-destination")||
"NONE",this.emitPageEgressMetric(b,c,a,f))};c.prototype.emitPageEgressMetric=function(a,d,b,c){a=this.buildPostEvent("PageEgress",a,d);a.destination_type=b;a.click_target=c;this.sushiClient.processEvent(a,{n:1})};c.prototype.handleUnload=function(){if(!this.state.unloadHandled){this.state.unloadHandled=!0;for(var a=e(".posts-feed-preview-card"),d=0;d<a.length;d++){var b=e(a[d]),c=b.attr("id"),b=b.attr("data-post-rank");if(this.postEventEmittedSinceComingOnScreen("PostImpression",c)&&this.shouldEmitMetrics("PostView",
c)){var b=this.buildPostEvent("PostView",c,b),g=f.now()-this.state.postVisibilityEventStates[c].PostImpression;0<g&&36E5>g&&(b.dwell_time_ms=Math.round(g));this.sushiClient.processEvent(b,{n:1});this.updateImpressionState(c,"PostView")}}this.state.carouselOnScreen&&(a=this.decorateMetricPayload({event_type:"CarouselOffScreen"}),this.sushiClient.processEvent(a,{n:1}),this.state.carouselOnScreen=!1);this.state.carouselInstance=this.generateInstanceId();this.sushiClient.onBeforeUnload()}};return c});
"use strict";g.when("A","af","ready").register("related-posts-measure",function(f){function g(){var b=c(h),e=b.scrollTop(),a=b.scrollLeft(),d=h.innerHeight||b.height(),b=h.innerWidth||b.width();return{top:e,left:a,height:d,width:b,bottom:e+d,right:a+b}}function k(b){var c=b.offset(),a=c.top,c=c.left,d=b.height();b=b.width();return{top:a,left:c,height:d,width:b,bottom:a+d,right:c+b}}var c=f.$;return{getElementViewportAreas:function(b){b=c("#"+b);var e=g(),a=e.width*e.height,d=k(b),h=d.width*d.height,
e=Math.max(Math.min(d.right,e.right)-Math.max(d.left,e.left),0)*Math.max(Math.min(d.bottom,e.bottom)-Math.max(d.top,e.top),0);return b.length&&f.onScreen(b,0)?{totalArea:h,viewportArea:e,totalViewportArea:a}:{totalArea:1,viewportArea:0,totalViewportArea:a}},getElementViewportExtents:function(b){b=c("#"+b);var e=g(),a=k(b);return b.length&&f.onScreen(b,0)?{isTopInViewport:a.top>=e.top&&a.top<e.bottom,isBottomInViewport:a.bottom>=e.top&&a.bottom<e.bottom,isLeftInViewport:a.left>=e.left&&a.left<e.right,
isRightInViewport:a.right>=e.left&&a.right<e.right}:{isTopInViewport:!1,isBottomInViewport:!1,isLeftInViewport:!1,isRightInViewport:!1}},getViewportCoordinates:g,getElementLocation:k}});g.when("af","ready").register("posts-carousel-linkto",function(){return{execute:function(f){h.location.href=f}}})});
/* ******** */
(function(f){var e=window.AmazonUIPageJS||window.P,g=e._namespace||e.attributeErrors,a=g?g("PrelaunchAssets",""):e;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,e,g){f.when("A","a-button").register("nlx-notify-me-utils",function(a,f){function t(){function c(c){return(10>c?"0":"")+c}var d=new Date;return d.getUTCFullYear().toString().substr(2)+c(d.getUTCMonth()+1)+c(d.getUTCDate())+c(d.getUTCHours())}function n(c){k.get("/gp/product/ajax-handlers/reftag.html/ref\x3d"+
c)}function p(c){var d="",a;for(a in c)""!==d&&(d+="\x26"),d+=a+"\x3d"+encodeURIComponent(c[a]);return d}function g(c){var d=0===k("html.a-mobile").length?!1:!0,h=k(c.target),b=h.data(),u=b.signedIn,v=b.refMarker,w=b.subscribeText,x=b.unsubscribeText,q=b.notifyUri,r=b.action,l;a:switch(b.source){case "DETAIL":l="d";break a;default:l="s"}var b={topics:b.topic,channels:b.channel,csrfToken:b.token,entityID:b.entityId,entityType:b.entityType,action:b.action,source:b.source,shouldSendConfirmationEmail:b.sendConfirmationEmail},
m=f("#"+h.closest(".a-button").get(0).id),y=m.text();c.preventDefault();!0!==u?e.location.href=q+"?"+p(b)+"\x26redirectUrl\x3d"+encodeURIComponent("/preferences/subscriptions/your-subscriptions/current-subscriptions?noMoaR\x3d1"):(h.html('\x3cspan class\x3d"a-spinner a-spinner-small"\x3e\x3c/span\x3e'),a.ajax(q,{params:b,method:"post",success:function(){var b,a;switch(r){case "sub":b="unsub";a=x;break;default:b="sub",a=w}m.text(a);h.data("action",b);b=l;a="sub"===r?"n":"u";var c=t();n(v+"_"+b+"_"+
(d?"m":"d")+"_"+c+"_"+a)},error:function(){m.text(y)}}))}var k=a.$;return{generateQueryString:p,registerRefMarker:n,getButtonClickHandler:function(){return g}}});"use strict";f.when("A","nlx-notify-me-utils","rush-framework").register("nlx-notify-me-component",function(a,f,e){var g=a.$;e&&e.registerComponent("nlx-notify-me-component","nlx-notify-me-component",function(a){a=a.elem();a=g(a);var e=f.getButtonClickHandler();a.click(e)})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("INSearchCXAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("MoreLikeThisAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("SearchCountdownAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("DynamicComparisonAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.register("hello-aui",function(){function a(){}a.prototype.add=function(a,b){return a+b};return a})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("VseProductVideoSearchAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("MashovAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
